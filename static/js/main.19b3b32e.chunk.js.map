{"version":3,"sources":["definition/styles/color.tsx","definition/styles/padding.tsx","definition/styles/min-height.tsx","definition/styles/max-height.tsx","definition/styles/justify-content.tsx","definition/styles/font-size.tsx","definition/styles/font-weight.tsx","definition/styles/ellipsis.tsx","definition/styles/flex-direction.tsx","definition/styles/flex-grow.tsx","definition/styles/align-items.tsx","definition/styles/text-indent.tsx","definition/styles/letter-spacing.tsx","definition/styles/min-width.tsx","definition/styles/max-width.tsx","definition/styles/border.tsx","definition/styles/utils.ts","definition/content/components/metadata-input.tsx","definition/content/text.tsx","template/editor/types.ts","components/Header.tsx","asserts/images/logo.png","home/index.tsx","errors/error-404.tsx","plugins/moment.ts","plugins/database.ts","metadata/index.tsx","metadata/editor/json-input.tsx","metadata/editor/overview.tsx","metadata/editor/index.tsx","template/index.tsx","template/editor/material/index.tsx","template/editor/blueprint/layout-contents.tsx","template/editor/blueprint/page-layouts.tsx","template/editor/blueprint/index.tsx","template/editor/building/index.tsx","definition/content/utils.ts","definition/layout/utils.ts","definition/utils.ts","template/editor/index.tsx","preview/index.tsx","preview/editor/render.tsx","preview/editor/json-editor.tsx","preview/editor/index.tsx","App.tsx","reportWebVitals.ts","index.tsx","definition/index.ts","definition/layout/many.tsx","definition/styles/components/size-input-style.tsx"],"names":["Container","styled","div","Swatch","props","color","Popover","Cover","Color","Blueprint","useState","display","setDisplay","value","onClick","onChange","v","hex","render","defaultValue","description","title","key","PaddingInput","addonBefore","min","max","style","width","String","Number","Padding","top","bottom","left","right","paddingTop","rem","paddingBottom","paddingLeft","paddingRight","MinHeight","SizeInputStyle","minHeight","size","unit","MaxHeight","maxHeight","Categories","JustifyContent","map","it","index","Option","justifyContent","FontSize","fontSize","FontWeight","fontWeight","Ellipsis","checked","checkedChildren","unCheckedChildren","overflow","textOverflow","whiteSpace","FlexDirection","flexDirection","FlexGrow","flexGrow","AlignItems","alignItems","TextIndent","val","textIndent","LetterSpacing","letterSpacing","MinWidth","minWidth","MaxWidth","maxWidth","ItemsContainer","StyleSelect","Items","addonAfter","Border","borderTop","borderBottom","borderLeft","borderRight","px","styles","reduce","pv","Object","assign","definition","LAYOUT_STYLE","renderLayout","includes","createStyle","serialize","STYLE_DEFINITIONS","find","toJSON","this","cloneDeep","InputArea","focus","MetadataContainer","Title","MetadataInput","setFocus","items","search","setSearch","ref","useRef","TextArea","current","height","type","placeholder","ev","message","warn","changeInput","target","onFocus","window","open","metadata","id","EditTwoTone","allowClear","filter","path","alias","changeSearch","length","item","selectionStart","resizableTextArea","textArea","before","substring","after","start","exec","end","entryMetadata","content","trigger","placement","required","getData","Text","Render","result","direction","lines","split","Array","from","Building","onChangeActive","DroppableIds","MaterialType","Nav","isFull","Logo","img","attrs","src","Header","navigate","useNavigate","className","children","Content","Aside","aside","Article","article","Menu","isActive","Description","MENUS","url","Home","location","useLocation","menu","pathname","useEffect","href","Error404","status","subTitle","extra","DATE_TIME","METATABLES","createdAt","updatedAt","json","TEMPLATES","metadataId","EditContainer","EditHeader","EditDescription","Index","useLocalStorage","JSON","stringify","metatables","setMetatables","editId","setEditId","EditItem","uuid4","setValue","parse","error","now","moment","format","onOk","handleSave","onCancel","autoSize","minRows","maxRows","list","findIndex","splice","push","undefined","JsonInput","isArray","jsObject","handleChange","colors","default","background","background_warning","string","number","colon","keys","keys_whiteSpace","primitive","locale","STATUS","add","delete","update","normal","Overview","setItems","precess","itKey","nextKey","prototype","hasOwnProperty","call","sortBy","lastId","maxBy","success","dataSource","pagination","rowKey","Column","dataIndex","align","HeaderContainer","Left","Right","useParams","setMetadata","editCache","setEditCache","setJson","templates","setTemplates","template","disabled","layouts","Groups","Subject","ul","Item","li","isDragging","Clone","Material","PageStyle","sizes","PAPER_SIZES","changeWidth","SyncOutlined","onBlur","changeStyle","droppableId","isDropDisabled","provided","innerRef","flex","updating","okText","cancelText","onConfirm","onSave","danger","CONTENT_DEFINITIONS","draggableId","snapshot","Fragment","draggableProps","dragHandleProps","LayoutContents","onDragEnd","destination","source","contents","offset","droppableProps","isDraggingOver","handleDelete","Elements","PageLayouts","PageSetting","header","footer","indexes","pageIndexes","pageIndex","listIndex","listIndexes","overlay","span","Notice","setCurrent","changeValue","onChangeActiveValue","active","changeContents","activeKey","centered","TabPane","tab","layout","contentId","renderContentOrLayout","contentIndex","layoutIndex","layoutId","section","View","PageContainer","LayoutContainer","LayoutHandle","dropSnapshot","Layout","draggingOverWith","endsWith","createContent","defaultStyles","dit","createByLayoutDefinition","createLayout","Many","createByContentDefinition","LAYOUT_DEFINITIONS","createByLayoutSerialize","flattenData","data","valueKey","getRenderData","texts","text","replace","match","p1","trim","join","deserializePage","page","DEFAULT_TEMPLATE_STYLES","Editor","renderData","pageCache","setPageCache","pageSerialize","setPage","setActive","changeActive","contentDefinition","startsWith","sourceLayout","destinationLayout","idx","back","temps","Preview","RenderContainer","PageImg","IFRAME_ID","canvas","setCanvas","toCanvas","html","a","o1","document","getElementById","body","removeChild","iframe","createElement","visibility","position","srcdoc","SCALE","appendChild","Promise","resolve","timer","setInterval","contentDocument","clearInterval","html2Canvas","o2","renderCanvas","pageable","offsetHeight","scrollHeight","i","outerHTML","oldIframe","then","tests","doc","JsPDF","dataURL","toDataURL","addPage","addImage","save","download","wind","write","setTimeout","print","close","alt","JsonEditor","App","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","ContentContainer","SizeSelect"],"mappings":"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","file":"static/js/main.19b3b32e.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport { StyleDefinition } from './types'\nimport { SketchPicker } from 'react-color'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  display: inline-block;\n  position: relative;\n  width: 190px;\n  height: 30px;\n`\n\nconst Swatch = styled.div<{color: string}>`\n  background-color: ${props => props.color};\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, .1);\n  display: inline-block;\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n`\n\nconst Popover = styled.div`\n  position: absolute;\n  z-index: 2;\n  left: -80px;\n  top: -271px\n`\n\nconst Cover = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n`\n\nconst Color: StyleDefinition<string> = {\n  Blueprint (props: { value: string; onChange: (value: string) => void }) {\n    const [display, setDisplay] = useState(false)\n\n    return (\n      <Container>\n        <Swatch color={props.value} onClick={() => setDisplay(true)}/>\n        {display && (\n          <Popover>\n            <Cover onClick={() => setDisplay(false)}/>\n            <SketchPicker color={props.value} onChange={(v) => props.onChange(v.hex)} />\n          </Popover>\n        )}\n      </Container>\n    )\n  },\n  render (value: string) {\n    return { color: value }\n  },\n  defaultValue: '#000',\n  description: '',\n  title: '字体颜色',\n  key: 'Color'\n}\nexport default Color\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { rem } from './utils'\nimport { InputNumber } from 'antd'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  flex: auto;\n`\n\nconst PaddingInput = (props: {title: string, value: number, onChange: (value: number) => void}) => (\n  <InputNumber addonBefore={props.title} min=\"0\" max=\"999\" style={{ width: '100%' }} value={String(props.value)} onChange={(v) => props.onChange(Number(v))} />\n)\n\nconst Padding:StyleDefinition<{top: number, bottom: number, left: number, right: number}> = {\n  Blueprint (props: { value: { top: number; bottom: number; left: number; right: number }; onChange: (value: { top: number; bottom: number; left: number; right: number }) => void }) {\n    return (\n      <Container>\n        <PaddingInput title=\"上\" value={props.value.top} onChange={(v) => props.onChange({ ...props.value, top: v })} />\n        <PaddingInput title=\"下\" value={props.value.bottom} onChange={(v) => props.onChange({ ...props.value, bottom: v })} />\n        <PaddingInput title=\"左\" value={props.value.left} onChange={(v) => props.onChange({ ...props.value, left: v })} />\n        <PaddingInput title=\"右\" value={props.value.right} onChange={(v) => props.onChange({ ...props.value, right: v })} />\n      </Container>\n    )\n  },\n  render (value: { top: number; bottom: number; left: number; right: number }) {\n    return {\n      paddingTop: rem(value.top),\n      paddingBottom: rem(value.bottom),\n      paddingLeft: rem(value.left),\n      paddingRight: rem(value.right)\n    }\n  },\n  defaultValue: { bottom: 0, left: 0, right: 0, top: 0 },\n  title: '边距',\n  description: '',\n  key: 'Padding'\n}\n\nexport default Padding\n","import { StyleDefinition } from './types'\nimport { rem } from './utils'\nimport { SizeInputStyle, SizeInputValue } from './components/size-input-style'\n\nconst MinHeight: StyleDefinition<SizeInputValue> = {\n  ...SizeInputStyle,\n  render (value: SizeInputValue) {\n    return { minHeight: value.size ? (value.unit === 'px' ? rem(value.size) : `${value.size}${value.unit}`) : 'auto' }\n  },\n  title: '最小高',\n  description: '',\n  key: 'MinHeight'\n}\nexport default MinHeight\n","import { StyleDefinition } from './types'\nimport { rem } from './utils'\nimport { SizeInputStyle, SizeInputValue } from './components/size-input-style'\n\nconst MaxHeight: StyleDefinition<SizeInputValue> = {\n  ...SizeInputStyle,\n  render (value: SizeInputValue) {\n    return { maxHeight: value.size ? (value.unit === 'px' ? rem(value.size) : `${value.size}${value.unit}`) : 'none' }\n  },\n  title: '最大高',\n  description: '',\n  key: 'MaxHeight'\n}\nexport default MaxHeight\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { Select } from 'antd'\n\ntype Category = 'center' | 'flex-start' | 'flex-end' | 'space-between' | 'space-around' | 'space-evenly'\n\nconst Categories: {title: string, value: Category}[] = [\n  {\n    title: '开始',\n    value: 'flex-start'\n  },\n  {\n    title: '居中',\n    value: 'center'\n  },\n  {\n    title: '结束',\n    value: 'flex-end'\n  },\n  {\n    title: '间距相等',\n    value: 'space-between'\n  },\n  {\n    title: '围绕间隔',\n    value: 'space-around'\n  },\n  {\n    title: '边距相等',\n    value: 'space-evenly'\n  }\n]\n\nconst JustifyContent: StyleDefinition<Category> = {\n  Blueprint (props: { value: Category; onChange: (value: Category) => void }) {\n    return (\n      <Select\n        value={props.value}\n        onChange={props.onChange}\n        style={{ width: 190 }}\n      >\n        {Categories.map((it, index) => {\n          return (<Select.Option key={index} value={it.value}>{it.title}</Select.Option>)\n        })}\n      </Select>\n    )\n  },\n  render (value: Category) {\n    return { justifyContent: value }\n  },\n  title: '主方向排列',\n  defaultValue: 'flex-start',\n  description: '',\n  key: 'JustifyContent'\n}\n\nexport default JustifyContent\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { rem } from './utils'\nimport { InputNumber } from 'antd'\n\nconst FontSize: StyleDefinition<number> = {\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\n    return (\n      <InputNumber min=\"12\" max=\"99\" style={{ width: 190 }} value={String(props.value)} onChange={(v) => props.onChange(Number(v))} />\n    )\n  },\n  render (value: number) {\n    return {\n      fontSize: rem(value)\n    }\n  },\n  defaultValue: 14,\n  description: '',\n  title: '字体大小',\n  key: 'FontSize'\n}\n\nexport default FontSize\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { Select } from 'antd'\n\nconst FontWeight: StyleDefinition<number> = {\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\n    return (\n      <Select\n        value={props.value}\n        onChange={props.onChange}\n        style={{ width: 190 }}\n      >\n        {[400, 500, 600, 700, 800, 900].map((it, index) => {\n          return (<Select.Option key={index} value={it}>{it}</Select.Option>)\n        })}\n      </Select>\n    )\n  },\n  render (value: number) {\n    return { fontWeight: value }\n  },\n  defaultValue: 400,\n  description: '',\n  title: '字体粗细',\n  key: 'FontWeight'\n}\n\nexport default FontWeight\n","import React from 'react'\nimport { Switch } from 'antd'\nimport { StyleDefinition } from './types'\n\nconst Ellipsis: StyleDefinition<boolean> = {\n  Blueprint (props: { value: boolean; onChange: (value: boolean) => void }) {\n    return (\n      <Switch checked={props.value} checkedChildren=\"开启\" unCheckedChildren=\"关闭\" onChange={(v) => props.onChange(v)} />\n    )\n  },\n  render (value: boolean) {\n    return { overflow: value ? 'hidden' : 'unset', textOverflow: value ? 'ellipsis' : 'unset', whiteSpace: 'nowrap' }\n  },\n  defaultValue: false,\n  description: '配置最大宽/高使用',\n  title: '超出省略',\n  key: 'Ellipsis'\n}\n\nexport default Ellipsis\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { Switch } from 'antd'\n\ntype Direction = 'row' | 'column'\nconst FlexDirection: StyleDefinition<Direction> = {\n  title: '方向',\n  defaultValue: 'row',\n  description: '',\n  Blueprint (props: { value: Direction; onChange: (value: Direction) => void }) {\n    return (\n      <Switch checked={props.value === 'row'} checkedChildren=\"横\" unCheckedChildren=\"竖\" onChange={(v) => props.onChange(v ? 'row' : 'column')} />\n    )\n  },\n  render (value: Direction) {\n    return { flexDirection: value }\n  },\n  key: 'FlexDirection'\n}\nexport default FlexDirection\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { InputNumber } from 'antd'\n\nconst FlexGrow: StyleDefinition<number> = {\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\n    return (\n      <InputNumber min=\"0\" max=\"99\" style={{ width: 190 }} value={String(props.value)} onChange={(v) => props.onChange(Number(v))} />\n    )\n  },\n  render (value: number) {\n    return { flexGrow: value }\n  },\n  defaultValue: 1,\n  title: '主方向占比',\n  description: '',\n  key: 'FlexGrow'\n}\n\nexport default FlexGrow\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { Select } from 'antd'\n\ntype Category = 'center' | 'flex-start' | 'flex-end'\n\nconst Categories: { title: string, value: Category }[] = [\n  {\n    title: '开始',\n    value: 'flex-start'\n  },\n  {\n    title: '居中',\n    value: 'center'\n  },\n  {\n    title: '结束',\n    value: 'flex-end'\n  }\n]\n\nconst AlignItems: StyleDefinition<Category> = {\n  Blueprint (props: { value: Category; onChange: (value: Category) => void }) {\n    return (\n      <Select\n        value={props.value}\n        onChange={props.onChange}\n        style={{ width: 190 }}\n      >\n        {Categories.map((it, index) => {\n          return (<Select.Option key={index} value={it.value}>{it.title}</Select.Option>)\n        })}\n      </Select>\n    )\n  },\n  render (value: Category) {\n    return { alignItems: value }\n  },\n  title: '副方向排列',\n  defaultValue: 'center',\n  description: '',\n  key: 'AlignItems'\n}\n\nexport default AlignItems\n","import { InputNumber } from 'antd'\nimport React from 'react'\nimport { StyleDefinition } from './types'\nimport { rem } from './utils'\n\nconst TextIndent: StyleDefinition<number> = {\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\n    return (\n      <InputNumber min=\"0\" max=\"999\" style={{ width: 190 }} value={String(props.value)} onChange={(val) => props.onChange(Number(val))} />\n    )\n  },\n  render (value: number) {\n    return { textIndent: rem(value) }\n  },\n  defaultValue: 0,\n  description: '',\n  title: '首行缩进',\n  key: 'TextIndent'\n}\nexport default TextIndent\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { InputNumber } from 'antd'\n\nconst LetterSpacing: StyleDefinition<number> = {\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\n    return (\n      <InputNumber min=\"0\" max=\"999\" style={{ width: 190 }} value={String(props.value)} onChange={(val) => props.onChange(Number(val))} />\n    )\n  },\n  defaultValue: 0,\n  description: '',\n  key: 'LetterSpacing',\n  render (value: number) {\n    return { letterSpacing: value }\n  },\n  title: '文字间隔'\n}\nexport default LetterSpacing\n","import { StyleDefinition } from './types'\nimport { rem } from './utils'\nimport { SizeInputStyle, SizeInputValue } from './components/size-input-style'\n\nconst MinWidth: StyleDefinition<SizeInputValue> = {\n  ...SizeInputStyle,\n  render (value: SizeInputValue) {\n    return { minWidth: value.size ? (value.unit === 'px' ? rem(value.size) : `${value.size}${value.unit}`) : 'auto' }\n  },\n  title: '最小宽',\n  description: '',\n  key: 'MinWidth'\n}\nexport default MinWidth\n","import { StyleDefinition } from './types'\nimport { rem } from './utils'\nimport { SizeInputStyle, SizeInputValue } from './components/size-input-style'\n\nconst MaxWidth: StyleDefinition<SizeInputValue> = {\n  ...SizeInputStyle,\n  render (value: SizeInputValue) {\n    return { maxWidth: value.size ? (value.unit === 'px' ? rem(value.size) : `${value.size}${value.unit}`) : 'none' }\n  },\n  title: '最大宽',\n  description: '',\n  key: 'MaxWidth'\n}\nexport default MaxWidth\n","import React from 'react'\nimport { StyleDefinition } from './types'\nimport { rem } from './utils'\nimport { InputNumber, Select } from 'antd'\nimport styled from 'styled-components'\nimport Color from './color'\n\nconst Container = styled.div`\n  flex: auto;\n`\n\nconst ItemsContainer = styled.div`\n  display: flex;\n\n  > div:last-child {\n    width: 58px;\n\n    > div:nth-child(2) {\n      left: -212px;\n      top: -279px;\n    }\n  }\n`\n\ntype LineStyle = 'solid' | 'double' | 'dotted'\ninterface BlockStyle {\n  size: number,\n  style: LineStyle,\n  color: string\n}\n\ninterface Value {\n  top: BlockStyle\n  bottom: BlockStyle\n  left: BlockStyle\n  right: BlockStyle\n}\n\nconst StyleSelect = (props: { value: LineStyle, onChange: (value: LineStyle) => void }) => (\n  <Select value={props.value} onChange={props.onChange}>\n    <Select.Option value=\"solid\">实线</Select.Option>\n    <Select.Option value=\"double\">双实</Select.Option>\n    <Select.Option value=\"dotted\">点线</Select.Option>\n  </Select>\n)\n\nconst Items = (props: { title: string, value: BlockStyle, onChange: (value: BlockStyle) => void }) => (\n  <ItemsContainer>\n    <InputNumber\n      addonBefore={props.title}\n      min=\"0\"\n      max=\"999\"\n      style={{ width: 190 }}\n      value={String(props.value.size)}\n      onChange={(v) => props.onChange({ ...props.value, size: Number(v) })}\n      addonAfter={<StyleSelect value={props.value.style} onChange={(v) => props.onChange({ ...props.value, style: v })} />}\n    />\n    <Color.Blueprint value={props.value.color} onChange={v => props.onChange({ ...props.value, color: v })} />\n  </ItemsContainer>\n)\nconst Border: StyleDefinition<Value> = {\n  Blueprint (props: { value: Value; onChange: (value: Value) => void }) {\n    return (\n      <Container>\n        <Items title=\"上\" value={props.value.top} onChange={(v) => props.onChange({ ...props.value, top: v })} />\n        <Items title=\"下\" value={props.value.bottom} onChange={(v) => props.onChange({ ...props.value, bottom: v })} />\n        <Items title=\"左\" value={props.value.left} onChange={(v) => props.onChange({ ...props.value, left: v })} />\n        <Items title=\"右\" value={props.value.right} onChange={(v) => props.onChange({ ...props.value, right: v })} />\n      </Container>\n    )\n  },\n  render (value: Value) {\n    return {\n      borderTop: `${rem(value.top.size)} ${value.top.style} ${value.top.color}`,\n      borderBottom: `${rem(value.bottom.size)} ${value.bottom.style} ${value.bottom.color}`,\n      borderLeft: `${rem(value.left.size)} ${value.left.style} ${value.left.color}`,\n      borderRight: `${rem(value.right.size)} ${value.right.style} ${value.right.color}`\n    }\n  },\n  defaultValue: {\n    bottom: { size: 0, color: '#000', style: 'solid' },\n    left: { size: 0, color: '#000', style: 'solid' },\n    right: { size: 0, color: '#000', style: 'solid' },\n    top: { size: 0, color: '#000', style: 'solid' }\n  },\n  description: '',\n  title: '边距线',\n  key: 'Border'\n}\n\nexport default Border\n","import { CSSProperties } from 'react'\n\nimport { Style, StyleDefinition, StyleSerialize } from './types'\nimport { cloneDeep } from 'lodash'\nimport { STYLE_DEFINITIONS } from '../index'\n\n/**\n * 使用 html2pdf 生成 pdf, html -> canvas -> img -> pdf\n * 为了获取高清图片,需要放大倍数再缩小成打印尺寸,因此不能直接使用px, 设置 html.fontSize = 100, 打印时扩大倍数\n * @param px\n */\nexport const rem = (px: number): string => {\n  return `${px / 100}rem`\n}\n\nexport const render = (styles: Style<any>[]): CSSProperties => {\n  return styles.reduce<CSSProperties>((pv, it) => {\n    return Object.assign(pv, it.definition.render(it.value)) as CSSProperties\n  }, { display: 'flex' })\n}\n\nconst LAYOUT_STYLE = ['FlexDirection', 'JustifyContent', 'AlignItems', 'FlexGrow', 'MinHeight', 'MinWidth', 'MaxHeight', 'MaxWidth']\nexport const renderLayout = (styles: Style<any>[]): CSSProperties => {\n  return styles.reduce<CSSProperties>((pv, it) => {\n    if (!LAYOUT_STYLE.includes(it.definition.key)) {\n      return pv\n    }\n    return Object.assign(pv, it.definition.render(it.value)) as CSSProperties\n  }, { display: 'flex' })\n}\n\nexport const createStyle = (style: StyleSerialize | StyleDefinition<any>, value?: any): Style<any> => {\n  if ((style as StyleSerialize).definition) {\n    const serialize = style as StyleSerialize\n    return {\n      value: value ?? serialize.value,\n      definition: STYLE_DEFINITIONS.find(it => it.key === serialize.definition)!,\n      toJSON () {\n        return {\n          definition: this.definition.key,\n          value: this.value\n        }\n      }\n    }\n  }\n  const definition = style as StyleDefinition<any>\n  return {\n    value: cloneDeep(definition.defaultValue),\n    definition: definition,\n    toJSON () {\n      return {\n        definition: this.definition.key,\n        value: value ?? this.value\n      }\n    }\n  }\n}\n\nexport const getStyleDefinitions = async () => {\n  return [\n    await import('./flex-direction'),\n    await import('./justify-content'),\n    await import('./align-items'),\n    await import('./flex-grow'),\n    await import('./font-size'),\n    await import('./font-weight'),\n    await import('./text-indent'),\n    await import('./letter-spacing'),\n    await import('./color'),\n    await import('./ellipsis'),\n    await import('./min-height'),\n    await import('./min-width'),\n    await import('./max-height'),\n    await import('./max-width'),\n    await import('./padding'),\n    await import('./border')\n  ]\n}\n\nexport const getDefaultTemplateStyles = async () => {\n  return [\n    await import('./font-size'),\n    await import('./font-weight'),\n    await import('./ellipsis'),\n    await import('./color'),\n    await import('./padding')\n  ]\n}\n","import React, { useState, useRef } from 'react'\nimport { Metadata, MetadataItem } from '../../types'\nimport styled from 'styled-components'\nimport { Input, Popover as AntdPopover, Tag, message } from 'antd'\nimport { TextAreaRef } from 'antd/lib/input/TextArea'\nimport { EditTwoTone } from '@ant-design/icons'\n\nconst Container = styled.div`\n`\n\nconst InputArea = styled.div<{ focus: boolean }>`\n  position: relative;\n  ${props => !props.focus ? '' : 'z-index: 3;'}\n`\n\nconst Popover = styled.div`\n  position: absolute;\n  z-index: 2;\n`\n\nconst Cover = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n`\n\nconst MetadataContainer = styled.div`\n  width: 400px;\n  height: calc(100vh - 60px);\n  top: 60px;\n  right: 300px;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  position: fixed;\n  overflow: auto;\n`\nconst Title = styled.div`\n  font-size: 16px;\n  padding: 10px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n`\n\nconst Items = styled.div`\n  padding: 10px 15px;\n  border-bottom: 1px solid #aaa;\n  cursor: pointer;\n\n  p {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    margin: 0;\n  }\n\n  > div:nth-child(1) {\n    display: flex;\n    margin-bottom: 10px;\n\n    > p:nth-child(2) {\n      flex: auto;\n    }\n\n    > p:nth-child(3) {\n      min-width: 70px;\n      text-align: right;\n    }\n  }\n`\n\nexport type Type = 'text' | 'object'\n\nconst MetadataInput = (props: { metadata: Metadata, value: string, onChange:(value: string) => void, getData: (value: string | string[]) => any, type?: Type }) => {\n  const [focus, setFocus] = useState(false)\n  const [search, setSearch] = useState<{ value: string, items: MetadataItem[] }>({ value: '', items: [] })\n  const ref = useRef<TextAreaRef | null>(null)\n\n  const changeInput = (value: string) => {\n    if (props.type === 'object') {\n      return message.warn('请点击数据源进行输入')\n    }\n    props.onChange(value)\n  }\n\n  const changeSearch = (value: string) => {\n    const items = props.metadata.items.filter(it => it.path.includes(value) || it.alias?.includes(value))\n\n    setSearch({\n      value,\n      items\n    })\n  }\n\n  const onFocus = () => {\n    setFocus(true)\n  }\n\n  const entryMetadata = (item: MetadataItem) => {\n    if (props.type === 'object') {\n      return props.onChange(item.path)\n    }\n\n    const selectionStart = ref.current?.resizableTextArea?.textArea.selectionStart ?? 0\n    const val = `\\${${item.alias ? `${item.alias}[${item.id}]` : item.path}}`\n    if (selectionStart === 0) {\n      props.onChange(`${val}${props.value}`)\n      ref.current!.resizableTextArea!.textArea.selectionStart = 0\n    } else if (selectionStart === props.value.length) {\n      props.onChange(`${props.value}${val}`)\n    } else {\n      const before = props.value.substring(0, selectionStart)\n      const after = props.value.substring(selectionStart)\n      const start = /\\${[^}]+$/g.exec(before)\n      const end = /((?!\\${).)}/.exec(after)\n      // 判断光标是否处于${占面符中}，是则替换当前值\n      if (start && end) {\n        props.onChange(`${before.substring(0, start.index)}${val}${after.substring(end.index + 2)}`)\n      } else {\n        props.onChange(`${before}${val}${after}`)\n      }\n    }\n  }\n\n  return (\n    <Container>\n      <InputArea focus={focus}>\n        <Input.TextArea\n          ref={value => { ref.current = value }}\n          style={{ height: props.type === 'object' ? 60 : 150 }}\n          placeholder=\"请输入内容\" value={props.value}\n          onChange={(ev) => changeInput(ev.target.value)}\n          onFocus={onFocus}\n        />\n      </InputArea>\n      {focus && (\n        <Popover>\n          <Cover onClick={() => setFocus(false)}/>\n          <MetadataContainer>\n            <Title onClick={() => window.open(`/metadata/${props.metadata.id}`)}>\n              数据源\n              <EditTwoTone />\n            </Title>\n            <Input allowClear value={search.value} onChange={ev => changeSearch(ev.target.value)} placeholder=\"请输入搜索内容\" />\n            {(props.metadata.items.length === 0 || (search.value && search.items.length === 0)) && (<div>无内容</div>)}\n            {props.metadata.items.map((it, index) => (\n              <Items key={index} onClick={() => entryMetadata(it)}>\n                <div>\n                  <AntdPopover content={it.path} trigger=\"hover\" placement=\"left\">\n                    <p><Tag color=\"blue\">{it?.alias ?? it.path}</Tag></p>\n                  </AntdPopover>\n                  <p/>\n                  <p>\n                    {it.required && (<Tag color=\"cyan\">必填</Tag>)}\n                    {!it.required && (<Tag color=\"red\">选填</Tag>)}\n                  </p>\n                </div>\n                <div>\n                  <p>{props.getData(`\\${${it.path}}`)}</p>\n                </div>\n              </Items>\n            ))}\n          </MetadataContainer>\n        </Popover>\n      )}\n    </Container>\n  )\n}\n\nexport default MetadataInput\n","import React, { CSSProperties } from 'react'\nimport { ContentDefinition } from './types'\nimport { Metadata } from '../types'\nimport MetadataInput from './components/metadata-input'\n\nconst Text: ContentDefinition<string, string> = {\n  key: 'Text',\n  defaultValue: '',\n  styles: [],\n  description: '单独的文本.用于医院标题,提示信息等内容',\n  title: '文本',\n  Blueprint (props: { value: string; onChange: (value: string) => void, metadata: Metadata, getData: (value: string | string[]) => any }) {\n    return (\n      <MetadataInput {...props} />\n    )\n  },\n  Render (props: { result?: string; style: CSSProperties}) {\n    if (!props.result) {\n      // 不显示，用于通过编译\n      return (<span style={{ display: 'none' }} />)\n    }\n\n    const direction = props.style.flexDirection\n    // 判断换行符进行方法切换， 如无换行符且方向为 column 进行单字符换行\n    const lines = props.result.split('\\n').filter(it => it)\n    if (direction === 'column') {\n      return (\n        <div style={props.style}>{\n          (lines.length > 1 ? lines : Array.from(props.result)).map((it, index) => { return (<div key={index}>{it}</div>) })\n        }</div>\n      )\n    }\n    return (\n      <div style={props.style}>\n        <div>\n          {lines.map((it, index) => (<span key={index}>{it}<br/></span>))}\n        </div>\n      </div>\n    )\n  },\n  Building (props: { value: string, result?: string; style:CSSProperties; onChangeActive: () => void }) {\n    if (!props.result) {\n      return (<div>{props.value}</div>)\n    }\n    const direction = props.style.flexDirection\n    // 判断换行符进行方法切换， 如无换行符且方向为 column 进行单字符换行\n    const lines = props.result.split('\\n').filter(it => it)\n    if (direction === 'column') {\n      return (\n        <div style={props.style} onClick={() => props.onChangeActive()}>{\n          (lines.length > 1 ? lines : Array.from(props.result)).map((it, index) => { return (<div key={index}>{it}</div>) })\n        }</div>\n      )\n    }\n    return (\n      <div style={props.style} onClick={() => props.onChangeActive()}>\n        <div>\n          {lines.map((it, index) => (<span key={index}>{it}<br/></span>))}\n        </div>\n      </div>\n    )\n  }\n}\nexport default Text\n","export enum DroppableIds {\n  Building = 'Building',\n  Material = 'Material',\n}\n\nexport enum MaterialType {\n  Layout = 'layout',\n  Content = 'content',\n}\n","import React, { ReactNode } from 'react'\nimport styled from 'styled-components'\nimport { useNavigate } from 'react-router-dom'\nimport logo from '../asserts/images/logo.png'\n\nconst Container = styled.div`\n  width: 100%;\n  height: 62px;\n  border-bottom: 1px solid #ebe0e0;\n  display: flex;\n  justify-content: center;\n`\nconst Nav = styled.div<{isFull: boolean}>`\n  width: ${props => props.isFull ? '100%' : '1230px'};\n  padding: ${props => props.isFull ? '0 30px' : '0'};\n  display: flex;\n  align-items: center;\n\n  > div:nth-child(1) {\n    display: flex;\n    cursor: pointer;\n\n    > p {\n      font-size: 28px;\n      color: chocolate;\n      margin-bottom: 0;\n      margin-left: 10px;\n    }\n  }\n`\nconst Logo = styled.img.attrs(() => ({ src: logo }))`\n  width: 60px;\n`\n\nconst Header = (props: { className?: string, isFull?: boolean, children?: ReactNode }) => {\n  const navigate = useNavigate()\n\n  return (\n    <Container className={props.className} >\n      <Nav isFull={props?.isFull ?? true }>\n        <div onClick={() => navigate('/')}>\n          <Logo/>\n          <p>\n            报告编辑器\n          </p>\n        </div>\n        {props.children}\n      </Nav>\n    </Container>\n  )\n}\n\nexport default Header\n","export default \"data:image/png;base64,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\"","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport { Outlet, useLocation, useNavigate } from 'react-router-dom'\nimport Header from '../components/Header'\n\nconst Container = styled.div`\n  width: 100vw;\n  height: 100vh;\n`\n\nconst Content = styled.div`\n  width: 1230px;\n  margin: 0 auto;\n  display: flex;\n  min-height: 90%;\n  padding-top: 30px;\n`\n\nconst Aside = styled.aside`\n  width: 300px;\n  margin-right: 30px;\n  border-radius: 6px;\n`\n\nconst Article = styled.article`\n  width: 900px;\n  border: 1px solid #ebe0e0;\n  border-radius: 6px;\n`\n\nconst Menu = styled.div<{index: number, isActive: boolean}>`\n  font-size: 23px;\n  color: chocolate;\n  border-bottom: 1px solid #ebe0e0;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: ${props => (props.index + 2) * 18}px;\n  background-color: ${props => props.isActive ? 'peachpuff' : '#f3f3f3'};\n`\nconst Description = styled.div`\n  display: flex;\n  height: 54px;\n  background-color: peachpuff;\n  color: chocolate;\n  font-size: 20px;\n  align-items: center;\n  padding-left: 30px;\n`\n\nconst MENUS = [\n  {\n    title: '1. 数据编辑',\n    url: '/metadata',\n    description: '配置你的数据格式,为打印时的动态数据作准备'\n  },\n  {\n    title: '2. 模板编辑',\n    url: '/template',\n    description: '结合已保存的数据开始编辑模板'\n  },\n  {\n    title: '3. 打印预览',\n    url: '/preview',\n    description: '已完成数据和模板编辑，开始进行预览和打印'\n  },\n  {\n    title: ' 说明文档',\n    url: 'https://github.com/ansoxlu/report-editor'\n  }\n]\n\nconst Home = () => {\n  const navigate = useNavigate()\n  const location = useLocation()\n  const menu = MENUS.find(it => it.url === location.pathname)\n\n  useEffect(() => {\n    if (!menu) {\n      navigate(MENUS[0].url)\n    }\n  })\n\n  if (!menu) {\n    return null\n  }\n\n  return (\n    <Container>\n      <Header/>\n      <Content>\n        <Aside>\n          {MENUS.map((it, index) => (\n            <a href={it.url} key={index}>\n              <Menu index={index} isActive={it.url === menu.url}>{it.title}</Menu>\n            </a>\n          ))}\n        </Aside>\n        <Article>\n          <Description>\n            {menu.description}\n          </Description>\n          <Outlet/>\n        </Article>\n      </Content>\n    </Container>\n  )\n}\n\nexport default Home\n","import React from 'react'\r\nimport { Result, Button } from 'antd'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Header from '../components/Header'\r\n\r\nconst Error404 = () => {\r\n  const navigate = useNavigate()\r\n  return (\r\n    <div>\r\n      <Header/>\r\n      <Result\r\n        status=\"404\"\r\n        title=\"404\"\r\n        subTitle=\"没有找到内容\"\r\n        extra={<Button type=\"primary\" onClick={() => navigate('/')}>返回首页</Button>}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Error404\r\n","export const DATE = 'YYYY-MM-DD'\nexport const TIME = 'hh:mm:ss'\nexport const DATE_TIME = `${DATE} ${TIME}`\n","import { Metadata, Template } from '../definition/types'\n\nexport const METATABLES: Metadata[] = [\n  {\n    id: 'example',\n    title: '项目简介',\n    description: '暂无说明',\n    createdAt: '2022-01-01 01:02:03',\n    updatedAt: '2022-02-12 10:10:30',\n    items: [{ id: 1, path: 'author', required: true }, { id: 2, path: 'components[]', required: true }, { id: 3, path: 'description[]', required: true }, { id: 4, path: 'github', required: true }, { id: 5, path: 'status', required: true }, { id: 6, path: 'title', required: true }],\n    json: '{\"title\":\"报告编辑器\",\"author\":\"ansoxlu\",\"github\":\"https://github.com/ansoxlu/report-editor\",\"status\":\"开发中\",\"description\":[\"该项目以动态数据生成PDF报告文件为目标\",\"允许A4/A5等标准或自定义纸张格式\",\"允许自动分页/固定分页/页头页尾\"],\"components\":[\"1.文本\",\"2. 图片(待完成)\",\"3. 一维码(待完成)\",\"4. 二维码(待完成)\",\"5. 表格(待完成)\",\"6. 自定义表格(隐藏属性)(待完成)\"]}'\n  }\n]\n\nexport const TEMPLATES: Template[] = [\n  {\n    id: 'example',\n    title: '项目简介',\n    description: '暂无说明',\n    createdAt: '2022-01-01 01:02:03',\n    updatedAt: '2022-01-01 01:02:03',\n    metadataId: 'example',\n    // eslint-disable-next-line no-template-curly-in-string\n    json: '{\"footer\":-1,\"header\":-1,\"width\":210,\"height\":297,\"listIndexes\":[],\"pageIndexes\":[],\"styles\":[{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"Color\",\"value\":\"#000\"}],\"layouts\":[{\"contents\":[{\"value\":\"${title}\",\"id\":\"7d5355d7-3557-4f93-a7c5-1c43c23c0811\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"center\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":28},{\"definition\":\"FontWeight\",\"value\":800},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":10},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":20,\"left\":0,\"right\":0,\"top\":30}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":3,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"d22c618e-731b-4491-93c7-3c39e24e4e8e\",\"definition\":\"Text\"}],\"id\":\"d22c618e-731b-4491-93c7-3c39e24e4e8e\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"作者： ${author}\",\"id\":\"a20f698f-7505-4ba9-b2b3-220f7e2dc3d3\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":50,\"right\":0,\"top\":20}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"44b12a83-452a-4b72-a1b7-e00ce6dac700\",\"definition\":\"Text\"}],\"id\":\"44b12a83-452a-4b72-a1b7-e00ce6dac700\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"状态：${status}\",\"id\":\"1294eaa1-254b-4e79-a6ce-fca2a3ad0502\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":50,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"dd1772ec-8e51-4b3b-954c-2a30beef3945\",\"definition\":\"Text\"}],\"id\":\"dd1772ec-8e51-4b3b-954c-2a30beef3945\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"地址：${github}\",\"id\":\"0c451498-d2a7-4e21-b10b-654c7dadd494\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":30,\"left\":50,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"28cd69a5-c2e7-4190-9def-0ed2bc2871ab\",\"definition\":\"Text\"}],\"id\":\"28cd69a5-c2e7-4190-9def-0ed2bc2871ab\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"说明：\",\"id\":\"3ef45054-252a-43b2-9a91-b5fa61e39655\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-end\"},{\"definition\":\"AlignItems\",\"value\":\"flex-start\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":100,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"617c209b-58ee-4e29-b274-81659a63a620\",\"definition\":\"Text\"},{\"value\":\"${description[]}\",\"id\":\"9ac80ad3-a2e2-4467-b6db-3648980d319b\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"617c209b-58ee-4e29-b274-81659a63a620\",\"definition\":\"Text\"}],\"id\":\"617c209b-58ee-4e29-b274-81659a63a620\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"组件：\",\"id\":\"3e2953a8-480d-4e71-80e3-d3a025bf6eee\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-end\"},{\"definition\":\"AlignItems\",\"value\":\"flex-start\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":100,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"d7eaccbd-0c72-411a-afa4-286a0a5d951f\",\"definition\":\"Text\"},{\"value\":\"${components[]}\",\"id\":\"419e6600-09b8-42b5-92f3-cd9d8aa21e11\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"d7eaccbd-0c72-411a-afa4-286a0a5d951f\",\"definition\":\"Text\"}],\"id\":\"d7eaccbd-0c72-411a-afa4-286a0a5d951f\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":30}}],\"definition\":\"Many\"}]}'\n  }]\n","import React, { useState } from 'react'\nimport { Button, Input, message, Select } from 'antd'\nimport styled from 'styled-components'\nimport { Metadata } from '../definition/types'\nimport moment from 'moment'\nimport { v4 as uuid4 } from 'uuid'\nimport { DATE_TIME } from '../plugins/moment'\nimport { METATABLES } from '../plugins/database'\nimport useLocalStorage from 'react-use-localstorage'\nimport { useNavigate } from 'react-router-dom'\n\nconst Container = styled.div`\n  padding: 15px 30px;\n`\n\nconst Items = styled.div`\n  padding: 15px 8px;\n  border-bottom: 1px solid #ebe0e0;\n\n  > div:first-child {\n    display: flex;\n    flex: auto;\n    margin-bottom: 8px;\n    align-items: center;\n\n    > div:nth-child(1) {\n      font-size: 16px;\n    }\n\n    > div:nth-child(2) {\n      flex: auto;\n    }\n\n    > div:nth-child(3) {\n      padding-right: 25px;\n    }\n  }\n\n  > div:last-child {\n    display: flex;\n    color: #bfbfbf;\n\n    > div:nth-child(2) {\n      flex: auto;\n    }\n  }\n`\n\nconst EditContainer = styled.div`\n  padding: 15px 10px;\n  border-bottom: 1px solid #ebe0e0;\n`\n\nconst EditHeader = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n\n  > input {\n    width: auto;\n    flex: auto;\n  }\n  > button {\n    margin-left: 15px;\n  }\n`\n\nconst EditDescription = styled.div`\n  display: flex;\n\n  > p {\n    padding-left: 10px;\n    width: 94px;\n  }\n  > textarea {\n    width: auto;\n    flex: 1;\n  }\n`\n\nconst Index = () => {\n  const navigate = useNavigate()\n  const [metatables, setMetatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\n\n  const [editId, setEditId] = useState<string | undefined>()\n\n  const EditItem = (props: { value?: undefined | Metadata, onOk: (value: Metadata) => void, onCancel?: () => void }) => {\n    const [value, setValue] = useState<Metadata>(props.value || {\n      id: uuid4(),\n      title: '',\n      description: '',\n      createdAt: '',\n      json: '{}',\n      items: [],\n      updatedAt: ''\n    })\n\n    const handleSave = () => {\n      if (!value.title) {\n        return message.error('请输入标题')\n      }\n      const now = moment().format(DATE_TIME)\n      props.onOk({\n        ...value,\n        createdAt: value.createdAt || now,\n        updatedAt: now\n      })\n    }\n\n    const handleSelectMetadata = (id: string) => {\n      const metadata = JSON.parse(metatables).find((it: Metadata) => it.id === id)\n      if (metadata) {\n        setValue({\n          ...value,\n          items: metadata.items,\n          json: metadata.json\n        })\n      } else {\n        setValue({\n          ...value,\n          items: [],\n          json: '{}'\n        })\n      }\n    }\n\n    return (\n      <EditContainer>\n        <EditHeader>\n          <div>* 请输入标题：</div>\n          <Input value={value.title} placeholder=\"请输入标题\" onChange={ev => setValue({ ...value, title: ev.target.value })}/>\n          {!props.value && metatables.length && (\n            <Select placeholder=\"复制已有数据格式\" allowClear style={{ width: 170 }} onChange={handleSelectMetadata}>\n              {JSON.parse(metatables).map((it: Metadata) => (<Select.Option key={it.id} value={it.id}>{it.title}</Select.Option>))}\n            </Select>\n          )}\n          <Button type=\"primary\" onClick={() => handleSave()}>{ value.createdAt ? '确定保存' : '确定新增' }</Button>\n          {props.value && (<Button type=\"primary\" onClick={() => props.onCancel && props.onCancel()}>取消修改</Button>)}\n        </EditHeader>\n        <EditDescription>\n          <p>请输入说明:</p>\n          <Input.TextArea value={value.description} onChange={ev => setValue({ ...value, description: ev.target.value })} autoSize={{ minRows: 2, maxRows: 6 }} placeholder=\"请输入说明\"/>\n        </EditDescription>\n      </EditContainer>\n    )\n  }\n\n  const handleSave = (value: Metadata) => {\n    const list = JSON.parse(metatables) as Metadata[]\n    const index = list.findIndex(it => it.id === value.id)\n    if (index !== -1) {\n      list.splice(index, 1, value)\n    } else {\n      list.push(value)\n    }\n    setMetatables(JSON.stringify(list))\n    setEditId(undefined)\n  }\n\n  return (\n    <Container>\n      <EditItem onOk={value => handleSave(value)}/>\n\n      { (JSON.parse(metatables) as Metadata[]).map(it => it.id === editId\n        ? (<EditItem key={it.id} value={it} onOk={value => handleSave(value)} onCancel={() => { setEditId(undefined) }}/>)\n        : (\n          <Items key={it.id}>\n            <div>\n              <div>{it.title}</div>\n              <div/>\n              <div>{it.updatedAt}</div>\n              <div><Button type=\"primary\" onClick={() => setEditId(it.id)}>信息编辑</Button></div>\n            </div>\n            <div>\n              <div>{it.description}</div>\n              <div/>\n              <div><Button type=\"primary\" onClick={() => navigate(`/metadata/${it.id}`)}>数据定义</Button></div>\n            </div>\n          </Items>\n          )\n      )}\n    </Container>\n  )\n}\n\nexport default Index\n","import React from 'react'\nimport JSONInput from 'react-json-editor-ajrm'\nimport locale from 'react-json-editor-ajrm/locale/zh-cn'\nimport styled from 'styled-components'\nimport { message } from 'antd'\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  color: #000\n`\n\nconst JsonInput = (props: { value: object, onChange: (value: object, json: string) => void }) => {\n  const handleChange = (result: any) => {\n    if (!result.error) {\n      if (!result.json) {\n        return props.onChange({}, '{}')\n      }\n      if (Array.isArray(result.jsObject)) {\n        return message.error('数据不是JSON对象')\n      }\n      props.onChange(result.jsObject, result.json)\n    }\n  }\n\n  return (\n    <Container>\n      <JSONInput\n        id = 'json-editor'\n        placeholder={props.value}\n        onChange={(result: any) => handleChange(result)}\n        colors = { {\n          default: '#000',\n          background: '#FCFDFD',\n          background_warning: '#000',\n          string: '#FA7921',\n          number: '#70CE35',\n          colon: '#49B8F7',\n          keys: '#59A5D8',\n          keys_whiteSpace: '#835FB6',\n          primitive: '#386FA4',\n          error: '#e30b0b'\n        } as any}\n        locale = { locale }\n        width = '100%'\n        height = '100%'\n      />\n    </Container>\n  )\n}\n\nexport default JsonInput\n","import React, { useEffect, useState } from 'react'\nimport { Metadata, MetadataItem } from '../../definition/types'\nimport styled from 'styled-components'\nimport { Button, Switch, Input, Tag, Table, message } from 'antd'\nimport { sortBy, maxBy } from 'lodash'\nimport moment from 'moment'\nimport { DATE_TIME } from '../../plugins/moment'\nimport { useNavigate } from 'react-router-dom'\n\nconst Container = styled.div`\n`\n\nconst Header = styled.div`\n  padding: 15px 30px;\n  border-bottom: 2px solid #eee;\n  background-color: #f7f7f7;\n\n  > div:nth-child(1) {\n    display: flex;\n    height: 32px;\n\n    > div:nth-child(1) {\n      font-size: 18px;\n    }\n    > div:nth-child(2) {\n      flex: auto;\n    }\n    > div:last-child {\n      margin-left: 10px;\n    }\n  }\n\n  > div:nth-child(2) {\n    color: #bfbfbf;\n  }\n`\n\nconst Content = styled.div`\n  padding: 15px 30px;\n`\n\ntype Status = 'add' | 'delete' | 'update' | 'normal'\n\nconst STATUS = {\n  add: {\n    color: '#87d068',\n    title: '添加'\n  },\n  delete: {\n    color: '#f50',\n    title: '删除'\n  },\n  update: {\n    color: '#2db7f5',\n    title: '修改'\n  },\n  normal: {\n    color: undefined,\n    title: '无'\n  }\n}\n\ninterface ItemEdit {\n  id?: number\n  path: string\n  alias?: string\n  status: Status\n  required: boolean\n}\n\nconst Overview = (props: { value: Metadata, onChange: (value: Metadata) => void, json: object }) => {\n  const navigate = useNavigate()\n  const [items, setItems] = useState<ItemEdit[]>([])\n\n  useEffect(() => {\n    const result: Record<string, boolean> = {}\n    // 属性检查\n    const precess = (key: string, value: any) => {\n      if (value === undefined || value === null) {\n        result[key] = false\n      } else if (['string', 'number', 'boolean'].includes(typeof value)) {\n        if (result[key] === undefined) {\n          result[key] = true\n        }\n      } else if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result[`${key}[]`] = false\n        } else if (!value[0] || typeof value[0] !== 'object') {\n          result[`${key}[]`] = true\n        } else {\n          for (const it of value) {\n            for (const itKey in it) {\n              const val = it[itKey]\n              if (val === undefined || val === null) {\n                result[`${key}[].${itKey}`] = false\n              } else if (['string', 'number', 'boolean'].includes(typeof value)) {\n                if (result[key] === undefined) {\n                  result[key] = true\n                }\n              }\n            }\n          }\n        }\n      } else {\n        for (const nextKey in value) {\n          if (Object.prototype.hasOwnProperty.call(value, nextKey)) {\n            precess(`${key}${key ? '.' : ''}${nextKey}`, value[nextKey])\n          }\n        }\n      }\n    }\n    precess('', props.json)\n    const list: ItemEdit[] = props.value.items.map(it => ({\n      id: it.id,\n      path: it.path,\n      alias: it.alias,\n      status: result[it.path] === undefined ? 'delete' : 'normal',\n      required: it.required\n    }))\n\n    for (const key in result) {\n      const it = list.find(it => it.path === key)\n      if (!it) {\n        list.push({\n          path: key,\n          status: 'add',\n          required: result[key]\n        })\n      }\n    }\n    setItems(sortBy(list, 'path'))\n  }, [props.json, props.value.items])\n\n  const handleSave = () => {\n    if (items.length === 0) {\n      message.error('请输出JSON进行编辑')\n      return\n    }\n\n    let lastId: number = maxBy(items, it => it?.id ?? 0)?.id || 0\n    const result: MetadataItem[] = items\n      .filter(it => it.status !== 'delete')\n      .map(it => {\n        if (!it.id) {\n          lastId++\n        }\n        return {\n          id: lastId,\n          path: it.path,\n          alias: it.alias,\n          required: it.required\n        }\n      })\n    props.onChange({\n      ...props.value,\n      items: result,\n      updatedAt: moment().format(DATE_TIME),\n      json: JSON.stringify(props.json)\n    })\n    message.success('保存成功')\n  }\n\n  const handleChange = (item: ItemEdit) => {\n    const index = items.findIndex(it => it.path === item.path)\n    const it = props.value.items[index]!\n    if ((item.status !== 'add')) {\n      if (item.required !== it.required || item.alias !== it.alias) {\n        item.status = 'update'\n      } else {\n        item.status = 'normal'\n      }\n    }\n    items.splice(index, 1, item)\n    setItems([...items])\n  }\n\n  return (\n    <Container>\n      <Header>\n        <div>\n          <div>{props.value.title}</div>\n          <div />\n          <div>\n            <Button type=\"primary\" onClick={() => navigate('/metadata')}>返回</Button>\n          </div>\n          <div>\n            {items.find(it => it.status !== 'normal') && (<Button type=\"primary\" onClick={handleSave}>保存</Button>)}\n          </div>\n        </div>\n        <div>\n          {props.value.description}\n        </div>\n      </Header>\n      <Content>\n        <Table dataSource={items} pagination={false} rowKey=\"path\">\n          <Table.Column title=\"路径\" dataIndex=\"path\"/>\n          <Table.Column title=\"别名\" dataIndex=\"alias\" align=\"center\" render={(alias, it:ItemEdit) => (\n            <Input value={alias} onChange={ev => handleChange({ ...it, alias: ev.target.value || undefined })} />\n          )} />\n          <Table.Column title=\"是否必需\" dataIndex=\"required\" align=\"center\" render={(required, it: ItemEdit) => (\n            <Switch checked={required} checkedChildren=\"是\" unCheckedChildren=\"否\" onChange={required => handleChange({ ...it, required })} />\n          )} />\n          <Table.Column title=\"状态变更\" dataIndex=\"status\" align=\"center\" render={(status: Status) => (\n            <Tag color={STATUS[status].color}>{STATUS[status].title}</Tag>\n          )} />\n        </Table>\n      </Content>\n    </Container>\n  )\n}\n\nexport default Overview\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport JsonInput from './json-input'\nimport { METATABLES } from '../../plugins/database'\nimport useLocalStorage from 'react-use-localstorage'\nimport { Metadata } from '../../definition/types'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport Overview from './overview'\nimport { message } from 'antd'\nimport Header from '../../components/Header'\n\nconst Container = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  > div:nth-child(2) {\n    display: flex;\n    flex: auto;\n\n    @media (max-width: 1000px) {\n      flex-direction: column;\n    }\n  }\n`\n\nconst HeaderContainer = styled(Header)`\n  > div {\n    width: 100%;\n    padding: 0 30px;\n  }\n`\n\nconst Left = styled.div`\n  width: 45%;\n  border-right: 1px solid #eee;\n  @media (max-width: 900px) {\n    width: 100%;\n  }\n`\n\nconst Right = styled.div`\n  width: 55%;\n  border-left: 1px solid #eee;\n  @media (max-width: 900px) {\n    width: 100%;\n  }\n`\n\nconst index = () => {\n  const navigate = useNavigate()\n  const { id } = useParams()\n  const [metatables, setMetatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\n\n  const list = JSON.parse(metatables) as Metadata[]\n  const target = list.find(it => it.id === id)\n  if (!target) {\n    message.error('编辑内容已被删除')\n    navigate('/metadata')\n    return null\n  }\n  const [metadata, setMetadata] = useState(target)\n\n  const [editCache, setEditCache] = useLocalStorage(`RE-editMetadata-${metadata.id}`)\n\n  const [json, setJson] = useState<object>(JSON.parse(editCache || metadata.json))\n\n  const handleSave = (metadata: Metadata) => {\n    setMetadata(metadata)\n    const list = JSON.parse(metatables) as Metadata[]\n    const index = list.findIndex(it => it.id === metadata.id)\n    list.splice(index, 1, metadata)\n    setMetatables(JSON.stringify(list))\n    setEditCache('')\n  }\n\n  const handleJsonChange = (value: object, json: string) => {\n    setJson(value)\n    setEditCache(json)\n  }\n\n  return (\n    <Container>\n      <HeaderContainer/>\n      <div>\n        <Left>\n          <Overview value={metadata} json={json} onChange={handleSave} />\n        </Left>\n        <Right>\n          <JsonInput value={ json } onChange={handleJsonChange} />\n        </Right>\n      </div>\n    </Container>\n  )\n}\n\nexport default index\n","import React, { useState } from 'react'\nimport { Button, Input, message, Select, Result } from 'antd'\nimport styled from 'styled-components'\nimport { Metadata, PageSerialize, Template } from '../definition/types'\nimport moment from 'moment'\nimport { v4 as uuid4 } from 'uuid'\nimport { DATE_TIME } from '../plugins/moment'\nimport { METATABLES, TEMPLATES } from '../plugins/database'\nimport useLocalStorage from 'react-use-localstorage'\nimport { useNavigate } from 'react-router-dom'\n\nconst Container = styled.div`\n  padding: 15px 30px;\n`\n\nconst Items = styled.div`\n  padding: 15px 8px;\n  border-bottom: 1px solid #ebe0e0;\n\n  > div:first-child {\n    display: flex;\n    flex: auto;\n    margin-bottom: 8px;\n    align-items: center;\n\n    > div:nth-child(1) {\n      font-size: 16px;\n    }\n\n    > div:nth-child(2) {\n      flex: auto;\n    }\n\n    > div:nth-child(3) {\n      padding-right: 25px;\n    }\n  }\n\n  > div:last-child {\n    display: flex;\n    color: #bfbfbf;\n\n    > div:nth-child(2) {\n      flex: auto;\n    }\n\n    > div:last-child {\n      margin-left: 25px;\n    }\n  }\n`\n\nconst EditContainer = styled.div`\n  padding: 15px 10px;\n  border-bottom: 1px solid #ebe0e0;\n`\n\nconst EditHeader = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n\n  > input {\n    width: auto;\n    flex: auto;\n  }\n  > button {\n    margin-left: 15px;\n  }\n`\n\nconst EditDescription = styled.div`\n  display: flex;\n\n  > p {\n    padding-left: 10px;\n    width: 94px;\n  }\n  > textarea {\n    width: auto;\n    flex: 1;\n  }\n`\n\nconst Index = () => {\n  const navigate = useNavigate()\n  const [metatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\n  const [templates, setTemplates] = useLocalStorage('RE-templates', JSON.stringify(TEMPLATES))\n\n  const [editId, setEditId] = useState<string | undefined>()\n\n  const EditItem = (props: { value?: undefined | Template, onOk: (value: Template) => void, onCancel?: () => void }) => {\n    const [value, setValue] = useState<Template>(props.value || {\n      id: uuid4(),\n      title: '',\n      description: '',\n      createdAt: '',\n      metadataId: '',\n      updatedAt: '',\n      json: ''\n    })\n\n    const handleSave = () => {\n      if (!value.title) {\n        return message.error('请输入标题')\n      }\n      if (!value.metadataId) {\n        return message.error('请选择数据来源')\n      }\n      const now = moment().format(DATE_TIME)\n      props.onOk({\n        ...value,\n        createdAt: value.createdAt || now,\n        updatedAt: now\n      })\n    }\n\n    const handleSelectMetadata = (id: string) => {\n      setValue({\n        ...value,\n        metadataId: id\n      })\n    }\n\n    const handleSelectTemplate = (id: string) => {\n      const template = JSON.parse(templates).find((it: Template) => it.id === id)\n      setValue({\n        ...value,\n        metadataId: template?.metadataId ?? (value.metadataId || '')\n      })\n    }\n\n    return (\n      <EditContainer>\n        <EditHeader>\n          <div>* 请输入标题：</div>\n          <Input value={value.title} placeholder=\"请输入标题\" onChange={ev => setValue({ ...value, title: ev.target.value })}/>\n          {!props.value && metatables.length && (\n            <Select placeholder=\"请选择数据源\" style={{ width: 170 }} value={value.metadataId || undefined} onChange={handleSelectMetadata}>\n              {JSON.parse(metatables).map((it: Metadata) => (<Select.Option key={it.id} value={it.id}>{it.title}</Select.Option>))}\n            </Select>\n          )}\n          {!props.value && metatables.length && (\n            <Select placeholder=\"复制已有模板\" style={{ width: 170 }} allowClear onChange={handleSelectTemplate}>\n              {JSON.parse(templates).map((it: Template) => (<Select.Option key={it.id} value={it.id}>{it.title}</Select.Option>))}\n            </Select>\n          )}\n          <Button type=\"primary\" onClick={() => handleSave()}>{ value.createdAt ? '确定保存' : '确定新增' }</Button>\n          {props.value && (<Button type=\"primary\" onClick={() => props.onCancel && props.onCancel()}>取消修改</Button>)}\n        </EditHeader>\n        <EditDescription>\n          <p>请输入说明:</p>\n          <Input.TextArea value={value.description} onChange={ev => setValue({ ...value, description: ev.target.value })} autoSize={{ minRows: 2, maxRows: 6 }} placeholder=\"请输入说明\"/>\n        </EditDescription>\n      </EditContainer>\n    )\n  }\n\n  const handleSave = (value: Template) => {\n    const list = JSON.parse(metatables) as Template[]\n    const index = list.findIndex(it => it.id === value.id)\n    if (index !== -1) {\n      list.splice(index, 1, value)\n    } else {\n      list.push(value)\n    }\n    setTemplates(JSON.stringify(list))\n    setEditId(undefined)\n  }\n\n  return (\n    <Container>\n      {!metatables.length && (\n        <Result\n          status=\"warning\"\n          title=\"请先创建一份数据源,再进行模板编辑!\"\n          extra={\n            <Button type=\"primary\" onClick={() => navigate('/metadata')}>\n              数据编辑\n            </Button>\n          }\n        />\n      )}\n      {metatables.length && (<EditItem onOk={value => handleSave(value)}/>)}\n\n      { metatables.length && JSON.parse(templates).map((it: Template) => it.id === editId\n        ? (<EditItem key={it.id} value={it} onOk={value => handleSave(value)} onCancel={() => { setEditId(undefined) }}/>)\n        : (\n          <Items key={it.id}>\n            <div>\n            <div>{it.title}</div>\n            <div/>\n            <div>{it.updatedAt}</div>\n            <div><Button type=\"primary\" onClick={() => setEditId(it.id)}>信息编辑</Button></div>\n            </div>\n            <div>\n            <div>{it.description}</div>\n            <div/>\n            <div><Button disabled={!it.json || (JSON.parse(it.json) as PageSerialize).layouts.length === 0} type=\"primary\" onClick={() => navigate(`/preview/${it.id}`)}>打印预览</Button></div>\n            <div><Button type=\"primary\" onClick={() => navigate(`/template/${it.id}`)}>模板定义</Button></div>\n            </div>\n          </Items>\n          )\n      )}\n    </Container>\n  )\n}\n\nexport default Index\n","import React, { useState, useEffect } from 'react'\nimport { Draggable, Droppable } from 'react-beautiful-dnd'\nimport styled from 'styled-components'\nimport { DroppableIds } from '../types'\nimport { CONTENT_DEFINITIONS, PAPER_SIZES } from '../../../definition'\nimport { Select, Button, message, InputNumber, Popconfirm } from 'antd'\nimport { SyncOutlined } from '@ant-design/icons'\nimport JustifyContent from '../../../definition/styles/justify-content'\nimport { Page, Template } from '../../../definition/types'\nimport { useNavigate } from 'react-router-dom'\n\nconst Container = styled.aside`\n  width: 250px;\n  color: #333;\n  padding-top: 12px;\n`\n\nconst Groups = styled.div`\n  border-bottom: 1px solid #aaa;\n  padding: 10px 15px;\n  display: flex;\n  align-items: center;\n`\n\nconst Title = styled.div`\n`\n\nconst Subject = styled.div`\n  padding-right: 20px;\n  display: flex;\n  height: 40px;\n  align-items: center;\n  width: 60px;\n`\n\nconst Items = styled.ul`\n  padding: 10px 12px;\n  font-size: 12px;\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n`\n\nconst Item = styled.li<{isDragging?: boolean}>`\n  display: flex;\n  height: 30px;\n  width: 170px;\n  align-items: center;\n  justify-content: center;\n  background: #f3f3f3;\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\n  user-select: none;\n  margin-bottom: 8px;\n\n`\n\nconst Clone = styled(Item)`\n  + div {\n      display: none !important;\n  }\n`\n\nfunction Material (props: {\n  value: Page\n  onChange: (value: Page) => void\n  updating: boolean,\n  template: Template\n  onSave: (back: boolean) => void\n  onCancel: () => void\n}) {\n  const navigate = useNavigate()\n\n  const PageStyle = (props: { value: Page, onChange: (value: Page) => void }) => {\n    const [value, setValue] = useState<{width: number, height: number, title: string}>({ width: props.value.width, height: props.value.height, title: '' })\n\n    // upset value.title\n    useEffect(() => {\n      const sizes = PAPER_SIZES.find(it => (it.width === value.width && it.height === value.height) || (it.width === value.height && it.height === value.width))\n      setValue({\n        ...value,\n        title: sizes?.title ?? '自定义'\n      })\n    }, [props.value.width, props.value.height, value.width, value.height])\n\n    const handleChangeDirection = () => {\n      if (!value.height) {\n        message.error('方向切换失败,宽需要不能为0(无限)')\n        return\n      }\n      props.onChange({\n        ...props.value,\n        width: value.height,\n        height: value.width\n      })\n    }\n\n    const changeStyle = (key: string, value: any) => {\n      const index = props.value.styles.findIndex(it => it.definition.key === key)\n      const style = props.value.styles[index]\n      style.value = value\n      props.value.styles.splice(index, 1, style)\n      props.onChange({ ...props.value })\n    }\n\n    const changeHeight = (height: number) => {\n      setValue({ ...value, height })\n      props.onChange({ ...props.value, height: height })\n    }\n\n    const changeWidth = (width: number) => {\n      setValue({ ...value, width })\n      if (!width) {\n        message.error('宽需要不能为0(无限)')\n        return\n      }\n      props.onChange({ ...props.value, width: width })\n    }\n\n    const handleSizeChange = (key: string) => {\n      const sizes = PAPER_SIZES.find(it => it.title === key)\n      if (sizes) {\n        props.onChange({\n          ...props.value,\n          width: sizes.width,\n          height: sizes.height\n        })\n      }\n    }\n\n    return (\n      <div>\n        <Groups>\n          <Subject>尺寸</Subject>\n          <Select value={value.title} style={{ width: 112 }} onChange={handleSizeChange}>\n            <Select.Option value={''}>自定义</Select.Option>\n            {PAPER_SIZES.map((it, index) => (<Select.Option key={index} value={it.title}>{it.title}</Select.Option>))}\n          </Select>\n          <Button type=\"primary\" onClick={handleChangeDirection}><SyncOutlined/></Button>\n        </Groups>\n        <Groups>\n          <Subject>宽度</Subject>\n          <InputNumber value={value.width} min={0} max={999} style={{ width: 165 }} addonAfter=\"毫米\" onChange={changeWidth} onBlur={() => changeWidth(value.width || props.value.width)}/>\n        </Groups>\n        <Groups>\n          <Subject>高度</Subject>\n          <InputNumber value={value.height} min={0} max={999} style={{ width: 165 }} addonAfter=\"毫米\" onChange={changeHeight} />\n        </Groups>\n        {props.value.styles.map((it, index) => (\n          <Groups key={index}>\n            <Subject>{it.definition.key === JustifyContent.key ? '竖向排列' : it.definition.title}</Subject>\n            <it.definition.Blueprint value={it.value} onChange={value => changeStyle(it.definition.key, value)}/>\n          </Groups>\n        ))}\n      </div>\n    )\n  }\n\n  return (\n    <Droppable droppableId={DroppableIds.Material} isDropDisabled={true} >\n      {(provided) => (\n        <Container ref={provided.innerRef}>\n          <Groups>\n            <Title>{props.template.title}</Title>\n            <div style={{ flex: 'auto' }}/>\n            {props.updating && (\n              <Popconfirm\n                placement=\"topRight\"\n                title=\"是否保存后返回？\"\n                okText=\"是\"\n                cancelText=\"否\"\n                onConfirm={() => props.onSave(true)}\n                onCancel={() => navigate('/template')}\n              >\n                <Button type=\"primary\">返回</Button>\n              </Popconfirm>\n            )}\n            {!props.updating && (<Button type=\"primary\" onClick={() => navigate('/template')}>返回</Button>)}\n          </Groups>\n          { props.updating && (\n            <Groups>\n              <Popconfirm\n                placement=\"topRight\"\n                title=\"是否确定放弃修改？\"\n                okText=\"是\"\n                cancelText=\"否\"\n                onConfirm={props.onCancel}\n              >\n                <Button type=\"primary\" danger>放弃修改</Button>\n              </Popconfirm>\n              <div style={{ flex: 'auto' }}/>\n              <Popconfirm\n                placement=\"topRight\"\n                title=\"是否确定保存？\"\n                okText=\"是\"\n                cancelText=\"否\"\n                onConfirm={() => props.onSave(false)}\n              >\n                <Button type=\"primary\" >确定保存</Button>\n              </Popconfirm>\n            </Groups>\n          )}\n          <Groups>\n            <Subject>内容</Subject>\n            <Items>\n              {CONTENT_DEFINITIONS.map((it, index) => (\n                <Draggable\n                  key={it.key}\n                  draggableId={it.key}\n                  index={index}>\n                  {(provided, snapshot) => (\n                    <React.Fragment>\n                      <Item\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n                        {...provided.dragHandleProps}\n                        isDragging={snapshot.isDragging}\n                        style={snapshot.isDragging ? provided.draggableProps.style : {}}\n                      >\n                        {it.title}\n                      </Item>\n                      {snapshot.isDragging && (\n                        <Clone>\n                          {it.title}\n                        </Clone>\n                      )}\n                    </React.Fragment>\n                  )}\n                </Draggable>\n              ))}\n            </Items>\n          </Groups>\n          <PageStyle\n            value={props.value}\n            onChange={props.onChange}\n          />\n          {provided.placeholder}\n        </Container>\n      )}\n    </Droppable>\n  )\n}\n\nexport default Material\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Droppable, DragDropContext, DropResult, Draggable } from 'react-beautiful-dnd'\nimport { Content } from '../../../definition/content/types'\nimport { Button, Popconfirm } from 'antd'\n\nconst Container = styled.div<{isDragging: boolean}>`\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\n  height: 100%;\n`\n\nconst Items = styled.div<{isDragging: boolean}>`\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\n  margin: 15px;\n  font-size: 18px;\n  font-weight: 600;\n  text-align: center;\n  background: #f3f3f3;\n  display: flex;\n\n  > div:first-child {\n    flex: auto;\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n`\n\nconst LayoutContents = (props: { value: Content<any, any>[], onChange: (value: Content<any, any>[]) => void, onChangeActive: (contentId: string) => void }) => {\n  const onDragEnd = (result: DropResult) => {\n    const { destination, source } = result\n    if (!destination) {\n      return\n    }\n    const contents = props.value\n    // 删除后的位置调整\n    const offset = destination.index > 0 && source.index > destination.index ? destination.index - 1 : 0\n    const target = contents[source.index]\n    // 删除原有\n    contents.splice(source.index, 1)\n    // 重新插入\n    contents.splice(destination.index - offset, 0, target)\n    props.onChange(contents)\n  }\n\n  const handleDelete = (id: string) => {\n    const index = props.value.findIndex(it => it.id === id)\n    props.value.splice(index, 1)\n    props.onChange([...props.value])\n  }\n\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable droppableId=\"layout-contents\">\n        {(provided, snapshot) => (\n          <Container\n            {...provided.droppableProps}\n            ref={provided.innerRef}\n            isDragging={snapshot.isDraggingOver}\n          >\n            {props.value.map((it, index) => (\n              <Draggable key={it.id} draggableId={it.id} index={index}>\n                {(provided, snapshot) => (\n                  <Items\n                    ref={provided.innerRef}\n                    {...provided.draggableProps}\n                    style={provided.draggableProps.style}\n                    isDragging={snapshot.isDragging}\n                  >\n                    <div {...provided.dragHandleProps}>\n                      {index + 1}\n                    </div>\n                    <div>\n                      <Popconfirm\n                        placement=\"topRight\"\n                        title=\"是否确定删除？\"\n                        okText=\"是\"\n                        cancelText=\"否\"\n                        onConfirm={() => handleDelete(it.id)}\n                      >\n                        <Button type=\"primary\" danger>删除</Button>\n                      </Popconfirm>\n                      <Button type=\"primary\" onClick={() => props.onChangeActive(it.id)}>编辑</Button>\n                    </div>\n                  </Items>\n                )}\n              </Draggable>\n            ))}\n            {provided.placeholder}\n          </Container>\n        )}\n      </Droppable>\n    </DragDropContext>\n  )\n}\n\nexport default LayoutContents\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Droppable, DragDropContext, DropResult, Draggable } from 'react-beautiful-dnd'\nimport { Button, Popconfirm, Menu, Dropdown } from 'antd'\nimport { sortBy } from 'lodash'\nimport { Page } from '../../../definition/types'\n\nconst Header = styled.div`\n  padding: 10px 15px;\n\n`\n\nconst Elements = styled.div<{isDragging: boolean}>`\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\n  height: 100%;\n`\n\nconst Items = styled.div<{isDragging: boolean}>`\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\n  margin: 15px;\n  font-size: 18px;\n  font-weight: 600;\n  text-align: center;\n  background: #f3f3f3;\n  display: flex;\n\n  > div:first-child {\n    flex: auto;\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n`\n\nconst PageLayouts = (props: { value: Page, onChange: (value: Page) => void, onChangeActive:(layoutId: string) => void }) => {\n  const PageSetting = (props: {index: number, value: Page, onChange: (value: Page) => void }) => {\n    const handlePageable = () => {\n      const indexes = props.value.pageIndexes\n      if (!indexes.includes(props.index)) {\n        indexes.push(props.index)\n        props.onChange({ ...props.value, pageIndexes: sortBy(indexes) })\n      }\n    }\n\n    return (\n      <Menu>\n        <Menu.Item disabled onClick={() => props.onChange({ ...props.value, header: props.index })}>页头</Menu.Item>\n        <Menu.Item disabled onClick={() => props.onChange({ ...props.value, footer: props.index })}>页尾</Menu.Item>\n        <Menu.Item disabled onClick={handlePageable}>分页</Menu.Item>\n      </Menu>\n    )\n  }\n\n  const onDragEnd = (result: DropResult) => {\n    const { destination, source } = result\n    if (!destination) {\n      return\n    }\n    const layouts = props.value.layouts\n    // 删除后的位置调整\n    const offset = destination.index > 0 && source.index > destination.index ? destination.index - 1 : 0\n    const target = layouts[source.index]\n    // 删除原有\n    layouts.splice(source.index, 1)\n    // 重新插入\n    layouts.splice(destination.index - offset, 0, target)\n    props.onChange({ ...props.value, layouts: [...layouts] })\n  }\n\n  const handleDelete = (id: string) => {\n    const layouts = props.value.layouts\n    const index = layouts.findIndex(it => it.id === id)\n    layouts.splice(index, 1)\n\n    const pageIndex = props.value.pageIndexes.findIndex(it => it === index)\n    if (pageIndex !== -1) {\n      props.value.pageIndexes.splice(pageIndex, 1)\n    }\n\n    const listIndex = props.value.listIndexes.findIndex(it => it === index)\n    if (listIndex !== -1) {\n      props.value.pageIndexes.splice(listIndex, 1)\n    }\n\n    props.onChange({\n      ...props.value,\n      layouts: [...layouts],\n      pageIndexes: [...props.value.pageIndexes],\n      listIndexes: [...props.value.listIndexes]\n    })\n  }\n\n  return (\n    <div>\n      <Header>\n        <h3>分页说明</h3>\n        <p>1.内容超出页面尺寸会自动分页;</p>\n        <p>2.可以在指定元素后面分页，元素删除分页删除;</p>\n        <h3>页头页尾说明</h3>\n        <p>1.列表内容无法作为页头页尾;</p>\n        <p>2.页头页尾设置后无法编辑，如需编辑请取消后再重新设置;</p>\n      </Header>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <Droppable droppableId=\"page-layouts\">\n          {(provided, snapshot) => (\n            <Elements\n              {...provided.droppableProps}\n              ref={provided.innerRef}\n              isDragging={snapshot.isDraggingOver}\n            >\n              {props.value.layouts.map((it, index) => (\n                <Draggable key={it.id} draggableId={it.id} index={index}>\n                  {(provided, snapshot) => (\n                    <React.Fragment>\n                      {index === props.value.footer && (<div>取消页尾</div>)}\n                      <Items\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n                        style={provided.draggableProps.style}\n                        isDragging={snapshot.isDragging}\n                      >\n                        <div {...provided.dragHandleProps}>\n                          {index + 1}\n                        </div>\n                        <div>\n                          <Popconfirm\n                            placement=\"topRight\"\n                            title=\"是否确定删除？\"\n                            okText=\"是\"\n                            cancelText=\"否\"\n                            onConfirm={() => handleDelete(it.id)}\n                          >\n                            <Button type=\"primary\" danger>删除</Button>\n                          </Popconfirm>\n                          <Dropdown\n                            overlay={<PageSetting index={index} {...props}/>}\n                            disabled={\n                              // 已设置页头页尾\n                              index <= props.value.header || (index >= props.value.footer && props.value.footer > 0) ||\n                              // 已设置分页\n                              props.value.pageIndexes.includes(index) ||\n                              // 列表禁用分页或页头页尾\n                              (props.value.listIndexes.length === 1 && props.value.listIndexes[0] === index) ||\n                              (props.value.listIndexes.length > 1 && index > props.value.listIndexes[0]) ||\n                              (props.value.listIndexes.length > 1 && index < props.value.listIndexes[props.value.listIndexes.length - 1])\n                            }\n                          >\n                            <Button type=\"primary\">设置</Button>\n                          </Dropdown>\n                          <Button type=\"primary\" onClick={() => props.onChangeActive(it.id)}>编辑</Button>\n                        </div>\n                      </Items>\n                      {index === props.value.header && (<div>取消页头</div>)}\n                      {props.value.pageIndexes.includes(index) && (<div>取消分页</div>)}\n                    </React.Fragment>\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </Elements>\n          )}\n        </Droppable>\n      </DragDropContext>\n    </div>\n  )\n}\n\nexport default PageLayouts\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport { Layout } from '../../../definition/layout/types'\nimport { Content } from '../../../definition/content/types'\nimport { Tabs, Button } from 'antd'\nimport LayoutContents from './layout-contents'\nimport PageLayouts from './page-layouts'\nimport { Metadata, Page } from '../../../definition/types'\n\nconst Container = styled.aside`\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n`\nconst Items = styled.div`\n  border-bottom: 1px solid #aaa;\n  padding: 10px 15px;\n  display: flex;\n  align-items: center;\n`\nconst Title = styled.span`\n  display: inline-block;\n  width: 80px;\n`\n\nconst Notice = styled.div`\n  display: flex;\n  flex: auto;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n  color: #fff;\n  background-color: #ff7875;\n  font-size: 32px;\n  height: 88px;\n`\n\nfunction Blueprint (props: {\n  active: Layout | Content<any, any> | undefined,\n  onChangeActiveValue: (value: Layout | Content<any, any>) => void,\n  onChangeActive: (layoutId: string, contentId?: string) => void\n  value: Page,\n  onChange: (value: Page) => void,\n  metadata: Metadata,\n  getData: (value: string | string[]) => any\n}) {\n  const [current, setCurrent] = useState<number>(0)\n\n  const changeValue = (value: any) => {\n    props.onChangeActiveValue({\n      ...props.active!,\n      value: value\n    })\n  }\n\n  const changeContents = (contents: Content<any, any>[]) => {\n    props.onChangeActiveValue({\n      ...props.active!,\n      contents\n    })\n  }\n\n  const changeStyle = (key: string, value: any) => {\n    const styles = props.active!.styles\n    const index = styles.findIndex(it => it.definition.key === key)\n    const style = styles[index]\n    style.value = value\n    styles.splice(index, 1, style)\n\n    props.onChangeActiveValue({\n      ...props.active!,\n      styles\n    })\n  }\n\n  const renderContentOrLayout = () => {\n    if ((props.active as Layout)?.contents) {\n      const layout = props.active as Layout\n      if (!layout.contents.length) {\n        return (\n          <Notice>请添加内容</Notice>\n        )\n      }\n      return (\n        <LayoutContents value={layout.contents} onChange={changeContents} onChangeActive={contentId => props.onChangeActive(layout.id, contentId) } />\n      )\n    }\n    const content = props.active as Content<any, any>\n    return (\n      <content.definition.Blueprint value={content.value} onChange={changeValue} metadata={props.metadata} getData={props.getData} />\n    )\n  }\n\n  const handleDelete = () => {\n    if ((props.active as Layout)?.contents) {\n      // 删除 layout\n      const index = props.value.layouts.findIndex(it => it.id === props.active!.id)\n      props.value.layouts.splice(index, 1)\n    } else {\n      // 删除 content\n      const content = props.active as Content<any, any>\n      const contentIndex = content.layout.contents.findIndex(it => it.id === content.id)\n      content.layout.contents.splice(contentIndex, 1)\n\n      // 修改 layout\n      const layoutIndex = props.value.layouts.findIndex(it => it.id === content.layout.id)\n      if (content.layout.contents.length === 0) {\n        // 无内容删除 layout\n        props.value.layouts.splice(layoutIndex, 1)\n      } else {\n        props.value.layouts.splice(layoutIndex, 1, content.layout)\n      }\n    }\n    props.onChange({ ...props.value })\n  }\n\n  return (\n    <Container>\n      <Tabs\n        activeKey={String(current)}\n        onChange={v => setCurrent(Number(v))}\n        centered\n        size=\"large\"\n        style={{ height: '100%' }}\n      >\n        <Tabs.TabPane tab={!props.active || (props.active as Layout).contents ? '元素' : '属性'} key=\"0\">\n          {current === 0 && !!props.active && (renderContentOrLayout())}\n        </Tabs.TabPane>\n        <Tabs.TabPane tab=\"样式\" key=\"1\">\n          {current === 1 && !!props.active && [\n            <Items key=\"button\" style={{ justifyContent: 'center' }}><Button type=\"primary\" danger onClick={handleDelete} >删除</Button></Items>,\n            props.active.styles.map((it, index) => (\n              <Items key={index} >\n                <Title>{it.definition.title}</Title>\n                <it.definition.Blueprint value={it.value} onChange={value => changeStyle(it.definition.key, value)}/>\n              </Items>\n            ))\n          ]}\n        </Tabs.TabPane>\n        <Tabs.TabPane tab=\"页面元素\" key=\"3\">\n          {current === 3 && (<PageLayouts value={props.value} onChange={props.onChange} onChangeActive={layoutId => {\n            props.onChangeActive(layoutId)\n            setCurrent(0)\n          }} />)}\n        </Tabs.TabPane>\n      </Tabs>\n    </Container>\n  )\n}\n\nexport default Blueprint\n","import React from 'react'\nimport styled from 'styled-components'\nimport { render } from '../../../definition/styles/utils'\nimport { Draggable, Droppable } from 'react-beautiful-dnd'\nimport { DroppableIds, MaterialType } from '../types'\nimport { Layout } from '../../../definition/layout/types'\nimport { Content } from '../../../definition/content/types'\nimport { Page } from '../../../definition/types'\n\nconst Container = styled.section`\n  border-left: 1px solid #e0e0e0;\n  border-right: 1px solid #e0e0e0;\n  display: flex;\n  flex-direction: column;\n  flex: auto;\n`\nconst View = styled.div`\n  background: #f3f3f3;\n  flex: auto;\n  display: flex;\n  justify-content: center;\n`\n\nconst PageContainer = styled.article<{isDragging: boolean}>`\n  background: #fff;\n  box-shadow: 0 4px 12px #ebedf0;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\n`\n\nconst LayoutContainer = styled.div<{ isDragging: boolean }>`\n  display: flex;\n  ${props => props.isDragging ? 'border: 1px dashed #4099ff;' : ''}\n  position: relative;\n`\n\nconst LayoutHandle = styled.div<{index: number}>`\n  user-select: none;\n  position: absolute;\n  width: 40px;\n  height: 1px;\n  left: -${props => props.index % 2 === 0 ? 40 : 27}px;\n  background-color: aquamarine;\n\n  > div {\n    width: 40px;\n    height: 30px;\n    clip-path: polygon(100% 0, 0 0, 0 100%);\n    position: absolute;\n    left: -${props => props.index % 2 === 0 ? 40 : 27}px;\n    background-color: #1890ff;\n  }\n`\n\nconst Notice = styled.div`\n  display: flex;\n  flex: auto;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 32px;\n  background-color: #ff7875;\n`\n\nconst Building = (props: { value: Page, getData: (value: string | string[]) => any, onChangeActive: (layoutId: string, contentId?: string) => void, active: Layout | Content<any, any> | undefined }) => {\n  return (\n    <Container>\n      <View>\n        {!props.value.width && !props.value.height\n          ? null\n          : (\n            <Droppable droppableId={DroppableIds.Building}>\n              {(provided, dropSnapshot) => (\n                <PageContainer\n                  ref={provided.innerRef}\n                  isDragging={dropSnapshot.isDraggingOver}\n                  {...provided.droppableProps}\n                  style={{\n                    width: `${props.value.width}mm`,\n                    height: `${props.value.height}mm`,\n                    ...render(props.value.styles)\n                  }}\n                >\n                  {props.value.layouts.length\n                    ? props.value.layouts.map((it, index) => (\n                      <Draggable\n                        key={it.id}\n                        draggableId={`${it.id}_${MaterialType.Layout}`}\n                        index={index}>\n                        {(provided, snapshot) => (\n                          <LayoutContainer\n                            ref={provided.innerRef}\n                            {...provided.draggableProps}\n                            isDragging={snapshot.isDragging}\n                            style={dropSnapshot.draggingOverWith && !dropSnapshot.draggingOverWith.endsWith(MaterialType.Layout) ? {} : provided.draggableProps.style}\n                          >\n                            <LayoutHandle\n                              {...provided.dragHandleProps}\n                              onClick={() => props.onChangeActive(it.id)}\n                              index={index}\n                            >\n                              <div>{index + 1}</div>\n                            </LayoutHandle>\n                            {<it.definition.Building\n                              {...props}\n                              contents={it.contents}\n                              key={it.id}\n                              id={`${it.id}_${MaterialType.Content}`}\n                              style={render(it.styles)}\n                              onChangeActive={(id) => props.onChangeActive(it.id, id)}\n                            />}\n                          </LayoutContainer>\n                        )}\n                      </Draggable>\n                    ))\n                    : (<Notice>请拖动布局或内容进行编辑</Notice>)\n                  }\n                  {provided.placeholder}\n                </PageContainer>\n              )}\n            </Droppable>\n            )\n        }\n      </View>\n    </Container>\n  )\n}\n\nexport default Building\n","import { Layout } from '../layout/types'\nimport { createStyle } from '../styles/utils'\nimport { Content, ContentDefinition, ContentSerialize } from './types'\nimport { v4 as uuid4 } from 'uuid'\nimport { cloneDeep } from 'lodash'\nimport { STYLE_DEFINITIONS } from '../index'\nimport { Style } from '../styles/types'\n\nexport const createContent = (layout: Layout, definition: ContentDefinition<any, any>, defaultStyles: Style<any>[]): Content<any, any> => {\n  return {\n    id: uuid4(),\n    layout: layout,\n    definition: definition,\n    // STYLE_DEFINITIONS 由于循环依赖问题，只能创建时选择\n    styles: (definition.styles.length !== 0 ? definition.styles : STYLE_DEFINITIONS)\n      .map(it => createStyle(it, defaultStyles.find(dit => it.key === dit.definition.key)?.value)),\n    toJSON () {\n      const value: ContentSerialize = {\n        id: this.id,\n        styles: this.styles.map(it => it.toJSON()),\n        value: this.value,\n        definition: this.definition.key,\n        layout: this.layout.id\n      }\n      return value\n    },\n    value: cloneDeep(definition.defaultValue)\n  }\n}\n\nexport const getContentDefinitions = async () => {\n  return [\n    await import('./text')\n  ]\n}\n","import { createStyle } from '../styles/utils'\nimport { ContentDefinition, ContentSerialize } from '../content/types'\nimport { Layout, LayoutDefinition, LayoutSerialize } from './types'\nimport { v4 as uuid4 } from 'uuid'\nimport { Style } from '../styles/types'\nimport Many from './many'\nimport { createContent } from '../content/utils'\nimport { CONTENT_DEFINITIONS, LAYOUT_DEFINITIONS } from '../index'\n\nconst createByLayoutSerialize = (serialize: LayoutSerialize): Layout => {\n  const layout: Layout = {\n    id: serialize.id,\n    styles: serialize.styles.map(it => createStyle(it)),\n    definition: LAYOUT_DEFINITIONS.find(it => it.key === serialize.definition)!,\n    contents: [],\n    toJSON () {\n      const value: LayoutSerialize = {\n        contents: this.contents.map(it => it.toJSON()),\n        id: this.id,\n        styles: this.styles.map(it => it.toJSON()),\n        definition: this.definition.key\n      }\n      return value\n    }\n  }\n  layout.contents = serialize.contents.map(it => {\n    return {\n      id: it.id,\n      styles: it.styles.map(it => createStyle(it)),\n      value: it.value,\n      definition: CONTENT_DEFINITIONS.find(item => item.key === it.definition)!,\n      layout: layout,\n      toJSON () {\n        const value: ContentSerialize = {\n          value: this.value,\n          id: this.id,\n          styles: this.styles.map(it => it.toJSON()),\n          layout: this.layout.id,\n          definition: this.definition.key\n        }\n        return value\n      }\n    }\n  })\n  return layout\n}\n\nconst createByLayoutDefinition = (definition: LayoutDefinition, defaultStyles: Style<any>[]): Layout => {\n  return {\n    id: uuid4(),\n    styles: definition.styles.map(it => createStyle(it, defaultStyles.find(dit => it.key === dit.definition.key)?.value)),\n    contents: [],\n    definition: definition,\n    toJSON () {\n      return {\n        ...this,\n        definition: this.definition.key\n      }\n    }\n  }\n}\n\nconst createByContentDefinition = (definition: ContentDefinition<any, any>, defaultStyles: Style<any>[]): Layout => {\n  const layout = createByLayoutDefinition(definition?.layout ?? Many, defaultStyles)\n  const content = createContent(layout, definition, defaultStyles)\n  layout.contents.push(content)\n  return layout\n}\n\nexport const createLayout = (target: LayoutDefinition | LayoutSerialize | ContentDefinition<any, any>, defaultStyles?: Style<any>[]): Layout => {\n  if ((target as ContentDefinition<any, any>).Blueprint) {\n    return createByContentDefinition(target as ContentDefinition<any, any>, defaultStyles!)\n  }\n\n  if ((target as LayoutSerialize).definition) {\n    return createByLayoutSerialize(target as LayoutSerialize)\n  }\n  return createByLayoutDefinition(target as LayoutDefinition, defaultStyles!)\n}\n\nexport const getLayoutDefinitions = async () => {\n  return [\n    await import('./many')\n  ]\n}\n","import { Metadata, Page, PageSerialize } from './types'\nimport { StyleSerialize } from './styles/types'\nimport { createStyle } from './styles/utils'\nimport { DEFAULT_TEMPLATE_STYLES } from './index'\nimport { LayoutSerialize } from './layout/types'\nimport { createLayout } from './layout/utils'\n\nexport type FlattenData = Record<string, any>\n/**\n * object 数据扁平化处理, 处理基本类型和非数组对象\n * @param data {\n *   a: 1,\n *   b: [1, 2],\n *   c: { e: 2, f: 3 },\n *   g: null,\n * }\n * return {\n *   a: 1,\n *   b[]: [1, 2],\n *   'c.e': 2,\n *   'c.f': 3,\n *   g: null,\n * }\n */\nexport const flattenData = (data: any | undefined): FlattenData => {\n  const result: Record<string, any> = {}\n  const precess = (key: string, value: any) => {\n    if (value && typeof value === 'object') {\n      if (Array.isArray(value)) {\n        result[`${key}[]`] = value\n      } else {\n        for (const valueKey in value) {\n          precess(key ? `${key}.${valueKey}` : valueKey, value[valueKey])\n        }\n      }\n    } else if (key) {\n      result[key] = value\n    }\n  }\n  precess('', data)\n  return result\n}\n\n/**\n * 获取渲染数据\n * @param texts       1.xx${xxx}xx 判断文本获取， 2. xx 获取object数据\n * @param metadata    数据定义\n * @param data        渲染数据\n */\nexport const getRenderData = (texts: string | string[], metadata: Metadata, data: FlattenData) => {\n  const isArray = Array.isArray(texts)\n  const result = (isArray ? texts as string[] : [texts as string]).map(text => {\n    if (text.includes('${')) {\n      return text.replace(/\\${([^}]+)}/g, (match, p1: string) => {\n        // ${12} 快速空格\n        // if (!p1.includes('.') && !Number.isNaN(p1)) {\n        //   const len = Number(p1)\n        //   if (len < 1) {\n        //     return ''\n        //   }\n        //   let sb = ''\n        //   for (let i = 0; i < len; i++) {\n        //     sb += '&nbsp;'\n        //   }\n        //   return sb\n        // }\n        const key = p1.trim()\n        const exec = /\\[([0-9]+)]$/.exec(key)\n        const val = data[exec ? exec[1] : key]\n        if (Array.isArray(val) && ['string', 'number', 'boolean', 'undefined'].includes(typeof val[0])) {\n          return `\\n${val.filter(it => it).join('\\n')}\\n`\n        }\n        return val || ''\n      })\n    }\n    const key = text.trim()\n    // alias[2]\n    const exec = /\\[([0-9]+)]$/.exec(key)\n    const item = metadata.items.find(it => {\n      if (exec) {\n        return it.id === Number(exec[1])\n      }\n      return it.path === key\n    })\n    if (!item) {\n      if (exec) {\n        return undefined\n      }\n      return text\n    }\n    return data[exec ? exec[1] : key]\n  })\n  return isArray ? result : result[0]\n}\n\nexport const deserializePage = (page: PageSerialize): Page => {\n  return {\n    footer: page.footer,\n    header: page.header,\n    width: page.width,\n    height: page.height,\n    listIndexes: page.listIndexes,\n    pageIndexes: page.pageIndexes,\n    styles: page.styles.length ? page.styles.map((it: StyleSerialize) => createStyle(it)) : DEFAULT_TEMPLATE_STYLES,\n    layouts: page.layouts.map((it: LayoutSerialize) => createLayout(it))\n  }\n}\n","import React, { useState } from 'react'\nimport Material from './material'\nimport Blueprint from './blueprint'\nimport { DragDropContext, DropResult } from 'react-beautiful-dnd'\nimport styled from 'styled-components'\nimport { DroppableIds, MaterialType } from './types'\nimport Building from './building'\nimport { Layout } from '../../definition/layout/types'\nimport { createLayout } from '../../definition/layout/utils'\nimport { Content } from '../../definition/content/types'\nimport { createContent } from '../../definition/content/utils'\nimport { message } from 'antd'\nimport { deserializePage, flattenData, getRenderData } from '../../definition/utils'\nimport { Metadata, Page, PageSerialize, Template } from '../../definition/types'\nimport Header from '../../components/Header'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { METATABLES, TEMPLATES } from '../../plugins/database'\nimport useLocalStorage from 'react-use-localstorage'\nimport { CONTENT_DEFINITIONS } from '../../definition'\nimport Many from '../../definition/layout/many'\n\nconst Container = styled.div`\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  > div:nth-child(2) {\n    display: flex;\n    flex: auto;\n  }\n`\n\nfunction Editor () {\n  const navigate = useNavigate()\n  const { id } = useParams()\n  const [templates, setTemplates] = useLocalStorage('RE-templates', JSON.stringify(TEMPLATES))\n\n  const template = (JSON.parse(templates) as Template[]).find((it: any) => it.id === id)\n  if (!template) {\n    message.error('编辑内容已被删除')\n    navigate('/template')\n    return null\n  }\n\n  const [metatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\n  const metadata = (JSON.parse(metatables) as Metadata[]).find(it => it.id === template.metadataId)!\n  const renderData = flattenData(JSON.parse(metadata.json))\n\n  const [pageCache, setPageCache] = useLocalStorage(`RE-editTemplate-${id}`)\n  const pageSerialize: PageSerialize = JSON.parse(pageCache || template.json || JSON.stringify({\n    footer: -1,\n    header: -1,\n    width: 210,\n    height: 297,\n    layouts: [],\n    listIndexes: [],\n    pageIndexes: [],\n    styles: []\n  }))\n  const page: Page = deserializePage(pageSerialize)\n  const setPage = (value: Page) => {\n    setPageCache(JSON.stringify(value))\n  }\n\n  const [active, setActive] = useState<Layout | Content<any, any> | undefined>()\n\n  const onDragEnd = (result: DropResult) => {\n    // dropped outside the list\n\n    const {\n      destination,\n      source,\n      draggableId\n    } = result\n\n    if (!destination || destination.droppableId === DroppableIds.Material) {\n      return\n    }\n\n    // 拖动内容素材\n    if (source.droppableId === DroppableIds.Material) {\n      const contentDefinition = CONTENT_DEFINITIONS.find(it => it.key === draggableId)!\n      // 移动到空白区域\n      if (destination.droppableId === DroppableIds.Building) {\n        // 移动内容到基础布局\n        const layout = createLayout(contentDefinition, page.styles)\n        page.layouts.splice(destination.index, 0, layout)\n        setPage({ ...page })\n        setActive(layout.contents[0])\n        return\n      }\n\n      // 移动到现有布局\n      const layout = page.layouts.find(it => destination.droppableId.startsWith(it.id))!\n      const content = createContent(layout, contentDefinition, page.styles)\n      if (layout.definition !== Many) {\n        return\n      }\n      layout.contents.splice(destination.index, 0, content)\n      setActive(content)\n      setPage({ ...page, layouts: [...page.layouts] })\n      return\n    }\n\n    // 移动布局/内容, 修改顺序\n    if (source.droppableId === destination.droppableId) {\n      // 删除后的位置调整\n      const offset = destination.index > 0 && source.index > destination.index ? destination.index - 1 : 0\n\n      // 布局修改顺序\n      if (source.droppableId === DroppableIds.Building) {\n        const target = page.layouts[source.index]\n        // 删除原有\n        page.layouts.splice(source.index, 1)\n        // 重新插入\n        page.layouts.splice(destination.index - offset, 0, target)\n        setActive(target)\n        setPage({ ...page, layouts: [...page.layouts] })\n        return\n      }\n      // 内容修改顺序\n      const layout = page.layouts.find(it => destination.droppableId.startsWith(it.id))!\n      const contents = layout.contents\n      const target = contents[source.index]\n      // 删除原有\n      contents.splice(source.index, 1)\n      // 重新插入\n      contents.splice(destination.index - offset, 0, target)\n      target.layout = layout\n      setActive(target)\n      setPage({ ...page, layouts: [...page.layouts] })\n      return\n    }\n\n    // 布局合并\n    if (draggableId.endsWith(MaterialType.Layout) && destination.droppableId.endsWith(MaterialType.Content)) {\n      const index = page.layouts.findIndex(it => draggableId.startsWith(it.id))\n      // 布局不是行多排列禁止合并\n      if (index === -1 || page.layouts[index].definition !== Many) {\n        return\n      }\n      const layout = page.layouts.find(it => destination.droppableId.startsWith(it.id))!\n      // 布局不是行排列禁止合并\n      if (!layout || layout.definition !== Many) {\n        return\n      }\n      // 将拖动布局内容合并到目标布局\n      const contents = page.layouts[index].contents\n      layout.contents.splice(destination.index, 0, ...contents)\n      // 删除拖动布局\n      page.layouts.splice(index, 1)\n      setPage({ ...page, layouts: [...page.layouts] })\n    }\n\n    // 移动内容\n    if (!draggableId.endsWith(MaterialType.Layout) && !draggableId.endsWith(MaterialType.Content)) {\n      const sourceLayout = page.layouts.find(it => source.droppableId.startsWith(it.id))!\n      const content = sourceLayout.contents.find(it => it.id === draggableId)!\n      const destinationLayout = page.layouts.find(it => destination.droppableId.startsWith(it.id))!\n\n      // 拖动结果为建造区\n      if (destination.droppableId === DroppableIds.Building) {\n        const layout = createLayout(Many)\n        layout.contents.push(content)\n        page.layouts.splice(destination.index, 0, layout)\n        content.layout = layout\n      } else if (destinationLayout && destinationLayout.definition === Many) {\n        // 向结果布局插入内容\n        destinationLayout.contents.splice(destination.index, 0, content)\n        content.layout = destinationLayout\n        setActive(content)\n      } else {\n        // 无效拖动\n        return\n      }\n\n      // 从原拖动布局删除内容\n      sourceLayout.contents.splice(source.index, 1)\n\n      // 判断删除拖动布局是否空， 空删除\n      if (!sourceLayout.contents.length) {\n        const idx = page.layouts.findIndex(it => source.droppableId.startsWith(it.id))!\n        page.layouts.splice(idx, 1)\n      }\n      setPage({ ...page, layouts: [...page.layouts] })\n    }\n  }\n\n  const changeActive = (layoutId: string, contentId?: string) => {\n    const layout = page.layouts.find(it => it.id === layoutId)!\n    if (contentId) {\n      const content = layout.contents.find(it => it.id === contentId)!\n      setActive(content)\n    } else {\n      setActive(layout)\n    }\n  }\n\n  const changeActiveValue = (value: Layout | Content<any, any>) => {\n    setActive(value)\n    let layoutIndex = page.layouts.findIndex(it => it.id === value.id)\n    // layout 修改\n    if (layoutIndex !== -1) {\n      const layout = page.layouts[layoutIndex]\n      layout.contents = (value as Layout).contents\n      layout.styles = value.styles\n      if (layout.contents.length === 0) {\n        page.layouts.splice(layoutIndex, 1)\n      } else {\n        page.layouts.splice(layoutIndex, 1, layout)\n      }\n      setPage({ ...page })\n      return\n    }\n    // content 修改\n    const content = value as Content<any, any>\n    layoutIndex = page.layouts.findIndex(it => it.id === content.layout.id)\n    // 移动后未修改 content.layout 发生错误\n    if (layoutIndex === -1) {\n      setActive(undefined)\n      message.error('无效的修改,编辑的内容已过期')\n      return\n    }\n    const layout = page.layouts[layoutIndex]\n    const contentIndex = layout.contents.findIndex(it => it.id === content.id)\n    const target = layout.contents[contentIndex]\n    target.value = (value as Content<any, any>).value\n    target.styles = value.styles\n    layout.contents.splice(contentIndex, 1, target)\n    page.layouts.splice(layoutIndex, 1, layout)\n    setPage({ ...page })\n  }\n\n  const onSave = (back: boolean) => {\n    const temps = JSON.parse(templates) as Template[]\n    template.json = pageCache\n    const index = temps.findIndex(it => it.id === template.id)\n    if (index === -1) {\n      message.error('编辑内容已被删除')\n      navigate('/template')\n      setPageCache('')\n      return\n    }\n    temps.splice(index, 1, template)\n    setTemplates(JSON.stringify(temps))\n    setPageCache('')\n    if (back) {\n      navigate('/template')\n    }\n  }\n\n  const onCancel = () => {\n    setPageCache('')\n  }\n\n  return (\n    <Container>\n      <Header isFull={true} />\n      <div>\n        <DragDropContext onDragEnd={onDragEnd}>\n          <Material\n            value={page}\n            onChange={setPage}\n            updating={!!pageCache}\n            onSave={onSave}\n            onCancel={onCancel}\n            template={template}\n          />\n          <Building\n            value={page}\n            getData={value => getRenderData(value, metadata, renderData)}\n            onChangeActive={changeActive}\n            active={active}\n          />\n        </DragDropContext>\n        <Blueprint\n          active={active}\n          onChangeActiveValue={changeActiveValue}\n          onChangeActive={changeActive}\n          value={page}\n          onChange={setPage}\n          metadata={metadata}\n          getData={value => getRenderData(value, metadata, renderData)}\n        />\n      </div>\n    </Container>\n  )\n}\n\nexport default Editor\n","import React from 'react'\nimport styled from 'styled-components'\nimport { TEMPLATES } from '../plugins/database'\nimport useLocalStorage from 'react-use-localstorage'\nimport { useNavigate } from 'react-router-dom'\nimport { PageSerialize, Template } from '../definition/types'\nimport { Button } from 'antd'\n\nconst Container = styled.div`\n  padding: 15px 30px;\n`\n\nconst Items = styled.div`\n  padding: 15px 8px;\n  border-bottom: 1px solid #ebe0e0;\n\n  > div:first-child {\n    display: flex;\n    flex: auto;\n    margin-bottom: 8px;\n    align-items: center;\n\n    > div:nth-child(1) {\n      font-size: 16px;\n    }\n\n    > div:nth-child(2) {\n      flex: auto;\n    }\n\n    > div:nth-child(3) {\n      padding-right: 25px;\n    }\n  }\n\n  > div:last-child {\n    color: #bfbfbf;\n  }\n`\n\nconst Preview = () => {\n  const navigate = useNavigate()\n  const [templates] = useLocalStorage('RE-templates', JSON.stringify(TEMPLATES))\n  const temps = (JSON.parse(templates) as Template[]).filter(it => it.json && (JSON.parse(it.json) as PageSerialize).layouts.length > 0)\n\n  return (\n    <Container>\n      {temps.map((it, index) => (\n        <Items key={index}>\n          <div>\n            <div>{it.title}</div>\n            <div/>\n            <div>{it.updatedAt}</div>\n            <div><Button type=\"primary\" onClick={() => navigate(`/preview/${it.id}`)}>打印预览</Button></div>\n          </div>\n          <div>\n            {it.description}\n          </div>\n        </Items>\n      ))}\n    </Container>\n  )\n}\n\nexport default Preview\n","import React, { useRef, useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { Metadata, Page } from '../../definition/types'\nimport { render } from '../../definition/styles/utils'\nimport { flattenData, getRenderData } from '../../definition/utils'\nimport html2Canvas from 'html2canvas'\nimport { jsPDF as JsPDF } from 'jspdf'\nimport { Button } from 'antd'\nimport { useNavigate } from 'react-router-dom'\n\nconst Container = styled.div<{width: number}>`\n  width: ${props => props.width}mm;\n  border-right: 1px solid #ebe0e0;\n  background-color: beige;\n  box-sizing: content-box;\n`\n\nconst Header = styled.div`\n  background-color: #fff;\n  display: flex;\n  justify-content: space-evenly;\n`\n\nconst RenderContainer = styled.div<{width: number, height: number}>`\n  width: ${props => props.width}mm;\n  min-height: ${props => props.height ? `${props.height}mm` : 'auto'};\n  background-color: antiquewhite;\n  visibility: hidden;\n  position: absolute;\n  top: 0;\n`\n\nconst PageImg = styled.img<{width: number, height: number}>`\n  width: ${props => props.width}mm;\n  height: ${props => props.height ? `${props.height}mm` : 'auto'};\n  margin: 15px 0;\n`\n\nconst IFRAME_ID = 're-iframe'\nconst SCALE = 3\n\nconst Render = (props: {\n  page: Page\n  metadata: Metadata\n  data: object\n}) => {\n  const navigate = useNavigate()\n  const data = flattenData(props.data)\n  const ref = useRef<HTMLDivElement | null>(null)\n  const [canvas, setCanvas] = useState<HTMLCanvasElement[]>([])\n\n  const toCanvas = async (html: string): Promise<HTMLCanvasElement> => {\n    const o1 = document.getElementById(IFRAME_ID)\n    if (o1) {\n      document.body.removeChild(o1)\n    }\n    const iframe = document.createElement('iframe')\n    iframe.id = IFRAME_ID\n    iframe.style.visibility = 'hidden'\n    iframe.style.position = 'absolute'\n    iframe.style.top = '0px'\n    iframe.srcdoc = `<!DOCTYPE html>\n      <html lang=\"en\" style=\"font-size: ${SCALE * 100}px\">\n        <head>\n          <meta charset=\"utf-8\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n          <title>report print</title>\n          <style> * { padding: 0; margin: 0; } </style>\n        </head>\n        <body>\n          <div id=\"app\" style=\"width: ${props.page.width * SCALE}mm; height: ${props.page.height * SCALE}mm\">${html}</div>\n        </body>\n      </html>\n    `\n    document.body.appendChild(iframe)\n    // 等待渲染完成后获取 element\n    await new Promise((resolve) => {\n      const timer = setInterval(() => {\n        if (iframe.contentDocument && iframe.contentDocument.getElementById('app')) {\n          clearInterval(timer)\n          resolve(undefined)\n        }\n      }, 100)\n    })\n    const canvas = await html2Canvas(iframe.contentDocument!.getElementById('app')!)\n    const o2 = document.getElementById(IFRAME_ID)\n    if (o2) {\n      document.body.removeChild(o2)\n    }\n    return Promise.resolve(canvas)\n  }\n\n  const renderCanvas = async (): Promise<HTMLCanvasElement[]> => {\n    const canvas: HTMLCanvasElement[] = []\n\n    if (!ref.current) {\n      return Promise.resolve([])\n    }\n    const pageable: { start: number; end: number }[] = []\n    // 不分页或单页\n    if (props.page.height === 0 || ref.current.offsetHeight === ref.current.scrollHeight) {\n      pageable.push({ start: 0, end: props.page.layouts.length })\n    } else {\n      // TODO 待完善多页处理\n      return canvas\n    }\n\n    if (!ref.current) {\n      return canvas\n    }\n    const children = ref.current.children as unknown as HTMLDivElement[]\n\n    for (const it of pageable) {\n      // 根据分页计算结果获取 html\n      let html = ''\n      for (let i = it.start; i < it.end; i++) {\n        html += children[i].outerHTML\n      }\n      const value = await toCanvas(html)\n      canvas.push(value)\n    }\n    const oldIframe = document.getElementById(IFRAME_ID)\n    if (oldIframe) {\n      document.body.removeChild(oldIframe)\n    }\n    return canvas\n  }\n\n  const download = () => {\n    if (canvas.length === 0) {\n      return\n    }\n    const doc = new JsPDF({\n      unit: 'mm', // 毫米\n      format: [props.page.width, props.page.height]\n    })\n    for (let i = 0; i < canvas.length; i++) {\n      const it = canvas[i]\n      const dataURL = it.toDataURL('image/jpeg', 1)\n      if (i !== 0) {\n        doc.addPage()\n      }\n      doc.setPage(i + 1)\n      doc.addImage(dataURL, 'JPEG', 0, 0, props.page.width, props.page.height)\n    }\n    doc.save('report.pdf')\n  }\n\n  useEffect(() => {\n    // 计算分页并渲染成 canvas\n    renderCanvas().then(value => {\n      setCanvas(value)\n    })\n  }, [props.data])\n\n  const getData = (tests: string | string[]) => {\n    return getRenderData(tests, props.metadata, data)\n  }\n\n  const print = () => {\n    const wind = window.open('', 'print')!\n    wind.document.write(`<!DOCTYPE html>\n      <html lang=\"en\" style=\"font-size: ${SCALE * 100}px\">\n        <head>\n          <meta charset=\"utf-8\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n          <title>report print</title>\n          <style>\n          * { padding: 0; margin: 0; }\n          body { width: ${props.page.width}mm; }\n          img { width: ${props.page.width}mm; height: ${props.page.height ? `${props.page.height}mm` : 'auto'}; }\n          </style>\n        </head>\n        <body>\n          ${canvas.map(it => `<img src=\"${it.toDataURL('image/jpeg')}\" alt=\"\" />`)}\n        </body>\n      </html>\n    `)\n    setTimeout(() => {\n      wind.print()\n      wind.close()\n    }, 200)\n  }\n\n  return (\n    <Container width={props.page.width}>\n      <Header>\n        <Button type=\"primary\" onClick={() => download()}>PDF下载</Button>\n        <Button type=\"primary\" onClick={() => print()}>打印</Button>\n        <Button type=\"primary\" onClick={() => navigate('/preview')}>返回</Button>\n      </Header>\n      {canvas.map((it, index) => (<PageImg key={index} src={it.toDataURL('image/jpeg', 1 / SCALE)} alt=\"\" width={props.page.width} height={props.page.height}/>))}\n      <RenderContainer ref={value => { ref.current = value }} width={props.page.width} height={props.page.height}>\n        {props.page.layouts.map((it, index) => (\n          <it.definition.Render\n            key={index}\n            style={render(it.styles)}\n            contents={it.contents}\n            getData={getData}\n          />\n        ))}\n      </RenderContainer>\n    </Container>\n  )\n}\n\nexport default Render\n","import React from 'react'\nimport styled from 'styled-components'\nimport JSONInput from 'react-json-editor-ajrm'\nimport locale from 'react-json-editor-ajrm/locale/zh-cn'\nimport { message } from 'antd'\n\nconst Container = styled.div`\n`\n\nconst JsonEditor = (props: {\n  value: object\n  onChange: (value?: object) => void\n}) => {\n  const handleChange = (result: any) => {\n    if (!result.error) {\n      if (!result.json) {\n        return props.onChange()\n      }\n      if (Array.isArray(result.jsObject)) {\n        return message.error('数据不是JSON对象')\n      }\n      props.onChange(result.jsObject)\n    }\n  }\n\n  return (\n    <Container>\n      <JSONInput\n        id = 'json-editor'\n        placeholder={props.value}\n        onChange={(result: any) => handleChange(result)}\n        colors = { {\n          default: '#000',\n          background: '#FCFDFD',\n          background_warning: '#000',\n          string: '#FA7921',\n          number: '#70CE35',\n          colon: '#49B8F7',\n          keys: '#59A5D8',\n          keys_whiteSpace: '#835FB6',\n          primitive: '#386FA4',\n          error: '#e30b0b'\n        } as any}\n        locale = { locale }\n        width = '100%'\n        height = '100%'\n      />\n    </Container>\n  )\n}\n\nexport default JsonEditor\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport Header from '../../components/Header'\nimport Render from './render'\nimport JsonEditor from './json-editor'\nimport { METATABLES, TEMPLATES } from '../../plugins/database'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport useLocalStorage from 'react-use-localstorage'\nimport { Metadata, Template } from '../../definition/types'\nimport { message } from 'antd'\nimport { deserializePage } from '../../definition/utils'\n\nconst Container = styled.div`\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  > div:nth-child(2) {\n    display: flex;\n    flex: auto;\n  }\n`\n\nconst Editor = () => {\n  const navigate = useNavigate()\n  const { id } = useParams()\n  const [templates] = useLocalStorage('RE-templates', JSON.stringify(TEMPLATES))\n  const template = (JSON.parse(templates) as Template[]).find((it: any) => it.id === id)\n  if (!template) {\n    message.error('打印模板已过期')\n    navigate('/preview')\n    return null\n  }\n\n  const page = deserializePage(JSON.parse(template.json))\n\n  const [metatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\n  const metadata = (JSON.parse(metatables) as Metadata[]).find(it => it.id === template.metadataId)!\n  const [json, setJson] = useState<object>(JSON.parse(metadata.json))\n\n  return (\n    <Container>\n      <Header isFull={true}/>\n      <div>\n        <Render page={page} data={json} metadata={metadata}/>\n        <JsonEditor value={json} onChange={value => setJson(value || JSON.parse(metadata.json))}/>\n      </div>\n    </Container>\n  )\n}\n\nexport default Editor\n","import React from 'react'\nimport './App.css'\nimport 'antd/dist/antd.css'\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom'\nimport Home from './home'\nimport Error404 from './errors/error-404'\nimport Metadata from './metadata'\nimport MetadataEditor from './metadata/editor'\nimport Template from './template'\nimport TemplateEditor from './template/editor'\nimport Preview from './preview'\nimport PreviewEditor from './preview/editor'\n\nfunction App () {\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={<Home/>} >\n          <Route path=\"template\" element={<Template/>} />\n          <Route path=\"metadata\" element={<Metadata/>} />\n          <Route path=\"preview\" element={<Preview/>} />\n        </Route>\n        <Route path=\"/metadata/:id\" element={<MetadataEditor/>}/>\n        <Route path=\"/template/:id\" element={<TemplateEditor/>}/>\n        <Route path=\"/preview/:id\" element={<PreviewEditor/>}/>\n        <Route path=\"*\" element={<Error404/>} />\n      </Routes>\n    </Router>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry)\r\n      getFID(onPerfEntry)\r\n      getFCP(onPerfEntry)\r\n      getLCP(onPerfEntry)\r\n      getTTFB(onPerfEntry)\r\n    })\r\n  }\r\n}\r\n\r\nexport default reportWebVitals\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n","import { createStyle } from './styles/utils'\nimport { ContentDefinition } from './content/types'\nimport { LayoutDefinition } from './layout/types'\nimport { StyleDefinition } from './styles/types'\nimport Text from './content/text'\nimport Many from './layout/many'\nimport FlexDirection from './styles/flex-direction'\nimport FlexGrow from './styles/flex-grow'\nimport JustifyContent from './styles/justify-content'\nimport AlignItems from './styles/align-items'\nimport FontSize from './styles/font-size'\nimport FontWeight from './styles/font-weight'\nimport TextIndent from './styles/text-indent'\nimport LetterSpacing from './styles/letter-spacing'\nimport MinWidth from './styles/min-width'\nimport Color from './styles/color'\nimport Ellipsis from './styles/ellipsis'\nimport MinHeight from './styles/min-height'\nimport MaxHeight from './styles/max-height'\nimport MaxWidth from './styles/max-width'\nimport Padding from './styles/padding'\nimport Border from './styles/border'\n\nexport const PAPER_SIZES = [\n  {\n    title: 'A5',\n    width: 148,\n    height: 210\n  },\n  {\n    title: 'A4',\n    width: 210,\n    height: 297\n  }\n]\n\nexport const STYLE_DEFINITIONS: StyleDefinition<any>[] = [\n  FlexDirection,\n  JustifyContent,\n  AlignItems,\n  FlexGrow,\n  FontSize,\n  FontWeight,\n  TextIndent,\n  LetterSpacing,\n  Color,\n  Ellipsis,\n  MinHeight,\n  MinWidth,\n  MaxHeight,\n  MaxWidth,\n  Padding,\n  Border\n]\n\nexport const DEFAULT_TEMPLATE_STYLES = [\n  FontSize,\n  FontWeight,\n  Ellipsis,\n  Color\n].map(it => createStyle(it))\n\nexport const CONTENT_DEFINITIONS: ContentDefinition<any, any>[] = [\n  Text\n]\n\nexport const LAYOUT_DEFINITIONS: LayoutDefinition[] = [\n  Many\n]\n","import React from 'react'\nimport { LayoutDefinition, LayoutBuildingProps, LayoutRenderProps } from './types'\nimport styled from 'styled-components'\nimport { Draggable, Droppable } from 'react-beautiful-dnd'\nimport { render, renderLayout } from '../styles/utils'\nimport MinHeight from '../styles/min-height'\nimport MaxHeight from '../styles/max-height'\nimport Padding from '../styles/padding'\n\nconst Container = styled.div<{ isDragging: boolean, isActive: boolean }>`\n  display: flex;\n  flex: auto;\n  flex-direction: row;\n  position: relative;\n  ${props => props.isDragging ? 'border: 1px dashed #4099ff;' : ''}\n  ${props => props.isActive ? 'background-color: springgreen' : ''}\n`\n\nconst ContentContainer = styled.div<{ isDragging: boolean, isActive: boolean }>`\n  display: flex;\n  ${props => props.isDragging ? 'border: 1px dashed #4099ff;' : ''}\n  position: relative;\n  flex: 1;\n  ${props => props.isActive ? 'background-color: springgreen' : ''}\n`\n\nconst Notice = styled.div`\n  display: flex;\n  flex: auto;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n  font-size: 12px;\n  color: #fff;\n  background-color: #ff7875;\n`\n\nconst Many: LayoutDefinition = {\n  Render (props: LayoutRenderProps) {\n    return (\n      <div style={props.style}>\n        {props.contents.map((it, index) => (\n          <it.definition.Render key={index} style={render(it.styles)} result={props.getData(it.value)} />\n        ))}\n      </div>\n    )\n  },\n  Building (props: LayoutBuildingProps) {\n    return (\n      <Droppable droppableId={props.id} direction={ 'horizontal'}>\n        {(provided, snapshot) => (\n          <Container\n            style={props.style}\n            ref={provided.innerRef}\n            isDragging={snapshot.isDraggingOver}\n            isActive={!!props.active && props.id.startsWith(props.active.id)}\n          >\n            {props.contents.length\n              ? props.contents.map((it, index) => (\n                <Draggable\n                  key={it.id}\n                  draggableId={it.id}\n                  index={index}\n                >\n                  {(provided, snapshot) => (\n                    <ContentContainer\n                      ref={provided.innerRef}\n                      isDragging={snapshot.isDragging}\n                      isActive={props.active?.id === it.id}\n                      {...provided.draggableProps}\n                      {...provided.dragHandleProps}\n                      style={Object.assign(provided.draggableProps.style, renderLayout(it.styles))}\n                    >\n                      {it.value\n                        ? (<it.definition.Building key={index} style={render(it.styles)} value={it.value} result={props.getData(it.value) || it.value} onChangeActive={() => props.onChangeActive(it.id)} />)\n                        : (<Notice key={index} onClick={() => props.onChangeActive(it.id)}>未配置属性</Notice>)\n                      }\n                    </ContentContainer>\n                  )}\n                </Draggable>\n              ))\n              : <Notice>请拖动内容进行元素添加</Notice>\n            }\n            {provided.placeholder}\n          </Container>\n        )}\n      </Droppable>\n    )\n  },\n  description: '页面是竖向排列，使用该布局添加横向内容',\n  styles: [MinHeight, MaxHeight, Padding],\n  title: '纵向多内容排列',\n  key: 'Many'\n}\nexport default Many\n","import React, { ReactElement } from 'react'\nimport { InputNumber, Select } from 'antd'\n\nexport type Unit = 'px' | '%'\nexport interface SizeInputValue {\n  size: number\n  unit: Unit\n}\nconst SizeSelect = (props: { value: Unit, onChange: (value: Unit) => void }) => (\n  <Select value={props.value} onChange={props.onChange}>\n    <Select.Option value=\"px\">px</Select.Option>\n    <Select.Option value=\"%\">%</Select.Option>\n  </Select>\n)\n\nexport interface SizeInputStyleDefinition<T> {\n  defaultValue: T\n  // 在 blueprint 区域显示的内容\n  Blueprint: (props: {value: T, onChange: (value: T) => void}) => ReactElement\n}\n\nexport const SizeInputStyle: SizeInputStyleDefinition<SizeInputValue> = {\n  Blueprint (props: { value: SizeInputValue; onChange: (value: SizeInputValue) => void }) {\n    return (\n      <InputNumber\n        min=\"0\"\n        max=\"999\"\n        style={{ width: 190 }}\n        value={String(props.value.size)}\n        onChange={(v) => props.onChange({ ...props.value, size: Number(v) })}\n        addonAfter={<SizeSelect value={props.value.unit} onChange={v => props.onChange({ ...props.value, unit: v })}/>}\n      />\n    )\n  },\n  defaultValue: {\n    size: 0,\n    unit: 'px'\n  }\n}\n"],"sourceRoot":""}