{"version":3,"sources":["definition/styles/color.tsx","definition/styles/padding.tsx","definition/styles/min-height.tsx","definition/styles/max-height.tsx","definition/styles/justify-content.tsx","definition/styles/font-size.tsx","definition/styles/font-weight.tsx","definition/styles/ellipsis.tsx","definition/styles/flex-direction.tsx","definition/styles/flex-grow.tsx","definition/styles/align-items.tsx","definition/styles/text-indent.tsx","definition/styles/letter-spacing.tsx","definition/styles/min-width.tsx","definition/styles/max-width.tsx","definition/styles/border.tsx","definition/styles/utils.ts","definition/content/components/metadata-input.tsx","definition/content/text.tsx","template/editor/types.ts","components/Header.tsx","asserts/images/logo.png","home/index.tsx","errors/error-404.tsx","plugins/moment.ts","plugins/database.ts","metadata/index.tsx","metadata/editor/json-input.tsx","metadata/editor/overview.tsx","metadata/editor/index.tsx","template/index.tsx","template/editor/material/index.tsx","template/editor/blueprint/layout-contents.tsx","template/editor/blueprint/page-layouts.tsx","template/editor/blueprint/index.tsx","template/editor/building/index.tsx","definition/content/utils.ts","definition/layout/utils.ts","definition/utils.ts","template/editor/index.tsx","preview/index.tsx","preview/editor/render.tsx","preview/editor/json-editor.tsx","preview/editor/index.tsx","plugins/routing.tsx","App.tsx","reportWebVitals.ts","index.tsx","definition/index.ts","definition/layout/many.tsx","definition/styles/components/size-input-style.tsx"],"names":["Container","styled","div","Swatch","props","color","Popover","Cover","Color","Blueprint","useState","display","setDisplay","value","onClick","onChange","v","hex","render","defaultValue","description","title","key","PaddingInput","addonBefore","min","max","style","width","String","Number","Padding","top","bottom","left","right","paddingTop","rem","paddingBottom","paddingLeft","paddingRight","MinHeight","SizeInputStyle","minHeight","size","unit","MaxHeight","maxHeight","Categories","JustifyContent","map","it","index","Option","justifyContent","FontSize","fontSize","FontWeight","fontWeight","Ellipsis","checked","checkedChildren","unCheckedChildren","overflow","textOverflow","whiteSpace","FlexDirection","flexDirection","FlexGrow","flexGrow","AlignItems","alignItems","TextIndent","val","textIndent","LetterSpacing","letterSpacing","MinWidth","minWidth","MaxWidth","maxWidth","ItemsContainer","StyleSelect","Items","addonAfter","Border","borderTop","borderBottom","borderLeft","borderRight","px","styles","reduce","pv","Object","assign","definition","LAYOUT_STYLE","renderLayout","includes","createStyle","serialize","STYLE_DEFINITIONS","find","toJSON","this","cloneDeep","InputArea","focus","MetadataContainer","Title","MetadataInput","setFocus","items","search","setSearch","ref","useRef","TextArea","current","height","type","placeholder","ev","message","warn","changeInput","target","onFocus","window","open","metadata","id","EditTwoTone","allowClear","filter","path","alias","changeSearch","length","item","selectionStart","resizableTextArea","textArea","before","substring","after","start","exec","end","entryMetadata","content","trigger","placement","required","getData","Text","Render","result","direction","lines","split","Array","from","Building","onChangeActive","DroppableIds","MaterialType","Nav","isFull","Logo","img","attrs","src","Header","navigate","useNavigate","className","children","Content","Aside","aside","Article","article","Menu","isActive","Description","MENUS","url","Home","location","useLocation","menu","pathname","useEffect","startsWith","Error404","status","subTitle","extra","DATE_TIME","METATABLES","createdAt","updatedAt","json","TEMPLATES","metadataId","EditContainer","EditHeader","EditDescription","Index","useLocalStorage","JSON","stringify","metatables","setMetatables","editId","setEditId","EditItem","uuid4","setValue","parse","error","now","moment","format","onOk","handleSave","onCancel","autoSize","minRows","maxRows","list","findIndex","splice","push","undefined","JsonInput","isArray","jsObject","handleChange","colors","default","background","background_warning","string","number","colon","keys","keys_whiteSpace","primitive","locale","STATUS","add","delete","update","normal","Overview","setItems","precess","itKey","nextKey","prototype","hasOwnProperty","call","sortBy","lastId","maxBy","success","dataSource","pagination","rowKey","Column","dataIndex","align","HeaderContainer","Left","Right","useParams","setMetadata","editCache","setEditCache","setJson","templates","setTemplates","template","disabled","layouts","Groups","Subject","ul","Item","li","isDragging","Clone","Material","PageStyle","sizes","PAPER_SIZES","changeWidth","SyncOutlined","onBlur","changeStyle","droppableId","isDropDisabled","provided","innerRef","flex","updating","okText","cancelText","onConfirm","onSave","danger","CONTENT_DEFINITIONS","draggableId","snapshot","Fragment","draggableProps","dragHandleProps","LayoutContents","onDragEnd","destination","source","contents","offset","droppableProps","isDraggingOver","handleDelete","Elements","PageLayouts","PageSetting","header","footer","indexes","pageIndexes","pageIndex","listIndex","listIndexes","overlay","span","Notice","setCurrent","changeValue","onChangeActiveValue","active","changeContents","activeKey","centered","TabPane","tab","layout","contentId","renderContentOrLayout","contentIndex","layoutIndex","layoutId","section","View","PageContainer","LayoutContainer","LayoutHandle","dropSnapshot","Layout","draggingOverWith","endsWith","createContent","defaultStyles","dit","createByLayoutDefinition","createLayout","Many","createByContentDefinition","LAYOUT_DEFINITIONS","createByLayoutSerialize","flattenData","data","valueKey","getRenderData","texts","text","replace","match","p1","trim","join","deserializePage","page","DEFAULT_TEMPLATE_STYLES","Editor","renderData","pageCache","setPageCache","pageSerialize","setPage","setActive","changeActive","contentDefinition","sourceLayout","destinationLayout","idx","back","temps","Preview","RenderContainer","PageImg","IFRAME_ID","canvas","setCanvas","toCanvas","html","a","o1","document","getElementById","body","removeChild","iframe","createElement","visibility","position","srcdoc","SCALE","appendChild","Promise","resolve","timer","setInterval","contentDocument","clearInterval","html2Canvas","o2","renderCanvas","pageable","offsetHeight","scrollHeight","i","outerHTML","oldIframe","then","tests","doc","JsPDF","dataURL","toDataURL","addPage","addImage","save","download","wind","write","setTimeout","print","close","alt","JsonEditor","Routing","basename","element","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","ContentContainer","SizeSelect"],"mappings":"wLAKMA,EAAYC,IAAOC,IAAV,+GAOTC,EAASF,IAAOC,IAAV,+NACU,SAAAE,GAAK,OAAIA,EAAMC,SAU/BC,EAAUL,IAAOC,IAAV,iGAOPK,EAAQN,IAAOC,IAAV,kGAQLM,EAAiC,CACrCC,UADqC,SAC1BL,GAA8D,IAAD,EACxCM,oBAAS,GAD+B,mBAC/DC,EAD+D,KACtDC,EADsD,KAGtE,OACE,eAACZ,EAAD,WACE,cAACG,EAAD,CAAQE,MAAOD,EAAMS,MAAOC,QAAS,kBAAMF,GAAW,MACrDD,GACC,eAACL,EAAD,WACE,cAACC,EAAD,CAAOO,QAAS,kBAAMF,GAAW,MACjC,cAAC,IAAD,CAAcP,MAAOD,EAAMS,MAAOE,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAASC,EAAEC,eAM9EC,OAhBqC,SAgB7BL,GACN,MAAO,CAAER,MAAOQ,IAElBM,aAAc,OACdC,YAAa,GACbC,MAAO,2BACPC,IAAK,SAEQd,a,oGCxDTR,EAAYC,IAAOC,IAAV,2CAITqB,EAAe,SAACnB,GAAD,OACnB,cAAC,IAAD,CAAaoB,YAAapB,EAAMiB,MAAOI,IAAI,IAAIC,IAAI,MAAMC,MAAO,CAAEC,MAAO,QAAUf,MAAOgB,OAAOzB,EAAMS,OAAQE,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAASe,OAAOd,QAGlJe,EAAsF,CAC1FtB,UAD0F,SAC/EL,GACT,OACE,eAACJ,EAAD,WACE,cAACuB,EAAD,CAAcF,MAAM,SAAIR,MAAOT,EAAMS,MAAMmB,IAAKjB,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCmB,IAAKhB,QACvG,cAACO,EAAD,CAAcF,MAAM,SAAIR,MAAOT,EAAMS,MAAMoB,OAAQlB,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCoB,OAAQjB,QAC7G,cAACO,EAAD,CAAcF,MAAM,SAAIR,MAAOT,EAAMS,MAAMqB,KAAMnB,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCqB,KAAMlB,QACzG,cAACO,EAAD,CAAcF,MAAM,SAAIR,MAAOT,EAAMS,MAAMsB,MAAOpB,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCsB,MAAOnB,YAIjHE,OAX0F,SAWlFL,GACN,MAAO,CACLuB,WAAYC,YAAIxB,EAAMmB,KACtBM,cAAeD,YAAIxB,EAAMoB,QACzBM,YAAaF,YAAIxB,EAAMqB,MACvBM,aAAcH,YAAIxB,EAAMsB,SAG5BhB,aAAc,CAAEc,OAAQ,EAAGC,KAAM,EAAGC,MAAO,EAAGH,IAAK,GACnDX,MAAO,eACPD,YAAa,GACbE,IAAK,WAGQS,a,mECnCTU,EAA0C,2BAC3CC,KAD2C,IAE9CxB,OAF8C,SAEtCL,GACN,MAAO,CAAE8B,UAAW9B,EAAM+B,KAAuB,OAAf/B,EAAMgC,KAAgBR,YAAIxB,EAAM+B,MAAhC,UAA2C/B,EAAM+B,MAAjD,OAAwD/B,EAAMgC,MAAU,SAE5GxB,MAAO,qBACPD,YAAa,GACbE,IAAK,cAEQmB,a,mECTTK,EAA0C,2BAC3CJ,KAD2C,IAE9CxB,OAF8C,SAEtCL,GACN,MAAO,CAAEkC,UAAWlC,EAAM+B,KAAuB,OAAf/B,EAAMgC,KAAgBR,YAAIxB,EAAM+B,MAAhC,UAA2C/B,EAAM+B,MAAjD,OAAwD/B,EAAMgC,MAAU,SAE5GxB,MAAO,qBACPD,YAAa,GACbE,IAAK,cAEQwB,a,iCCbf,+BAMME,EAAiD,CACrD,CACE3B,MAAO,eACPR,MAAO,cAET,CACEQ,MAAO,eACPR,MAAO,UAET,CACEQ,MAAO,eACPR,MAAO,YAET,CACEQ,MAAO,2BACPR,MAAO,iBAET,CACEQ,MAAO,2BACPR,MAAO,gBAET,CACEQ,MAAO,2BACPR,MAAO,iBAILoC,EAA4C,CAChDxC,UADgD,SACrCL,GACT,OACE,cAAC,IAAD,CACES,MAAOT,EAAMS,MACbE,SAAUX,EAAMW,SAChBY,MAAO,CAAEC,MAAO,KAHlB,SAKGoB,EAAWE,KAAI,SAACC,EAAIC,GACnB,OAAQ,cAAC,IAAOC,OAAR,CAA2BxC,MAAOsC,EAAGtC,MAArC,SAA6CsC,EAAG9B,OAA5B+B,SAKpClC,OAdgD,SAcxCL,GACN,MAAO,CAAEyC,eAAgBzC,IAE3BQ,MAAO,iCACPF,aAAc,aACdC,YAAa,GACbE,IAAK,kBAGQ2B,a,iCCxDf,wCAKMM,EAAoC,CACxC9C,UADwC,SAC7BL,GACT,OACE,cAAC,IAAD,CAAaqB,IAAI,KAAKC,IAAI,KAAKC,MAAO,CAAEC,MAAO,KAAOf,MAAOgB,OAAOzB,EAAMS,OAAQE,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAASe,OAAOd,QAG7HE,OANwC,SAMhCL,GACN,MAAO,CACL2C,SAAUnB,YAAIxB,KAGlBM,aAAc,GACdC,YAAa,GACbC,MAAO,2BACPC,IAAK,YAGQiC,a,iCCtBf,+BAIME,EAAsC,CAC1ChD,UAD0C,SAC/BL,GACT,OACE,cAAC,IAAD,CACES,MAAOT,EAAMS,MACbE,SAAUX,EAAMW,SAChBY,MAAO,CAAEC,MAAO,KAHlB,SAKG,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,KAAKsB,KAAI,SAACC,EAAIC,GACvC,OAAQ,cAAC,IAAOC,OAAR,CAA2BxC,MAAOsC,EAAlC,SAAuCA,GAAnBC,SAKpClC,OAd0C,SAclCL,GACN,MAAO,CAAE6C,WAAY7C,IAEvBM,aAAc,IACdC,YAAa,GACbC,MAAO,2BACPC,IAAK,cAGQmC,a,iCC3Bf,gCAIME,EAAqC,CACzClD,UADyC,SAC9BL,GACT,OACE,cAAC,IAAD,CAAQwD,QAASxD,EAAMS,MAAOgD,gBAAgB,eAAKC,kBAAkB,eAAK/C,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAASC,OAG9GE,OANyC,SAMjCL,GACN,MAAO,CAAEkD,SAAUlD,EAAQ,SAAW,QAASmD,aAAcnD,EAAQ,WAAa,QAASoD,WAAY,WAEzG9C,cAAc,EACdC,YAAa,oDACbC,MAAO,2BACPC,IAAK,YAGQqC,a,iCCnBf,gCAKMO,EAA4C,CAChD7C,MAAO,eACPF,aAAc,MACdC,YAAa,GACbX,UAJgD,SAIrCL,GACT,OACE,cAAC,IAAD,CAAQwD,QAAyB,QAAhBxD,EAAMS,MAAiBgD,gBAAgB,SAAIC,kBAAkB,SAAI/C,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAASC,EAAI,MAAQ,cAGlIE,OATgD,SASxCL,GACN,MAAO,CAAEsD,cAAetD,IAE1BS,IAAK,iBAEQ4C,a,iCCnBf,gCAIME,EAAoC,CACxC3D,UADwC,SAC7BL,GACT,OACE,cAAC,IAAD,CAAaqB,IAAI,IAAIC,IAAI,KAAKC,MAAO,CAAEC,MAAO,KAAOf,MAAOgB,OAAOzB,EAAMS,OAAQE,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAASe,OAAOd,QAG5HE,OANwC,SAMhCL,GACN,MAAO,CAAEwD,SAAUxD,IAErBM,aAAc,EACdE,MAAO,iCACPD,YAAa,GACbE,IAAK,YAGQ8C,a,iCCnBf,+BAMMpB,EAAmD,CACvD,CACE3B,MAAO,eACPR,MAAO,cAET,CACEQ,MAAO,eACPR,MAAO,UAET,CACEQ,MAAO,eACPR,MAAO,aAILyD,EAAwC,CAC5C7D,UAD4C,SACjCL,GACT,OACE,cAAC,IAAD,CACES,MAAOT,EAAMS,MACbE,SAAUX,EAAMW,SAChBY,MAAO,CAAEC,MAAO,KAHlB,SAKGoB,EAAWE,KAAI,SAACC,EAAIC,GACnB,OAAQ,cAAC,IAAOC,OAAR,CAA2BxC,MAAOsC,EAAGtC,MAArC,SAA6CsC,EAAG9B,OAA5B+B,SAKpClC,OAd4C,SAcpCL,GACN,MAAO,CAAE0D,WAAY1D,IAEvBQ,MAAO,iCACPF,aAAc,SACdC,YAAa,GACbE,IAAK,cAGQgD,a,iCC5Cf,0CAKME,EAAsC,CAC1C/D,UAD0C,SAC/BL,GACT,OACE,cAAC,IAAD,CAAaqB,IAAI,IAAIC,IAAI,MAAMC,MAAO,CAAEC,MAAO,KAAOf,MAAOgB,OAAOzB,EAAMS,OAAQE,SAAU,SAAC0D,GAAD,OAASrE,EAAMW,SAASe,OAAO2C,QAG/HvD,OAN0C,SAMlCL,GACN,MAAO,CAAE6D,WAAYrC,YAAIxB,KAE3BM,aAAc,EACdC,YAAa,GACbC,MAAO,2BACPC,IAAK,cAEQkD,a,iCCnBf,gCAIMG,EAAyC,CAC7ClE,UAD6C,SAClCL,GACT,OACE,cAAC,IAAD,CAAaqB,IAAI,IAAIC,IAAI,MAAMC,MAAO,CAAEC,MAAO,KAAOf,MAAOgB,OAAOzB,EAAMS,OAAQE,SAAU,SAAC0D,GAAD,OAASrE,EAAMW,SAASe,OAAO2C,QAG/HtD,aAAc,EACdC,YAAa,GACbE,IAAK,gBACLJ,OAT6C,SASrCL,GACN,MAAO,CAAE+D,cAAe/D,IAE1BQ,MAAO,4BAEMsD,a,mECdTE,EAAyC,2BAC1CnC,KAD0C,IAE7CxB,OAF6C,SAErCL,GACN,MAAO,CAAEiE,SAAUjE,EAAM+B,KAAuB,OAAf/B,EAAMgC,KAAgBR,YAAIxB,EAAM+B,MAAhC,UAA2C/B,EAAM+B,MAAjD,OAAwD/B,EAAMgC,MAAU,SAE3GxB,MAAO,qBACPD,YAAa,GACbE,IAAK,aAEQuD,a,mECTTE,EAAyC,2BAC1CrC,KAD0C,IAE7CxB,OAF6C,SAErCL,GACN,MAAO,CAAEmE,SAAUnE,EAAM+B,KAAuB,OAAf/B,EAAMgC,KAAgBR,YAAIxB,EAAM+B,MAAhC,UAA2C/B,EAAM+B,MAAjD,OAAwD/B,EAAMgC,MAAU,SAE3GxB,MAAO,qBACPD,YAAa,GACbE,IAAK,aAEQyD,a,uHCNT/E,EAAYC,IAAOC,IAAV,2CAIT+E,EAAiBhF,IAAOC,IAAV,yKA2BdgF,EAAc,SAAC9E,GAAD,OAClB,eAAC,IAAD,CAAQS,MAAOT,EAAMS,MAAOE,SAAUX,EAAMW,SAA5C,UACE,cAAC,IAAOsC,OAAR,CAAexC,MAAM,QAArB,0BACA,cAAC,IAAOwC,OAAR,CAAexC,MAAM,SAArB,0BACA,cAAC,IAAOwC,OAAR,CAAexC,MAAM,SAArB,8BAIEsE,EAAQ,SAAC/E,GAAD,OACZ,eAAC6E,EAAD,WACE,cAAC,IAAD,CACEzD,YAAapB,EAAMiB,MACnBI,IAAI,IACJC,IAAI,MACJC,MAAO,CAAEC,MAAO,KAChBf,MAAOgB,OAAOzB,EAAMS,MAAM+B,MAC1B7B,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiC+B,KAAMd,OAAOd,OAC/DoE,WAAY,cAACF,EAAD,CAAarE,MAAOT,EAAMS,MAAMc,MAAOZ,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCc,MAAOX,UAE9G,cAAC,UAAMP,UAAP,CAAiBI,MAAOT,EAAMS,MAAMR,MAAOU,SAAU,SAAAC,GAAC,OAAIZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCR,MAAOW,YAGhGqE,EAAiC,CACrC5E,UADqC,SAC1BL,GACT,OACE,eAACJ,EAAD,WACE,cAACmF,EAAD,CAAO9D,MAAM,SAAIR,MAAOT,EAAMS,MAAMmB,IAAKjB,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCmB,IAAKhB,QAChG,cAACmE,EAAD,CAAO9D,MAAM,SAAIR,MAAOT,EAAMS,MAAMoB,OAAQlB,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCoB,OAAQjB,QACtG,cAACmE,EAAD,CAAO9D,MAAM,SAAIR,MAAOT,EAAMS,MAAMqB,KAAMnB,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCqB,KAAMlB,QAClG,cAACmE,EAAD,CAAO9D,MAAM,SAAIR,MAAOT,EAAMS,MAAMsB,MAAOpB,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCsB,MAAOnB,YAI1GE,OAXqC,SAW7BL,GACN,MAAO,CACLyE,UAAU,GAAD,OAAKjD,YAAIxB,EAAMmB,IAAIY,MAAnB,YAA4B/B,EAAMmB,IAAIL,MAAtC,YAA+Cd,EAAMmB,IAAI3B,OAClEkF,aAAa,GAAD,OAAKlD,YAAIxB,EAAMoB,OAAOW,MAAtB,YAA+B/B,EAAMoB,OAAON,MAA5C,YAAqDd,EAAMoB,OAAO5B,OAC9EmF,WAAW,GAAD,OAAKnD,YAAIxB,EAAMqB,KAAKU,MAApB,YAA6B/B,EAAMqB,KAAKP,MAAxC,YAAiDd,EAAMqB,KAAK7B,OACtEoF,YAAY,GAAD,OAAKpD,YAAIxB,EAAMsB,MAAMS,MAArB,YAA8B/B,EAAMsB,MAAMR,MAA1C,YAAmDd,EAAMsB,MAAM9B,SAG9Ec,aAAc,CACZc,OAAQ,CAAEW,KAAM,EAAGvC,MAAO,OAAQsB,MAAO,SACzCO,KAAM,CAAEU,KAAM,EAAGvC,MAAO,OAAQsB,MAAO,SACvCQ,MAAO,CAAES,KAAM,EAAGvC,MAAO,OAAQsB,MAAO,SACxCK,IAAK,CAAEY,KAAM,EAAGvC,MAAO,OAAQsB,MAAO,UAExCP,YAAa,GACbC,MAAO,qBACPC,IAAK,UAGQ+D,a,wMC/EFhD,EAAM,SAACqD,GAClB,MAAM,GAAN,OAAUA,EAAK,IAAf,QAGWxE,EAAS,SAACyE,GACrB,OAAOA,EAAOC,QAAsB,SAACC,EAAI1C,GACvC,OAAO2C,OAAOC,OAAOF,EAAI1C,EAAG6C,WAAW9E,OAAOiC,EAAGtC,UAChD,CAAEF,QAAS,UAGVsF,EAAe,CAAC,gBAAiB,iBAAkB,aAAc,WAAY,YAAa,WAAY,YAAa,YAC5GC,EAAe,SAACP,GAC3B,OAAOA,EAAOC,QAAsB,SAACC,EAAI1C,GACvC,OAAK8C,EAAaE,SAAShD,EAAG6C,WAAW1E,KAGlCwE,OAAOC,OAAOF,EAAI1C,EAAG6C,WAAW9E,OAAOiC,EAAGtC,QAFxCgF,IAGR,CAAElF,QAAS,UAGHyF,EAAc,SAACzE,EAA8Cd,GACxE,GAAKc,EAAyBqE,WAAY,CACxC,IAAMK,EAAY1E,EAClB,MAAO,CACLd,MAAK,OAAEA,QAAF,IAAEA,IAASwF,EAAUxF,MAC1BmF,WAAYM,IAAkBC,MAAK,SAAApD,GAAE,OAAIA,EAAG7B,MAAQ+E,EAAUL,cAC9DQ,OAHK,WAIH,MAAO,CACLR,WAAYS,KAAKT,WAAW1E,IAC5BT,MAAO4F,KAAK5F,SAKpB,IAAMmF,EAAarE,EACnB,MAAO,CACLd,MAAO6F,oBAAUV,EAAW7E,cAC5B6E,WAAYA,EACZQ,OAHK,WAIH,MAAO,CACLR,WAAYS,KAAKT,WAAW1E,IAC5BT,MAAK,OAAEA,QAAF,IAAEA,IAAS4F,KAAK5F,W,oJC7CvBb,EAAYC,IAAOC,IAAV,4BAGTyG,EAAY1G,IAAOC,IAAV,0DAEX,SAAAE,GAAK,OAAKA,EAAMwG,MAAa,cAAL,MAGtBtG,EAAUL,IAAOC,IAAV,kEAKPK,EAAQN,IAAOC,IAAV,kGAQL2G,EAAoB5G,IAAOC,IAAV,wMAUjB4G,EAAQ7G,IAAOC,IAAV,8JASLiF,EAAQlF,IAAOC,IAAV,0aA6HI6G,EAhGO,SAAC3G,GAA6I,IAAD,EACvIM,oBAAS,GAD8H,mBAC1JkG,EAD0J,KACnJI,EADmJ,OAErItG,mBAAmD,CAAEG,MAAO,GAAIoG,MAAO,KAF8D,mBAE1JC,EAF0J,KAElJC,EAFkJ,KAG3JC,EAAMC,iBAA2B,MAgDvC,OACE,eAACrH,EAAD,WACE,cAAC2G,EAAD,CAAWC,MAAOA,EAAlB,SACE,cAAC,IAAMU,SAAP,CACEF,IAAK,SAAAvG,GAAWuG,EAAIG,QAAU1G,GAC9Bc,MAAO,CAAE6F,OAAuB,WAAfpH,EAAMqH,KAAoB,GAAK,KAChDC,YAAY,iCAAQ7G,MAAOT,EAAMS,MACjCE,SAAU,SAAC4G,GAAD,OArDE,SAAC9G,GACnB,GAAmB,WAAfT,EAAMqH,KACR,OAAOG,IAAQC,KAAK,gEAEtBzH,EAAMW,SAASF,GAiDSiH,CAAYH,EAAGI,OAAOlH,QACxCmH,QAtCQ,WACdhB,GAAS,QAwCNJ,GACC,eAACtG,EAAD,WACE,cAACC,EAAD,CAAOO,QAAS,kBAAMkG,GAAS,MAC/B,eAACH,EAAD,WACE,eAACC,EAAD,CAAOhG,QAAS,kBAAMmH,OAAOC,KAAP,oBAAyB9H,EAAM+H,SAASC,MAA9D,+BAEE,cAACC,EAAA,EAAD,OAEF,cAAC,IAAD,CAAOC,YAAU,EAACzH,MAAOqG,EAAOrG,MAAOE,SAAU,SAAA4G,GAAE,OA1DxC,SAAC9G,GACpB,IAAMoG,EAAQ7G,EAAM+H,SAASlB,MAAMsB,QAAO,SAAApF,GAAE,aAAIA,EAAGqF,KAAKrC,SAAStF,KAAjB,UAA2BsC,EAAGsF,aAA9B,aAA2B,EAAUtC,SAAStF,OAE9FsG,EAAU,CACRtG,QACAoG,UAqD6DyB,CAAaf,EAAGI,OAAOlH,QAAQ6G,YAAY,gDAChE,IAAhCtH,EAAM+H,SAASlB,MAAM0B,QAAiBzB,EAAOrG,OAAiC,IAAxBqG,EAAOD,MAAM0B,SAAmB,qDACvFvI,EAAM+H,SAASlB,MAAM/D,KAAI,SAACC,EAAIC,GAAL,aACxB,eAAC+B,EAAD,CAAmBrE,QAAS,kBAhDlB,SAAC8H,GAAwB,IAAD,MAC5C,GAAmB,WAAfxI,EAAMqH,KACR,OAAOrH,EAAMW,SAAS6H,EAAKJ,MAG7B,IAAMK,EAAc,oBAAGzB,EAAIG,eAAP,iBAAG,EAAauB,yBAAhB,aAAG,EAAgCC,SAASF,sBAA5C,QAA8D,EAC5EpE,EAAG,YAASmE,EAAKH,MAAL,UAAgBG,EAAKH,MAArB,YAA8BG,EAAKR,GAAnC,KAA2CQ,EAAKJ,KAAzD,KACT,GAAuB,IAAnBK,EACFzI,EAAMW,SAAN,UAAkB0D,GAAlB,OAAwBrE,EAAMS,QAC9BuG,EAAIG,QAASuB,kBAAmBC,SAASF,eAAiB,OACrD,GAAIA,IAAmBzI,EAAMS,MAAM8H,OACxCvI,EAAMW,SAAN,UAAkBX,EAAMS,OAAxB,OAAgC4D,QAC3B,CACL,IAAMuE,EAAS5I,EAAMS,MAAMoI,UAAU,EAAGJ,GAClCK,EAAQ9I,EAAMS,MAAMoI,UAAUJ,GAC9BM,EAAQ,aAAaC,KAAKJ,GAC1BK,EAAM,cAAcD,KAAKF,GAE3BC,GAASE,EACXjJ,EAAMW,SAAN,UAAkBiI,EAAOC,UAAU,EAAGE,EAAM/F,QAA5C,OAAqDqB,GAArD,OAA2DyE,EAAMD,UAAUI,EAAIjG,MAAQ,KAEvFhD,EAAMW,SAAN,UAAkBiI,GAAlB,OAA2BvE,GAA3B,OAAiCyE,KA2BOI,CAAcnG,IAAhD,UACE,gCACE,cAAC,IAAD,CAAaoG,QAASpG,EAAGqF,KAAMgB,QAAQ,QAAQC,UAAU,OAAzD,SACE,4BAAG,cAAC,IAAD,CAAKpJ,MAAM,OAAX,0BAAmB8C,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAIsF,aAAvB,QAAgCtF,EAAGqF,WAExC,sBACA,8BACGrF,EAAGuG,UAAa,cAAC,IAAD,CAAKrJ,MAAM,OAAX,2BACf8C,EAAGuG,UAAa,cAAC,IAAD,CAAKrJ,MAAM,MAAX,gCAGtB,8BACE,4BAAID,EAAMuJ,QAAN,YAAoBxG,EAAGqF,KAAvB,YAZIpF,gBChJpBwG,EAA0C,CAC9CtI,IAAK,OACLH,aAAc,GACdwE,OAAQ,GACRvE,YAAa,iHACbC,MAAO,eACPZ,UAN8C,SAMnCL,GACT,OACE,cAAC,EAAD,eAAmBA,KAGvByJ,OAX8C,SAWtCzJ,GACN,IAAKA,EAAM0J,OAET,OAAQ,sBAAMnI,MAAO,CAAEhB,QAAS,UAGlC,IAAMoJ,EAAY3J,EAAMuB,MAAMwC,cAExB6F,EAAQ5J,EAAM0J,OAAOG,MAAM,MAAM1B,QAAO,SAAApF,GAAE,OAAIA,KACpD,MAAkB,WAAd4G,EAEA,qBAAKpI,MAAOvB,EAAMuB,MAAlB,UACGqI,EAAMrB,OAAS,EAAIqB,EAAQE,MAAMC,KAAK/J,EAAM0J,SAAS5G,KAAI,SAACC,EAAIC,GAAY,OAAQ,8BAAkBD,GAARC,QAKjG,qBAAKzB,MAAOvB,EAAMuB,MAAlB,SACE,8BACGqI,EAAM9G,KAAI,SAACC,EAAIC,GAAL,OAAgB,iCAAmBD,EAAG,yBAAXC,WAK9CgH,SAnC8C,SAmCpChK,GACR,IAAKA,EAAM0J,OACT,OAAQ,8BAAM1J,EAAMS,QAEtB,IAAMkJ,EAAY3J,EAAMuB,MAAMwC,cAExB6F,EAAQ5J,EAAM0J,OAAOG,MAAM,MAAM1B,QAAO,SAAApF,GAAE,OAAIA,KACpD,MAAkB,WAAd4G,EAEA,qBAAKpI,MAAOvB,EAAMuB,MAAOb,QAAS,kBAAMV,EAAMiK,kBAA9C,UACGL,EAAMrB,OAAS,EAAIqB,EAAQE,MAAMC,KAAK/J,EAAM0J,SAAS5G,KAAI,SAACC,EAAIC,GAAY,OAAQ,8BAAkBD,GAARC,QAKjG,qBAAKzB,MAAOvB,EAAMuB,MAAOb,QAAS,kBAAMV,EAAMiK,kBAA9C,SACE,8BACGL,EAAM9G,KAAI,SAACC,EAAIC,GAAL,OAAgB,iCAAmBD,EAAG,yBAAXC,YAMjCwG,a,8IC/DHU,EAKAC,E,+FCANvK,EAAYC,IAAOC,IAAV,gJAOTsK,EAAMvK,IAAOC,IAAV,uSACE,SAAAE,GAAK,OAAIA,EAAMqK,OAAS,OAAS,YAC/B,SAAArK,GAAK,OAAIA,EAAMqK,OAAS,SAAW,OAgB1CC,EAAOzK,IAAO0K,IAAIC,OAAM,iBAAO,CAAEC,IC9BxB,wlSD8BF5K,CAAH,4CAsBK6K,EAlBA,SAAC1K,GAA2E,IAAD,EAClF2K,EAAWC,cAEjB,OACE,cAAChL,EAAD,CAAWiL,UAAW7K,EAAM6K,UAA5B,SACE,eAACT,EAAD,CAAKC,OAAM,iBAAErK,QAAF,IAAEA,OAAF,EAAEA,EAAOqK,cAAT,SAAX,UACE,sBAAK3J,QAAS,kBAAMiK,EAAS,MAA7B,UACE,cAACL,EAAD,IACA,kEAIDtK,EAAM8K,eEzCTlL,EAAYC,IAAOC,IAAV,+DAKTiL,EAAUlL,IAAOC,IAAV,6HAQPkL,EAAQnL,IAAOoL,MAAV,2FAMLC,EAAUrL,IAAOsL,QAAV,kGAMPC,EAAOvL,IAAOC,IAAV,6NAMQ,SAAAE,GAAK,OAAwB,IAAnBA,EAAMgD,MAAQ,MACpB,SAAAhD,GAAK,OAAIA,EAAMqL,SAAW,YAAc,aAGxDC,EAAczL,IAAOC,IAAV,uLAUXyL,EAAQ,CACZ,CACEtK,MAAO,8BACPuK,IAAK,YACLxK,YAAa,6HAEf,CACEC,MAAO,8BACPuK,IAAK,YACLxK,YAAa,wFAEf,CACEC,MAAO,8BACPuK,IAAK,WACLxK,YAAa,4HAEf,CACEC,MAAO,4BACPuK,IAAK,6CA+CMC,EA3CF,WACX,IAAMd,EAAWC,cACXc,EAAWC,cACXC,EAAOL,EAAMpF,MAAK,SAAApD,GAAE,OAAIA,EAAGyI,MAAQE,EAASG,YAQlD,GANAC,qBAAU,WACHF,GACHjB,EAASY,EAAM,GAAGC,SAIjBI,EACH,OAAO,KAWT,OACE,eAAC,EAAD,WACE,cAAC,EAAD,IACA,eAACb,EAAD,WACE,cAACC,EAAD,UACGO,EAAMzI,KAAI,SAACC,EAAIC,GAAL,OACT,cAACoI,EAAD,CAAkBpI,MAAOA,EAAOqI,SAAUtI,EAAGyI,MAAQI,EAAKJ,IAAK9K,QAAS,WAdrE,IAAC8K,KAc+EzI,EAAGyI,KAbtFO,WAAW,QACjBlE,OAAOC,KAAK0D,GAEZb,EAASa,IAUH,SAA6FzI,EAAG9B,OAArF+B,QAGf,eAACkI,EAAD,WACE,cAACI,EAAD,UACGM,EAAK5K,cAER,cAAC,IAAD,c,kBCxFKgL,GAfE,WACf,IAAMrB,EAAWC,cACjB,OACE,gCACE,cAAC,EAAD,IACA,cAAC,IAAD,CACEqB,OAAO,MACPhL,MAAM,MACNiL,SAAS,uCACTC,MAAO,cAAC,KAAD,CAAQ9E,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,MAA/C,4C,6ECZFyB,GAAS,UAFF,aAEE,YADF,YCCPC,GAAyB,CACpC,CACErE,GAAI,UACJ/G,MAAO,2BACPD,YAAa,2BACbsL,UAAW,sBACXC,UAAW,sBACX1F,MAAO,CAAC,CAAEmB,GAAI,EAAGI,KAAM,SAAUkB,UAAU,GAAQ,CAAEtB,GAAI,EAAGI,KAAM,eAAgBkB,UAAU,GAAQ,CAAEtB,GAAI,EAAGI,KAAM,gBAAiBkB,UAAU,GAAQ,CAAEtB,GAAI,EAAGI,KAAM,SAAUkB,UAAU,GAAQ,CAAEtB,GAAI,EAAGI,KAAM,SAAUkB,UAAU,GAAQ,CAAEtB,GAAI,EAAGI,KAAM,QAASkB,UAAU,IAC9QkD,KAAM,qtBAIGC,GAAwB,CACnC,CACEzE,GAAI,UACJ/G,MAAO,2BACPD,YAAa,2BACbsL,UAAW,sBACXC,UAAW,sBACXG,WAAY,UAEZF,KAAM,+hV,SCZJ5M,GAAYC,IAAOC,IAAV,mDAITiF,GAAQlF,IAAOC,IAAV,yfAiCL6M,GAAgB9M,IAAOC,IAAV,wFAKb8M,GAAa/M,IAAOC,IAAV,gMAcV+M,GAAkBhN,IAAOC,IAAV,8JAsHNgN,GAzGD,WACZ,IAAMnC,EAAWC,cADC,EAEkBmC,aAAgB,gBAAiBC,KAAKC,UAAUZ,KAFlE,oBAEXa,EAFW,KAECC,EAFD,OAIU7M,qBAJV,oBAIX8M,EAJW,KAIHC,EAJG,KAMZC,EAAW,SAACtN,GAAqG,IAAD,EAC1FM,mBAAmBN,EAAMS,OAAS,CAC1DuH,GAAIuF,eACJtM,MAAO,GACPD,YAAa,GACbsL,UAAW,GACXE,KAAM,KACN3F,MAAO,GACP0F,UAAW,KARuG,oBAC7G9L,EAD6G,KACtG+M,EADsG,KAwCpH,OACE,eAACb,GAAD,WACE,eAACC,GAAD,WACE,yEACA,cAAC,KAAD,CAAOnM,MAAOA,EAAMQ,MAAOqG,YAAY,iCAAQ3G,SAAU,SAAA4G,GAAE,OAAIiG,EAAS,6BAAK/M,GAAN,IAAaQ,MAAOsG,EAAGI,OAAOlH,aACnGT,EAAMS,OAASyM,EAAW3E,QAC1B,cAAC,KAAD,CAAQjB,YAAY,mDAAWY,YAAU,EAAC3G,MAAO,CAAEC,MAAO,KAAOb,SAvB5C,SAACqH,GAC5B,IAAMD,EAAWiF,KAAKS,MAAMP,GAAY/G,MAAK,SAACpD,GAAD,OAAkBA,EAAGiF,KAAOA,KAEvEwF,EADEzF,EACO,6BACJtH,GADG,IAENoG,MAAOkB,EAASlB,MAChB2F,KAAMzE,EAASyE,OAGR,6BACJ/L,GADG,IAENoG,MAAO,GACP2F,KAAM,SAWJ,SACGQ,KAAKS,MAAMP,GAAYpK,KAAI,SAACC,GAAD,OAAmB,cAAC,KAAOE,OAAR,CAA2BxC,MAAOsC,EAAGiF,GAArC,SAA0CjF,EAAG9B,OAAzB8B,EAAGiF,SAG1E,cAAC,KAAD,CAAQX,KAAK,UAAU3G,QAAS,kBAvCnB,WACjB,IAAKD,EAAMQ,MACT,OAAOuG,KAAQkG,MAAM,kCAEvB,IAAMC,EAAMC,OAASC,OAAOzB,IAC5BpM,EAAM8N,KAAN,6BACKrN,GADL,IAEE6L,UAAW7L,EAAM6L,WAAaqB,EAC9BpB,UAAWoB,KA+B6BI,IAAtC,SAAsDtN,EAAM6L,UAAY,2BAAS,6BAChFtM,EAAMS,OAAU,cAAC,KAAD,CAAQ4G,KAAK,UAAU3G,QAAS,kBAAMV,EAAMgO,UAAYhO,EAAMgO,YAA9D,yCAEnB,eAACnB,GAAD,WACE,gEACA,cAAC,KAAM3F,SAAP,CAAgBzG,MAAOA,EAAMO,YAAaL,SAAU,SAAA4G,GAAE,OAAIiG,EAAS,6BAAK/M,GAAN,IAAaO,YAAauG,EAAGI,OAAOlH,UAAUwN,SAAU,CAAEC,QAAS,EAAGC,QAAS,GAAK7G,YAAY,0CAMpKyG,EAAa,SAACtN,GAClB,IAAM2N,EAAOpB,KAAKS,MAAMP,GAClBlK,EAAQoL,EAAKC,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOvH,EAAMuH,OACpC,IAAXhF,EACFoL,EAAKE,OAAOtL,EAAO,EAAGvC,GAEtB2N,EAAKG,KAAK9N,GAEZ0M,EAAcH,KAAKC,UAAUmB,IAC7Bf,OAAUmB,IAGZ,OACE,eAAC,GAAD,WACE,cAAClB,EAAD,CAAUQ,KAAM,SAAArN,GAAK,OAAIsN,EAAWtN,MAEjCuM,KAAKS,MAAMP,GAA2BpK,KAAI,SAAAC,GAAE,OAAIA,EAAGiF,KAAOoF,EACxD,cAACE,EAAD,CAAsB7M,MAAOsC,EAAI+K,KAAM,SAAArN,GAAK,OAAIsN,EAAWtN,IAAQuN,SAAU,WAAQX,OAAUmB,KAAhFzL,EAAGiF,IAEnB,eAACjD,GAAD,WACE,gCACE,8BAAMhC,EAAG9B,QACT,wBACA,8BAAM8B,EAAGwJ,YACT,8BAAK,cAAC,KAAD,CAAQlF,KAAK,UAAU3G,QAAS,kBAAM2M,EAAUtK,EAAGiF,KAAnD,2CAEP,gCACE,8BAAMjF,EAAG/B,cACT,wBACA,8BAAK,cAAC,KAAD,CAAQqG,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,aAAD,OAAc5H,EAAGiF,MAA/D,6CAVGjF,EAAGiF,W,+BChKnBpI,GAAYC,IAAOC,IAAV,wFA6CA2O,GAvCG,SAACzO,GAajB,OACE,cAAC,GAAD,UACE,cAAC,KAAD,CACEgI,GAAK,cACLV,YAAatH,EAAMS,MACnBE,SAAU,SAAC+I,GAAD,OAjBK,SAACA,GACpB,IAAKA,EAAOgE,MAAO,CACjB,IAAKhE,EAAO8C,KACV,OAAOxM,EAAMW,SAAS,GAAI,MAE5B,GAAImJ,MAAM4E,QAAQhF,EAAOiF,UACvB,OAAOnH,KAAQkG,MAAM,4CAEvB1N,EAAMW,SAAS+I,EAAOiF,SAAUjF,EAAO8C,OASVoC,CAAalF,IACxCmF,OAAW,CACTC,QAAS,OACTC,WAAY,UACZC,mBAAoB,OACpBC,OAAQ,UACRC,OAAQ,UACRC,MAAO,UACPC,KAAM,UACNC,gBAAiB,UACjBC,UAAW,UACX5B,MAAO,WAET6B,OAAWA,KACX/N,MAAQ,OACR4F,OAAS,Y,0DCpCXxH,GAAYC,IAAOC,IAAV,4BAGT4K,GAAS7K,IAAOC,IAAV,qZAyBNiL,GAAUlL,IAAOC,IAAV,mDAMP0P,GAAS,CACbC,IAAK,CACHxP,MAAO,UACPgB,MAAO,gBAETyO,OAAQ,CACNzP,MAAO,OACPgB,MAAO,gBAET0O,OAAQ,CACN1P,MAAO,UACPgB,MAAO,gBAET2O,OAAQ,CACN3P,WAAOuO,EACPvN,MAAO,WAyJI4O,GA7IE,SAAC7P,GAChB,IAAM2K,EAAWC,cADiF,EAExEtK,mBAAqB,IAFmD,oBAE3FuG,EAF2F,KAEpFiJ,EAFoF,KAIlGhE,qBAAU,WACR,IAAMpC,EAAkC,IAExB,SAAVqG,EAAW7O,EAAaT,GAC5B,QAAc+N,IAAV/N,GAAiC,OAAVA,EACzBiJ,EAAOxI,IAAO,OACT,GAAI,CAAC,SAAU,SAAU,WAAW6E,gBAAgBtF,QACrC+N,IAAhB9E,EAAOxI,KACTwI,EAAOxI,IAAO,QAEX,GAAI4I,MAAM4E,QAAQjO,GACvB,GAAqB,IAAjBA,EAAM8H,OACRmB,EAAO,GAAD,OAAIxI,EAAJ,QAAe,OAChB,GAAKT,EAAM,IAA0B,kBAAbA,EAAM,GAE9B,CAAC,IAAD,iBACYA,GADZ,IACL,2BAAwB,CAAC,IAAdsC,EAAa,QACtB,IAAK,IAAMiN,KAASjN,EAAI,CACtB,IAAMsB,EAAMtB,EAAGiN,QACHxB,IAARnK,GAA6B,OAARA,EACvBqF,EAAO,GAAD,OAAIxI,EAAJ,cAAa8O,KAAW,EACrB,CAAC,SAAU,SAAU,WAAWjK,gBAAgBtF,SACrC+N,IAAhB9E,EAAOxI,KACTwI,EAAOxI,IAAO,KARjB,oCADLwI,EAAO,GAAD,OAAIxI,EAAJ,QAAe,OAgBvB,IAAK,IAAM+O,KAAWxP,EAChBiF,OAAOwK,UAAUC,eAAeC,KAAK3P,EAAOwP,IAC9CF,EAAQ,GAAD,OAAI7O,GAAJ,OAAUA,EAAM,IAAM,IAAtB,OAA2B+O,GAAWxP,EAAMwP,IAK3DF,CAAQ,GAAI/P,EAAMwM,MAClB,IAAM4B,EAAmBpO,EAAMS,MAAMoG,MAAM/D,KAAI,SAAAC,GAAE,MAAK,CACpDiF,GAAIjF,EAAGiF,GACPI,KAAMrF,EAAGqF,KACTC,MAAOtF,EAAGsF,MACV4D,YAA4BuC,IAApB9E,EAAO3G,EAAGqF,MAAsB,SAAW,SACnDkB,SAAUvG,EAAGuG,aA3CD,WA8CHpI,GACEkN,EAAKjI,MAAK,SAAApD,GAAE,OAAIA,EAAGqF,OAASlH,MAErCkN,EAAKG,KAAK,CACRnG,KAAMlH,EACN+K,OAAQ,MACR3C,SAAUI,EAAOxI,MANvB,IAAK,IAAMA,KAAOwI,EAAS,EAAhBxI,GAUX4O,EAASO,kBAAOjC,EAAM,WACrB,CAACpO,EAAMwM,KAAMxM,EAAMS,MAAMoG,QAE5B,IA6BM+H,EAAe,SAACpG,GACpB,IAAMxF,EAAQ6D,EAAMwH,WAAU,SAAAtL,GAAE,OAAIA,EAAGqF,OAASI,EAAKJ,QAC/CrF,EAAK/C,EAAMS,MAAMoG,MAAM7D,GACR,QAAhBwF,EAAKyD,SACJzD,EAAKc,WAAavG,EAAGuG,UAAYd,EAAKH,QAAUtF,EAAGsF,MACrDG,EAAKyD,OAAS,SAEdzD,EAAKyD,OAAS,UAGlBpF,EAAMyH,OAAOtL,EAAO,EAAGwF,GACvBsH,EAAS,aAAIjJ,KAGf,OACE,eAAC,GAAD,WACE,eAAC,GAAD,WACE,gCACE,8BAAM7G,EAAMS,MAAMQ,QAClB,wBACA,8BACE,cAAC,KAAD,CAAQoG,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,cAA/C,4BAEF,8BACG9D,EAAMV,MAAK,SAAApD,GAAE,MAAkB,WAAdA,EAAGkJ,WAAyB,cAAC,KAAD,CAAQ5E,KAAK,UAAU3G,QArD5D,WAAO,IAAD,EACvB,GAAqB,IAAjBmG,EAAM0B,OAAV,CAKA,IAAI+H,GAAiB,UAAAC,iBAAM1J,GAAO,SAAA9D,GAAE,8BAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAIiF,UAAR,QAAc,YAA7B,eAAiCA,KAAM,EACtD0B,EAAyB7C,EAC5BsB,QAAO,SAAApF,GAAE,MAAkB,WAAdA,EAAGkJ,UAChBnJ,KAAI,SAAAC,GAIH,OAHKA,EAAGiF,IACNsI,IAEK,CACLtI,GAAIsI,EACJlI,KAAMrF,EAAGqF,KACTC,MAAOtF,EAAGsF,MACViB,SAAUvG,EAAGuG,aAGnBtJ,EAAMW,SAAN,6BACKX,EAAMS,OADX,IAEEoG,MAAO6C,EACP6C,UAAWqB,OAASC,OAAOzB,IAC3BI,KAAMQ,KAAKC,UAAUjN,EAAMwM,SAE7BhF,KAAQgJ,QAAQ,iCAxBdhJ,KAAQkG,MAAM,mDAmDsC,+BAGlD,8BACG1N,EAAMS,MAAMO,iBAGjB,cAAC,GAAD,UACE,eAAC,KAAD,CAAOyP,WAAY5J,EAAO6J,YAAY,EAAOC,OAAO,OAApD,UACE,cAAC,KAAMC,OAAP,CAAc3P,MAAM,eAAK4P,UAAU,SACnC,cAAC,KAAMD,OAAP,CAAc3P,MAAM,eAAK4P,UAAU,QAAQC,MAAM,SAAShQ,OAAQ,SAACuH,EAAOtF,GAAR,OAChE,cAAC,KAAD,CAAOtC,MAAO4H,EAAO1H,SAAU,SAAA4G,GAAE,OAAIqH,EAAa,6BAAK7L,GAAN,IAAUsF,MAAOd,EAAGI,OAAOlH,YAAS+N,WAEvF,cAAC,KAAMoC,OAAP,CAAc3P,MAAM,2BAAO4P,UAAU,WAAWC,MAAM,SAAShQ,OAAQ,SAACwI,EAAUvG,GAAX,OACrE,cAAC,KAAD,CAAQS,QAAS8F,EAAU7F,gBAAgB,SAAIC,kBAAkB,SAAI/C,SAAU,SAAA2I,GAAQ,OAAIsF,EAAa,6BAAK7L,GAAN,IAAUuG,oBAEnH,cAAC,KAAMsH,OAAP,CAAc3P,MAAM,2BAAO4P,UAAU,SAASC,MAAM,SAAShQ,OAAQ,SAACmL,GAAD,OACnE,cAAC,KAAD,CAAKhM,MAAOuP,GAAOvD,GAAQhM,MAA3B,SAAmCuP,GAAOvD,GAAQhL,oBChMxDrB,GAAYC,IAAOC,IAAV,yOAeTiR,GAAkBlR,YAAO6K,EAAP7K,CAAH,oFAOfmR,GAAOnR,IAAOC,IAAV,kIAQJmR,GAAQpR,IAAOC,IAAV,iIAuDIkD,GA/CD,WACZ,IAAM2H,EAAWC,cACT5C,EAAOkJ,cAAPlJ,GAFU,EAGkB+E,aAAgB,gBAAiBC,KAAKC,UAAUZ,KAHlE,oBAGXa,EAHW,KAGCC,EAHD,KAMZxF,EADOqF,KAAKS,MAAMP,GACJ/G,MAAK,SAAApD,GAAE,OAAIA,EAAGiF,KAAOA,KACzC,IAAKL,EAGH,OAFAH,KAAQkG,MAAM,oDACd/C,EAAS,aACF,KAVS,MAYcrK,mBAASqH,GAZvB,oBAYXI,EAZW,KAYDoJ,EAZC,OAcgBpE,aAAgB,mBAAD,OAAoBhF,EAASC,KAd5D,oBAcXoJ,EAdW,KAcAC,EAdA,OAgBM/Q,mBAAiB0M,KAAKS,MAAM2D,GAAarJ,EAASyE,OAhBxD,oBAgBXA,EAhBW,KAgBL8E,EAhBK,KAgClB,OACE,eAAC,GAAD,WACE,cAACP,GAAD,IACA,gCACE,cAACC,GAAD,UACE,cAAC,GAAD,CAAUvQ,MAAOsH,EAAUyE,KAAMA,EAAM7L,SAnB5B,SAACoH,GAClBoJ,EAAYpJ,GACZ,IAAMqG,EAAOpB,KAAKS,MAAMP,GAClBlK,EAAQoL,EAAKC,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOD,EAASC,MACtDoG,EAAKE,OAAOtL,EAAO,EAAG+E,GACtBoF,EAAcH,KAAKC,UAAUmB,IAC7BiD,EAAa,SAeT,cAACJ,GAAD,UACE,cAAC,GAAD,CAAWxQ,MAAQ+L,EAAO7L,SAbT,SAACF,EAAe+L,GACvC8E,EAAQ7Q,GACR4Q,EAAa7E,eCnEX5M,GAAYC,IAAOC,IAAV,mDAITiF,GAAQlF,IAAOC,IAAV,ojBAqCL6M,GAAgB9M,IAAOC,IAAV,wFAKb8M,GAAa/M,IAAOC,IAAV,gMAcV+M,GAAkBhN,IAAOC,IAAV,8JAyINgN,GA5HD,WACZ,IAAMnC,EAAWC,cADC,EAEGmC,aAAgB,gBAAiBC,KAAKC,UAAUZ,KAA9Da,EAFW,uBAGgBH,aAAgB,eAAgBC,KAAKC,UAAUR,KAH/D,oBAGX8E,EAHW,KAGAC,EAHA,OAKUlR,qBALV,oBAKX8M,EALW,KAKHC,EALG,KAOZC,EAAW,SAACtN,GAAqG,IAAD,EAC1FM,mBAAmBN,EAAMS,OAAS,CAC1DuH,GAAIuF,eACJtM,MAAO,GACPD,YAAa,GACbsL,UAAW,GACXI,WAAY,GACZH,UAAW,GACXC,KAAM,KAR4G,oBAC7G/L,EAD6G,KACtG+M,EADsG,KAyCpH,OACE,eAAC,GAAD,WACE,eAAC,GAAD,WACE,yEACA,cAAC,KAAD,CAAO/M,MAAOA,EAAMQ,MAAOqG,YAAY,iCAAQ3G,SAAU,SAAA4G,GAAE,OAAIiG,EAAS,6BAAK/M,GAAN,IAAaQ,MAAOsG,EAAGI,OAAOlH,aACnGT,EAAMS,OAASyM,EAAW3E,QAC1B,cAAC,KAAD,CAAQjB,YAAY,uCAAS/F,MAAO,CAAEC,MAAO,KAAOf,MAAOA,EAAMiM,iBAAc8B,EAAW7N,SArBrE,SAACqH,GAC5BwF,EAAS,6BACJ/M,GADG,IAENiM,WAAY1E,MAkBR,SACGgF,KAAKS,MAAMP,GAAYpK,KAAI,SAACC,GAAD,OAAmB,cAAC,KAAOE,OAAR,CAA2BxC,MAAOsC,EAAGiF,GAArC,SAA0CjF,EAAG9B,OAAzB8B,EAAGiF,UAGxEhI,EAAMS,OAASyM,EAAW3E,QAC1B,cAAC,KAAD,CAAQjB,YAAY,uCAAS/F,MAAO,CAAEC,MAAO,KAAO0G,YAAU,EAACvH,SAnB1C,SAACqH,GAAgB,IAAD,EACrCyJ,EAAWzE,KAAKS,MAAM8D,GAAWpL,MAAK,SAACpD,GAAD,OAAkBA,EAAGiF,KAAOA,KACxEwF,EAAS,6BACJ/M,GADG,IAENiM,WAAU,iBAAE+E,QAAF,IAAEA,OAAF,EAAEA,EAAU/E,kBAAZ,QAA2BjM,EAAMiM,YAAc,OAerD,SACGM,KAAKS,MAAM8D,GAAWzO,KAAI,SAACC,GAAD,OAAmB,cAAC,KAAOE,OAAR,CAA2BxC,MAAOsC,EAAGiF,GAArC,SAA0CjF,EAAG9B,OAAzB8B,EAAGiF,SAGzE,cAAC,KAAD,CAAQX,KAAK,UAAU3G,QAAS,kBA7CnB,WACjB,IAAKD,EAAMQ,MACT,OAAOuG,KAAQkG,MAAM,kCAEvB,IAAKjN,EAAMiM,WACT,OAAOlF,KAAQkG,MAAM,8CAEvB,IAAMC,EAAMC,OAASC,OAAOzB,IAC5BpM,EAAM8N,KAAN,6BACKrN,GADL,IAEE6L,UAAW7L,EAAM6L,WAAaqB,EAC9BpB,UAAWoB,KAkC6BI,IAAtC,SAAsDtN,EAAM6L,UAAY,2BAAS,6BAChFtM,EAAMS,OAAU,cAAC,KAAD,CAAQ4G,KAAK,UAAU3G,QAAS,kBAAMV,EAAMgO,UAAYhO,EAAMgO,YAA9D,yCAEnB,eAAC,GAAD,WACE,gEACA,cAAC,KAAM9G,SAAP,CAAgBzG,MAAOA,EAAMO,YAAaL,SAAU,SAAA4G,GAAE,OAAIiG,EAAS,6BAAK/M,GAAN,IAAaO,YAAauG,EAAGI,OAAOlH,UAAUwN,SAAU,CAAEC,QAAS,EAAGC,QAAS,GAAK7G,YAAY,0CAMpKyG,EAAa,SAACtN,GAClB,IAAM2N,EAAOpB,KAAKS,MAAMP,GAClBlK,EAAQoL,EAAKC,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOvH,EAAMuH,OACpC,IAAXhF,EACFoL,EAAKE,OAAOtL,EAAO,EAAGvC,GAEtB2N,EAAKG,KAAK9N,GAEZ+Q,EAAaxE,KAAKC,UAAUmB,IAC5Bf,OAAUmB,IAGZ,OACE,eAAC,GAAD,YACItB,EAAW3E,QACX,cAAC,IAAD,CACE0D,OAAO,UACPhL,MAAM,qGACNkL,MACE,cAAC,KAAD,CAAQ9E,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,cAA/C,wCAMLuC,EAAW3E,QAAW,cAAC+E,EAAD,CAAUQ,KAAM,SAAArN,GAAK,OAAIsN,EAAWtN,MAEzDyM,EAAW3E,QAAUyE,KAAKS,MAAM8D,GAAWzO,KAAI,SAACC,GAAD,OAAkBA,EAAGiF,KAAOoF,EACxE,cAACE,EAAD,CAAsB7M,MAAOsC,EAAI+K,KAAM,SAAArN,GAAK,OAAIsN,EAAWtN,IAAQuN,SAAU,WAAQX,OAAUmB,KAAhFzL,EAAGiF,IAEnB,eAAC,GAAD,WACE,gCACA,8BAAMjF,EAAG9B,QACT,wBACA,8BAAM8B,EAAGwJ,YACT,8BAAK,cAAC,KAAD,CAAQlF,KAAK,UAAU3G,QAAS,kBAAM2M,EAAUtK,EAAGiF,KAAnD,2CAEL,gCACA,8BAAMjF,EAAG/B,cACT,wBACA,8BAAK,cAAC,KAAD,CAAQ0Q,UAAW3O,EAAGyJ,MAAkE,IAAzDQ,KAAKS,MAAM1K,EAAGyJ,MAAwBmF,QAAQpJ,OAAclB,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,YAAD,OAAa5H,EAAGiF,MAAjJ,wCACL,8BAAK,cAAC,KAAD,CAAQX,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,aAAD,OAAc5H,EAAGiF,MAA/D,6CAXKjF,EAAGiF,W,mBX5LbkC,K,oBAAAA,E,qBAAAA,M,cAKAC,K,gBAAAA,E,mBAAAA,M,+EYMNvK,GAAYC,IAAOoL,MAAV,qFAMT2G,GAAS/R,IAAOC,IAAV,iIAON4G,GAAQ7G,IAAOC,IAAV,8BAGL+R,GAAUhS,IAAOC,IAAV,iIAQPiF,GAAQlF,IAAOiS,GAAV,oIAQLC,GAAOlS,IAAOmS,GAAV,iOAOM,SAAAhS,GAAK,OAAKA,EAAMiS,WAAa,iBAAmB,gBAM1DC,GAAQrS,YAAOkS,GAAPlS,CAAH,+EA0LIsS,I,2BAAAA,GApLf,SAAmBnS,GAQjB,IAAM2K,EAAWC,cAEXwH,EAAY,SAACpS,GAA6D,IAAD,EACnDM,mBAAyD,CAAEkB,MAAOxB,EAAMS,MAAMe,MAAO4F,OAAQpH,EAAMS,MAAM2G,OAAQnG,MAAO,KADrE,oBACtER,EADsE,KAC/D+M,EAD+D,KAI7E1B,qBAAU,WAAO,IAAD,EACRuG,EAAQC,KAAYnM,MAAK,SAAApD,GAAE,OAAKA,EAAGvB,QAAUf,EAAMe,OAASuB,EAAGqE,SAAW3G,EAAM2G,QAAYrE,EAAGvB,QAAUf,EAAM2G,QAAUrE,EAAGqE,SAAW3G,EAAMe,SACnJgM,EAAS,6BACJ/M,GADG,IAENQ,MAAK,iBAAEoR,QAAF,IAAEA,OAAF,EAAEA,EAAOpR,aAAT,QAAkB,0BAExB,CAACjB,EAAMS,MAAMe,MAAOxB,EAAMS,MAAM2G,OAAQ3G,EAAMe,MAAOf,EAAM2G,SAE9D,IAyBMmL,EAAc,SAAC/Q,GACnBgM,EAAS,6BAAK/M,GAAN,IAAae,WAChBA,EAILxB,EAAMW,SAAN,6BAAoBX,EAAMS,OAA1B,IAAiCe,MAAOA,KAHtCgG,KAAQkG,MAAM,wDAiBlB,OACE,gCACE,eAACkE,GAAD,WACE,cAACC,GAAD,2BACA,eAAC,KAAD,CAAQpR,MAAOA,EAAMQ,MAAOM,MAAO,CAAEC,MAAO,KAAOb,SAfhC,SAACO,GACxB,IAAMmR,EAAQC,KAAYnM,MAAK,SAAApD,GAAE,OAAIA,EAAG9B,QAAUC,KAC9CmR,GACFrS,EAAMW,SAAN,6BACKX,EAAMS,OADX,IAEEe,MAAO6Q,EAAM7Q,MACb4F,OAAQiL,EAAMjL,WASd,UACE,cAAC,KAAOnE,OAAR,CAAexC,MAAO,GAAtB,gCACC6R,KAAYxP,KAAI,SAACC,EAAIC,GAAL,OAAgB,cAAC,KAAOC,OAAR,CAA2BxC,MAAOsC,EAAG9B,MAArC,SAA6C8B,EAAG9B,OAA5B+B,SAEvD,cAAC,KAAD,CAAQqE,KAAK,UAAU3G,QArDC,WACvBD,EAAM2G,OAIXpH,EAAMW,SAAN,6BACKX,EAAMS,OADX,IAEEe,MAAOf,EAAM2G,OACbA,OAAQ3G,EAAMe,SANdgG,KAAQkG,MAAM,6FAmDZ,SAAuD,cAAC8E,GAAA,EAAD,SAEzD,eAACZ,GAAD,WACE,cAACC,GAAD,2BACA,cAAC,KAAD,CAAapR,MAAOA,EAAMe,MAAOH,IAAK,EAAGC,IAAK,IAAKC,MAAO,CAAEC,MAAO,KAAOwD,WAAW,eAAKrE,SAAU4R,EAAaE,OAAQ,kBAAMF,EAAY9R,EAAMe,OAASxB,EAAMS,MAAMe,aAExK,eAACoQ,GAAD,WACE,cAACC,GAAD,2BACA,cAAC,KAAD,CAAapR,MAAOA,EAAM2G,OAAQ/F,IAAK,EAAGC,IAAK,IAAKC,MAAO,CAAEC,MAAO,KAAOwD,WAAW,eAAKrE,SAzC5E,SAACyG,GACpBoG,EAAS,6BAAK/M,GAAN,IAAa2G,YACrBpH,EAAMW,SAAN,6BAAoBX,EAAMS,OAA1B,IAAiC2G,OAAQA,WAyCtCpH,EAAMS,MAAM8E,OAAOzC,KAAI,SAACC,EAAIC,GAAL,OACtB,eAAC4O,GAAD,WACE,cAACC,GAAD,UAAU9O,EAAG6C,WAAW1E,MAAQ2B,WAAe3B,IAAM,2BAAS6B,EAAG6C,WAAW3E,QAC5E,cAAC8B,EAAG6C,WAAWvF,UAAf,CAAyBI,MAAOsC,EAAGtC,MAAOE,SAAU,SAAAF,GAAK,OAtD7C,SAACS,EAAaT,GAChC,IAAMuC,EAAQhD,EAAMS,MAAM8E,OAAO8I,WAAU,SAAAtL,GAAE,OAAIA,EAAG6C,WAAW1E,MAAQA,KACjEK,EAAQvB,EAAMS,MAAM8E,OAAOvC,GACjCzB,EAAMd,MAAQA,EACdT,EAAMS,MAAM8E,OAAO+I,OAAOtL,EAAO,EAAGzB,GACpCvB,EAAMW,SAAN,gBAAoBX,EAAMS,QAiDyCiS,CAAY3P,EAAG6C,WAAW1E,IAAKT,QAFjFuC,UASrB,OACE,cAAC,KAAD,CAAW2P,YAAazI,EAAaiI,SAAUS,gBAAgB,EAA/D,SACG,SAACC,GAAD,OACC,eAAC,GAAD,CAAW7L,IAAK6L,EAASC,SAAzB,UACE,eAAClB,GAAD,WACE,cAAClL,GAAD,UAAQ1G,EAAMyR,SAASxQ,QACvB,qBAAKM,MAAO,CAAEwR,KAAM,UACnB/S,EAAMgT,UACL,cAAC,KAAD,CACE3J,UAAU,WACVpI,MAAM,mDACNgS,OAAO,SACPC,WAAW,SACXC,UAAW,kBAAMnT,EAAMoT,QAAO,IAC9BpF,SAAU,kBAAMrD,EAAS,cAN3B,SAQE,cAAC,KAAD,CAAQtD,KAAK,UAAb,6BAGFrH,EAAMgT,UAAa,cAAC,KAAD,CAAQ3L,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,cAA/C,6BAErB3K,EAAMgT,UACN,eAACpB,GAAD,WACE,cAAC,KAAD,CACEvI,UAAU,WACVpI,MAAM,yDACNgS,OAAO,SACPC,WAAW,SACXC,UAAWnT,EAAMgO,SALnB,SAOE,cAAC,KAAD,CAAQ3G,KAAK,UAAUgM,QAAM,EAA7B,wCAEF,qBAAK9R,MAAO,CAAEwR,KAAM,UACpB,cAAC,KAAD,CACE1J,UAAU,WACVpI,MAAM,6CACNgS,OAAO,SACPC,WAAW,SACXC,UAAW,kBAAMnT,EAAMoT,QAAO,IALhC,SAOE,cAAC,KAAD,CAAQ/L,KAAK,UAAb,2CAIN,eAACuK,GAAD,WACE,cAACC,GAAD,2BACA,cAAC,GAAD,UACGyB,KAAoBxQ,KAAI,SAACC,EAAIC,GAAL,OACvB,cAAC,KAAD,CAEEuQ,YAAaxQ,EAAG7B,IAChB8B,MAAOA,EAHT,SAIG,SAAC6P,EAAUW,GAAX,OACC,eAAC,IAAMC,SAAP,WACE,cAAC1B,GAAD,wCACE/K,IAAK6L,EAASC,UACVD,EAASa,gBACTb,EAASc,iBAHf,IAIE1B,WAAYuB,EAASvB,WACrB1Q,MAAOiS,EAASvB,WAAaY,EAASa,eAAenS,MAAQ,GAL/D,SAOGwB,EAAG9B,SAELuS,EAASvB,YACR,cAACC,GAAD,UACGnP,EAAG9B,aAhBP8B,EAAG7B,aAyBhB,cAACkR,EAAD,CACE3R,MAAOT,EAAMS,MACbE,SAAUX,EAAMW,WAEjBkS,EAASvL,mB,UCrOd1H,GAAYC,IAAOC,IAAV,mEACC,SAAAE,GAAK,OAAKA,EAAMiS,WAAa,iBAAmB,gBAI1DlN,GAAQlF,IAAOC,IAAV,8TACK,SAAAE,GAAK,OAAKA,EAAMiS,WAAa,iBAAmB,gBAqFjD2B,GApEQ,SAAC5T,GAuBtB,OACE,cAAC,KAAD,CAAiB6T,UAvBD,SAACnK,GAAwB,IACjCoK,EAAwBpK,EAAxBoK,YAAaC,EAAWrK,EAAXqK,OACrB,GAAKD,EAAL,CAGA,IAAME,EAAWhU,EAAMS,MAEjBwT,EAASH,EAAY9Q,MAAQ,GAAK+Q,EAAO/Q,MAAQ8Q,EAAY9Q,MAAQ8Q,EAAY9Q,MAAQ,EAAI,EAC7F2E,EAASqM,EAASD,EAAO/Q,OAE/BgR,EAAS1F,OAAOyF,EAAO/Q,MAAO,GAE9BgR,EAAS1F,OAAOwF,EAAY9Q,MAAQiR,EAAQ,EAAGtM,GAC/C3H,EAAMW,SAASqT,KAUf,SACE,cAAC,KAAD,CAAWrB,YAAY,kBAAvB,SACG,SAACE,EAAUW,GAAX,OACC,eAAC,GAAD,6BACMX,EAASqB,gBADf,IAEElN,IAAK6L,EAASC,SACdb,WAAYuB,EAASW,eAHvB,UAKGnU,EAAMS,MAAMqC,KAAI,SAACC,EAAIC,GAAL,OACf,cAAC,KAAD,CAAuBuQ,YAAaxQ,EAAGiF,GAAIhF,MAAOA,EAAlD,SACG,SAAC6P,EAAUW,GAAX,OACC,eAAC,GAAD,2BACExM,IAAK6L,EAASC,UACVD,EAASa,gBAFf,IAGEnS,MAAOsR,EAASa,eAAenS,MAC/B0Q,WAAYuB,EAASvB,WAJvB,UAME,iDAASY,EAASc,iBAAlB,aACG3Q,EAAQ,KAEX,gCACE,cAAC,KAAD,CACEqG,UAAU,WACVpI,MAAM,6CACNgS,OAAO,SACPC,WAAW,SACXC,UAAW,kBAjCZ,SAACnL,GACpB,IAAMhF,EAAQhD,EAAMS,MAAM4N,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOA,KACpDhI,EAAMS,MAAM6N,OAAOtL,EAAO,GAC1BhD,EAAMW,SAAN,aAAmBX,EAAMS,QA8BY2T,CAAarR,EAAGiF,KALnC,SAOE,cAAC,KAAD,CAAQX,KAAK,UAAUgM,QAAM,EAA7B,4BAEF,cAAC,KAAD,CAAQhM,KAAK,UAAU3G,QAAS,kBAAMV,EAAMiK,eAAelH,EAAGiF,KAA9D,mCArBQjF,EAAGiF,OA2BpB6K,EAASvL,sB,oBClFhBoD,GAAS7K,IAAOC,IAAV,uDAKNuU,GAAWxU,IAAOC,IAAV,mEACE,SAAAE,GAAK,OAAKA,EAAMiS,WAAa,iBAAmB,gBAI1DlN,GAAQlF,IAAOC,IAAV,8TACK,SAAAE,GAAK,OAAKA,EAAMiS,WAAa,iBAAmB,gBAsJjDqC,GArIK,SAACtU,GACnB,IAAMuU,EAAc,SAACvU,GASnB,OACE,eAAC,KAAD,WACE,cAAC,KAAK+R,KAAN,CAAWL,UAAQ,EAAChR,QAAS,kBAAMV,EAAMW,SAAN,6BAAoBX,EAAMS,OAA1B,IAAiC+T,OAAQxU,EAAMgD,UAAlF,0BACA,cAAC,KAAK+O,KAAN,CAAWL,UAAQ,EAAChR,QAAS,kBAAMV,EAAMW,SAAN,6BAAoBX,EAAMS,OAA1B,IAAiCgU,OAAQzU,EAAMgD,UAAlF,0BACA,cAAC,KAAK+O,KAAN,CAAWL,UAAQ,EAAChR,QAZD,WACrB,IAAMgU,EAAU1U,EAAMS,MAAMkU,YACvBD,EAAQ3O,SAAS/F,EAAMgD,SAC1B0R,EAAQnG,KAAKvO,EAAMgD,OACnBhD,EAAMW,SAAN,6BAAoBX,EAAMS,OAA1B,IAAiCkU,YAAatE,kBAAOqE,QAQrD,8BA4CN,OACE,gCACE,eAAC,GAAD,WACE,0DACA,kHACA,4JACA,sEACA,4GACA,6LAEF,cAAC,KAAD,CAAiBb,UAjDH,SAACnK,GAAwB,IACjCoK,EAAwBpK,EAAxBoK,YAAaC,EAAWrK,EAAXqK,OACrB,GAAKD,EAAL,CAGA,IAAMnC,EAAU3R,EAAMS,MAAMkR,QAEtBsC,EAASH,EAAY9Q,MAAQ,GAAK+Q,EAAO/Q,MAAQ8Q,EAAY9Q,MAAQ8Q,EAAY9Q,MAAQ,EAAI,EAC7F2E,EAASgK,EAAQoC,EAAO/Q,OAE9B2O,EAAQrD,OAAOyF,EAAO/Q,MAAO,GAE7B2O,EAAQrD,OAAOwF,EAAY9Q,MAAQiR,EAAQ,EAAGtM,GAC9C3H,EAAMW,SAAN,6BAAoBX,EAAMS,OAA1B,IAAiCkR,QAAQ,aAAKA,QAoC5C,SACE,cAAC,KAAD,CAAWgB,YAAY,eAAvB,SACG,SAACE,EAAUW,GAAX,OACC,eAACa,GAAD,6BACMxB,EAASqB,gBADf,IAEElN,IAAK6L,EAASC,SACdb,WAAYuB,EAASW,eAHvB,UAKGnU,EAAMS,MAAMkR,QAAQ7O,KAAI,SAACC,EAAIC,GAAL,OACvB,cAAC,KAAD,CAAuBuQ,YAAaxQ,EAAGiF,GAAIhF,MAAOA,EAAlD,SACG,SAAC6P,EAAUW,GAAX,OACC,eAAC,IAAMC,SAAP,WACGzQ,IAAUhD,EAAMS,MAAMgU,QAAW,2DAClC,eAAC,GAAD,2BACEzN,IAAK6L,EAASC,UACVD,EAASa,gBAFf,IAGEnS,MAAOsR,EAASa,eAAenS,MAC/B0Q,WAAYuB,EAASvB,WAJvB,UAME,iDAASY,EAASc,iBAAlB,aACG3Q,EAAQ,KAEX,gCACE,cAAC,KAAD,CACEqG,UAAU,WACVpI,MAAM,6CACNgS,OAAO,SACPC,WAAW,SACXC,UAAW,kBA7DhB,SAACnL,GACpB,IAAM2J,EAAU3R,EAAMS,MAAMkR,QACtB3O,EAAQ2O,EAAQtD,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOA,KAChD2J,EAAQrD,OAAOtL,EAAO,GAEtB,IAAM4R,EAAY5U,EAAMS,MAAMkU,YAAYtG,WAAU,SAAAtL,GAAE,OAAIA,IAAOC,MAC9C,IAAf4R,GACF5U,EAAMS,MAAMkU,YAAYrG,OAAOsG,EAAW,GAG5C,IAAMC,EAAY7U,EAAMS,MAAMqU,YAAYzG,WAAU,SAAAtL,GAAE,OAAIA,IAAOC,MAC9C,IAAf6R,GACF7U,EAAMS,MAAMkU,YAAYrG,OAAOuG,EAAW,GAG5C7U,EAAMW,SAAN,6BACKX,EAAMS,OADX,IAEEkR,QAAQ,aAAKA,GACbgD,YAAY,aAAK3U,EAAMS,MAAMkU,aAC7BG,YAAY,aAAK9U,EAAMS,MAAMqU,gBA0CUV,CAAarR,EAAGiF,KALnC,SAOE,cAAC,KAAD,CAAQX,KAAK,UAAUgM,QAAM,EAA7B,4BAEF,cAAC,KAAD,CACE0B,QAAS,cAACR,EAAD,cAAavR,MAAOA,GAAWhD,IACxC0R,SAEE1O,GAAShD,EAAMS,MAAM+T,QAAWxR,GAAShD,EAAMS,MAAMgU,QAAUzU,EAAMS,MAAMgU,OAAS,GAEpFzU,EAAMS,MAAMkU,YAAY5O,SAAS/C,IAEG,IAAnChD,EAAMS,MAAMqU,YAAYvM,QAAgBvI,EAAMS,MAAMqU,YAAY,KAAO9R,GACvEhD,EAAMS,MAAMqU,YAAYvM,OAAS,GAAKvF,EAAQhD,EAAMS,MAAMqU,YAAY,IACtE9U,EAAMS,MAAMqU,YAAYvM,OAAS,GAAKvF,EAAQhD,EAAMS,MAAMqU,YAAY9U,EAAMS,MAAMqU,YAAYvM,OAAS,GAV5G,SAaE,cAAC,KAAD,CAAQlB,KAAK,UAAb,4BAEF,cAAC,KAAD,CAAQA,KAAK,UAAU3G,QAAS,kBAAMV,EAAMiK,eAAelH,EAAGiF,KAA9D,iCAGHhF,IAAUhD,EAAMS,MAAM+T,QAAW,2DACjCxU,EAAMS,MAAMkU,YAAY5O,SAAS/C,IAAW,gEA1CnCD,EAAGiF,OA+CpB6K,EAASvL,yBCtJlB1H,GAAYC,IAAOoL,MAAV,4FAKTlG,GAAQlF,IAAOC,IAAV,iIAML4G,GAAQ7G,IAAOmV,KAAV,wEAKLC,GAASpV,IAAOC,IAAV,gOA6HGO,I,qBAAAA,GAjHf,SAAoBL,GAQhB,IAAD,EAC6BM,mBAAiB,GAD9C,oBACM6G,EADN,KACe+N,EADf,KAGKC,EAAc,SAAC1U,GACnBT,EAAMoV,oBAAN,6BACKpV,EAAMqV,QADX,IAEE5U,MAAOA,MAIL6U,EAAiB,SAACtB,GACtBhU,EAAMoV,oBAAN,6BACKpV,EAAMqV,QADX,IAEErB,eA0DJ,OACE,cAAC,GAAD,UACE,eAAC,KAAD,CACEuB,UAAW9T,OAAO0F,GAClBxG,SAAU,SAAAC,GAAC,OAAIsU,EAAWxT,OAAOd,KACjC4U,UAAQ,EACRhT,KAAK,QACLjB,MAAO,CAAE6F,OAAQ,QALnB,UAOE,cAAC,KAAKqO,QAAN,CAAcC,KAAM1V,EAAMqV,QAAWrV,EAAMqV,OAAkBrB,SAAW,eAAO,eAA/E,SACe,IAAZ7M,KAAmBnH,EAAMqV,QAnDJ,WAAO,IAAD,EAClC,aAAKrV,EAAMqV,cAAX,aAAI,EAA0BrB,SAAU,CACtC,IAAM2B,EAAS3V,EAAMqV,OACrB,OAAKM,EAAO3B,SAASzL,OAMnB,cAAC,GAAD,CAAgB9H,MAAOkV,EAAO3B,SAAUrT,SAAU2U,EAAgBrL,eAAgB,SAAA2L,GAAS,OAAI5V,EAAMiK,eAAe0L,EAAO3N,GAAI4N,MAJ7H,cAACX,GAAD,6CAON,IAAM9L,EAAUnJ,EAAMqV,OACtB,OACE,cAAClM,EAAQvD,WAAWvF,UAApB,CAA8BI,MAAO0I,EAAQ1I,MAAOE,SAAUwU,EAAapN,SAAU/H,EAAM+H,SAAUwB,QAASvJ,EAAMuJ,UAqC3EsM,IADkD,KAGzF,cAAC,KAAKJ,QAAN,CAAcC,IAAI,eAAlB,SACe,IAAZvO,KAAmBnH,EAAMqV,QAAU,CAClC,cAAC,GAAD,CAAoB9T,MAAO,CAAE2B,eAAgB,UAA7C,SAAyD,cAAC,KAAD,CAAQmE,KAAK,UAAUgM,QAAM,EAAC3S,QArC5E,WAAO,IAAD,EACzB,aAAKV,EAAMqV,cAAX,aAAI,EAA0BrB,SAAU,CAEtC,IAAMhR,EAAQhD,EAAMS,MAAMkR,QAAQtD,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOhI,EAAMqV,OAAQrN,MAC1EhI,EAAMS,MAAMkR,QAAQrD,OAAOtL,EAAO,OAC7B,CAEL,IAAMmG,EAAUnJ,EAAMqV,OAChBS,EAAe3M,EAAQwM,OAAO3B,SAAS3F,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOmB,EAAQnB,MAC/EmB,EAAQwM,OAAO3B,SAAS1F,OAAOwH,EAAc,GAG7C,IAAMC,EAAc/V,EAAMS,MAAMkR,QAAQtD,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOmB,EAAQwM,OAAO3N,MAC1C,IAAnCmB,EAAQwM,OAAO3B,SAASzL,OAE1BvI,EAAMS,MAAMkR,QAAQrD,OAAOyH,EAAa,GAExC/V,EAAMS,MAAMkR,QAAQrD,OAAOyH,EAAa,EAAG5M,EAAQwM,QAGvD3V,EAAMW,SAAN,gBAAoBX,EAAMS,SAiBuC,2BAA9C,UACXT,EAAMqV,OAAO9P,OAAOzC,KAAI,SAACC,EAAIC,GAAL,OACtB,eAAC,GAAD,WACE,cAAC,GAAD,UAAQD,EAAG6C,WAAW3E,QACtB,cAAC8B,EAAG6C,WAAWvF,UAAf,CAAyBI,MAAOsC,EAAGtC,MAAOE,SAAU,SAAAF,GAAK,OAxEnD,SAACS,EAAaT,GAChC,IAAM8E,EAASvF,EAAMqV,OAAQ9P,OACvBvC,EAAQuC,EAAO8I,WAAU,SAAAtL,GAAE,OAAIA,EAAG6C,WAAW1E,MAAQA,KACrDK,EAAQgE,EAAOvC,GACrBzB,EAAMd,MAAQA,EACd8E,EAAO+I,OAAOtL,EAAO,EAAGzB,GAExBvB,EAAMoV,oBAAN,6BACKpV,EAAMqV,QADX,IAEE9P,YA+DuEmN,CAAY3P,EAAG6C,WAAW1E,IAAKT,QAFlFuC,QAJS,KAW3B,cAAC,KAAKyS,QAAN,CAAcC,IAAI,2BAAlB,SACe,IAAZvO,GAAkB,cAAC,GAAD,CAAa1G,MAAOT,EAAMS,MAAOE,SAAUX,EAAMW,SAAUsJ,eAAgB,SAAA+L,GAC5FhW,EAAMiK,eAAe+L,GACrBd,EAAW,OAHc,W,SClI/BtV,GAAYC,IAAOoW,QAAV,iKAOTC,GAAOrW,IAAOC,IAAV,mHAOJqW,GAAgBtW,IAAOsL,QAAV,8KAMH,SAAAnL,GAAK,OAAKA,EAAMiS,WAAa,iBAAmB,gBAG1DmE,GAAkBvW,IAAOC,IAAV,8EAEjB,SAAAE,GAAK,OAAIA,EAAMiS,WAAa,8BAAgC,MAI1DoE,GAAexW,IAAOC,IAAV,8UAKP,SAAAE,GAAK,OAAIA,EAAMgD,MAAQ,IAAM,EAAI,GAAK,MAQpC,SAAAhD,GAAK,OAAIA,EAAMgD,MAAQ,IAAM,EAAI,GAAK,MAK7CiS,GAASpV,IAAOC,IAAV,+MA2EGkK,GAhEE,SAAChK,GAChB,OACE,cAAC,GAAD,UACE,cAACkW,GAAD,UACIlW,EAAMS,MAAMe,OAAUxB,EAAMS,MAAM2G,OAGhC,cAAC,KAAD,CAAWuL,YAAazI,EAAaF,SAArC,SACG,SAAC6I,EAAUyD,GAAX,OACC,eAACH,GAAD,2BACEnP,IAAK6L,EAASC,SACdb,WAAYqE,EAAanC,gBACrBtB,EAASqB,gBAHf,IAIE3S,MAAK,cACHC,MAAM,GAAD,OAAKxB,EAAMS,MAAMe,MAAjB,MACL4F,OAAO,GAAD,OAAKpH,EAAMS,MAAM2G,OAAjB,OACHtG,aAAOd,EAAMS,MAAM8E,SAP1B,UAUGvF,EAAMS,MAAMkR,QAAQpJ,OACjBvI,EAAMS,MAAMkR,QAAQ7O,KAAI,SAACC,EAAIC,GAAL,OACxB,cAAC,KAAD,CAEEuQ,YAAW,UAAKxQ,EAAGiF,GAAR,YAAcmC,EAAaoM,QACtCvT,MAAOA,EAHT,SAIG,SAAC6P,EAAUW,GAAX,OACC,eAAC4C,GAAD,2BACEpP,IAAK6L,EAASC,UACVD,EAASa,gBAFf,IAGEzB,WAAYuB,EAASvB,WACrB1Q,MAAO+U,EAAaE,mBAAqBF,EAAaE,iBAAiBC,SAAStM,EAAaoM,QAAU,GAAK1D,EAASa,eAAenS,MAJtI,UAME,cAAC8U,GAAD,6BACMxD,EAASc,iBADf,IAEEjT,QAAS,kBAAMV,EAAMiK,eAAelH,EAAGiF,KACvChF,MAAOA,EAHT,SAKE,8BAAMA,EAAQ,OAEf,wBAACD,EAAG6C,WAAWoE,SAAf,6BACKhK,GADL,IAECgU,SAAUjR,EAAGiR,SACb9S,IAAK6B,EAAGiF,GACRA,GAAE,UAAKjF,EAAGiF,GAAR,YAAcmC,EAAaY,SAC7BxJ,MAAOT,aAAOiC,EAAGwC,QACjB0E,eAAgB,SAACjC,GAAD,OAAQhI,EAAMiK,eAAelH,EAAGiF,GAAIA,aAvBrDjF,EAAGiF,OA6BT,cAAC,GAAD,uFAEJ6K,EAASvL,mBAhDhB,U,sCChECoP,GAAgB,SAACf,EAAgB/P,EAAyC+Q,GACrF,MAAO,CACL3O,GAAIuF,eACJoI,OAAQA,EACR/P,WAAYA,EAEZL,QAAsC,IAA7BK,EAAWL,OAAOgD,OAAe3C,EAAWL,OAASW,MAC3DpD,KAAI,SAAAC,GAAE,aAAIiD,aAAYjD,EAAD,UAAK4T,EAAcxQ,MAAK,SAAAyQ,GAAG,OAAI7T,EAAG7B,MAAQ0V,EAAIhR,WAAW1E,cAAzD,aAAK,EAA0DT,UACvF2F,OAPK,WAeH,MAPgC,CAC9B4B,GAAI3B,KAAK2B,GACTzC,OAAQc,KAAKd,OAAOzC,KAAI,SAAAC,GAAE,OAAIA,EAAGqD,YACjC3F,MAAO4F,KAAK5F,MACZmF,WAAYS,KAAKT,WAAW1E,IAC5ByU,OAAQtP,KAAKsP,OAAO3N,KAIxBvH,MAAO6F,qBAAUV,EAAW7E,gBCqB1B8V,GAA2B,SAACjR,EAA8B+Q,GAC9D,MAAO,CACL3O,GAAIuF,eACJhI,OAAQK,EAAWL,OAAOzC,KAAI,SAAAC,GAAE,aAAIiD,aAAYjD,EAAD,UAAK4T,EAAcxQ,MAAK,SAAAyQ,GAAG,OAAI7T,EAAG7B,MAAQ0V,EAAIhR,WAAW1E,cAAzD,aAAK,EAA0DT,UAC9GuT,SAAU,GACVpO,WAAYA,EACZQ,OALK,WAMH,OAAO,6BACFC,MADL,IAEET,WAAYS,KAAKT,WAAW1E,SAavB4V,GAAe,SAACnP,EAA0EgP,GACrG,OAAKhP,EAAuCtH,UARZ,SAACuF,EAAyC+Q,GAAyC,IAAD,EAC5GhB,EAASkB,GAAwB,iBAACjR,QAAD,IAACA,OAAD,EAACA,EAAY+P,cAAb,QAAuBoB,WAAMJ,GAC9DxN,EAAUuN,GAAcf,EAAQ/P,EAAY+Q,GAElD,OADAhB,EAAO3B,SAASzF,KAAKpF,GACdwM,EAKEqB,CAA0BrP,EAAuCgP,GAGrEhP,EAA2B/B,WAjEF,SAACK,GAC/B,IAAM0P,EAAiB,CACrB3N,GAAI/B,EAAU+B,GACdzC,OAAQU,EAAUV,OAAOzC,KAAI,SAAAC,GAAE,OAAIiD,aAAYjD,MAC/C6C,WAAYqR,KAAmB9Q,MAAK,SAAApD,GAAE,OAAIA,EAAG7B,MAAQ+E,EAAUL,cAC/DoO,SAAU,GACV5N,OALqB,WAYnB,MAN+B,CAC7B4N,SAAU3N,KAAK2N,SAASlR,KAAI,SAAAC,GAAE,OAAIA,EAAGqD,YACrC4B,GAAI3B,KAAK2B,GACTzC,OAAQc,KAAKd,OAAOzC,KAAI,SAAAC,GAAE,OAAIA,EAAGqD,YACjCR,WAAYS,KAAKT,WAAW1E,OAwBlC,OAnBAyU,EAAO3B,SAAW/N,EAAU+N,SAASlR,KAAI,SAAAC,GACvC,MAAO,CACLiF,GAAIjF,EAAGiF,GACPzC,OAAQxC,EAAGwC,OAAOzC,KAAI,SAAAC,GAAE,OAAIiD,aAAYjD,MACxCtC,MAAOsC,EAAGtC,MACVmF,WAAY0N,KAAoBnN,MAAK,SAAAqC,GAAI,OAAIA,EAAKtH,MAAQ6B,EAAG6C,cAC7D+P,OAAQA,EACRvP,OANK,WAcH,MAPgC,CAC9B3F,MAAO4F,KAAK5F,MACZuH,GAAI3B,KAAK2B,GACTzC,OAAQc,KAAKd,OAAOzC,KAAI,SAAAC,GAAE,OAAIA,EAAGqD,YACjCuP,OAAQtP,KAAKsP,OAAO3N,GACpBpC,WAAYS,KAAKT,WAAW1E,UAM7ByU,EA+BEuB,CAAwBvP,GAE1BkP,GAAyBlP,EAA4BgP,ICrDjDQ,GAAc,SAACC,GAC1B,IAAM1N,EAA8B,GAepC,OAdgB,SAAVqG,EAAW7O,EAAaT,GAC5B,GAAIA,GAA0B,kBAAVA,EAClB,GAAIqJ,MAAM4E,QAAQjO,GAChBiJ,EAAO,GAAD,OAAIxI,EAAJ,OAAeT,OAErB,IAAK,IAAM4W,KAAY5W,EACrBsP,EAAQ7O,EAAG,UAAMA,EAAN,YAAamW,GAAaA,EAAU5W,EAAM4W,SAGhDnW,IACTwI,EAAOxI,GAAOT,GAGlBsP,CAAQ,GAAIqH,GACL1N,GASI4N,GAAgB,SAACC,EAA0BxP,EAAoBqP,GAC1E,IAAM1I,EAAU5E,MAAM4E,QAAQ6I,GACxB7N,GAAUgF,EAAU6I,EAAoB,CAACA,IAAkBzU,KAAI,SAAA0U,GACnE,GAAIA,EAAKzR,SAAS,MAChB,OAAOyR,EAAKC,QAAQ,gBAAgB,SAACC,EAAOC,GAa1C,IAAMzW,EAAMyW,EAAGC,OACT5O,EAAO,eAAeA,KAAK9H,GAC3BmD,EAAM+S,EAAKpO,EAAOA,EAAK,GAAK9H,GAClC,OAAI4I,MAAM4E,QAAQrK,IAAQ,CAAC,SAAU,SAAU,UAAW,aAAa0B,gBAAgB1B,EAAI,IACnF,KAAN,OAAYA,EAAI8D,QAAO,SAAApF,GAAE,OAAIA,KAAI8U,KAAK,MAAtC,MAEKxT,GAAO,MAGlB,IAAMnD,EAAMsW,EAAKI,OAEX5O,EAAO,eAAeA,KAAK9H,GAOjC,IANa6G,EAASlB,MAAMV,MAAK,SAAApD,GAC/B,OAAIiG,EACKjG,EAAGiF,KAAOtG,OAAOsH,EAAK,IAExBjG,EAAGqF,OAASlH,KAEV,CACT,GAAI8H,EACF,OAEF,OAAOwO,EAET,OAAOJ,EAAKpO,EAAOA,EAAK,GAAK9H,MAE/B,OAAOwN,EAAUhF,EAASA,EAAO,IAGtBoO,GAAkB,SAACC,GAC9B,MAAO,CACLtD,OAAQsD,EAAKtD,OACbD,OAAQuD,EAAKvD,OACbhT,MAAOuW,EAAKvW,MACZ4F,OAAQ2Q,EAAK3Q,OACb0N,YAAaiD,EAAKjD,YAClBH,YAAaoD,EAAKpD,YAClBpP,OAAQwS,EAAKxS,OAAOgD,OAASwP,EAAKxS,OAAOzC,KAAI,SAACC,GAAD,OAAwBiD,aAAYjD,MAAOiV,KACxFrG,QAASoG,EAAKpG,QAAQ7O,KAAI,SAACC,GAAD,OAAyB+T,GAAa/T,QCnF9DnD,GAAYC,IAAOC,IAAV,qKA4QAmY,I,wBAAAA,GAjQf,WACE,IAAMtN,EAAWC,cACT5C,EAAOkJ,cAAPlJ,GAFS,EAGiB+E,aAAgB,eAAgBC,KAAKC,UAAUR,KAHhE,oBAGV8E,EAHU,KAGCC,EAHD,KAKXC,EAAYzE,KAAKS,MAAM8D,GAA0BpL,MAAK,SAACpD,GAAD,OAAaA,EAAGiF,KAAOA,KACnF,IAAKyJ,EAGH,OAFAjK,KAAQkG,MAAM,oDACd/C,EAAS,aACF,KATQ,MAYIoC,aAAgB,gBAAiBC,KAAKC,UAAUZ,KAA9Da,EAZU,qBAaXnF,EAAYiF,KAAKS,MAAMP,GAA2B/G,MAAK,SAAApD,GAAE,OAAIA,EAAGiF,KAAOyJ,EAAS/E,cAChFwL,EAAaf,GAAYnK,KAAKS,MAAM1F,EAASyE,OAdlC,EAgBiBO,aAAgB,mBAAD,OAAoB/E,IAhBpD,oBAgBVmQ,EAhBU,KAgBCC,EAhBD,KAiBXC,EAA+BrL,KAAKS,MAAM0K,GAAa1G,EAASjF,MAAQQ,KAAKC,UAAU,CAC3FwH,QAAS,EACTD,QAAS,EACThT,MAAO,IACP4F,OAAQ,IACRuK,QAAS,GACTmD,YAAa,GACbH,YAAa,GACbpP,OAAQ,MAEJwS,EAAaD,GAAgBO,GAC7BC,EAAU,SAAC7X,GACf2X,EAAapL,KAAKC,UAAUxM,KA7Bb,EAgCWH,qBAhCX,oBAgCV+U,EAhCU,KAgCFkD,EAhCE,KA4JXC,EAAe,SAACxC,EAAkBJ,GACtC,IAAMD,EAASoC,EAAKpG,QAAQxL,MAAK,SAAApD,GAAE,OAAIA,EAAGiF,KAAOgO,KACjD,GAAIJ,EAAW,CACb,IAAMzM,EAAUwM,EAAO3B,SAAS7N,MAAK,SAAApD,GAAE,OAAIA,EAAGiF,KAAO4N,KACrD2C,EAAUpP,QAEVoP,EAAU5C,IA6Dd,OACE,eAAC,GAAD,WACE,cAAC,EAAD,CAAQtL,QAAQ,IAChB,gCACE,eAAC,KAAD,CAAiBwJ,UAjML,SAACnK,GAAuB,IAItCoK,EAGEpK,EAHFoK,YACAC,EAEErK,EAFFqK,OACAR,EACE7J,EADF6J,YAGF,GAAKO,GAAeA,EAAYnB,cAAgBzI,EAAaiI,SAA7D,CAKA,GAAI4B,EAAOpB,cAAgBzI,EAAaiI,SAAU,CAChD,IAAMsG,EAAoBnF,KAAoBnN,MAAK,SAAApD,GAAE,OAAIA,EAAG7B,MAAQqS,KAEpE,GAAIO,EAAYnB,cAAgBzI,EAAaF,SAAU,CAErD,IAAM2L,EAASmB,GAAa2B,EAAmBV,EAAKxS,QAIpD,OAHAwS,EAAKpG,QAAQrD,OAAOwF,EAAY9Q,MAAO,EAAG2S,GAC1C2C,EAAQ,gBAAKP,SACbQ,EAAU5C,EAAO3B,SAAS,IAK5B,IAAM2B,EAASoC,EAAKpG,QAAQxL,MAAK,SAAApD,GAAE,OAAI+Q,EAAYnB,YAAY5G,WAAWhJ,EAAGiF,OACvEmB,EAAUuN,GAAcf,EAAQ8C,EAAmBV,EAAKxS,QAC9D,GAAIoQ,EAAO/P,aAAemR,WACxB,OAKF,OAHApB,EAAO3B,SAAS1F,OAAOwF,EAAY9Q,MAAO,EAAGmG,GAC7CoP,EAAUpP,QACVmP,EAAQ,6BAAKP,GAAN,IAAYpG,QAAQ,aAAKoG,EAAKpG,YAKvC,GAAIoC,EAAOpB,cAAgBmB,EAAYnB,YAAa,CAElD,IAAMsB,EAASH,EAAY9Q,MAAQ,GAAK+Q,EAAO/Q,MAAQ8Q,EAAY9Q,MAAQ8Q,EAAY9Q,MAAQ,EAAI,EAGnG,GAAI+Q,EAAOpB,cAAgBzI,EAAaF,SAAU,CAChD,IAAMrC,EAASoQ,EAAKpG,QAAQoC,EAAO/Q,OAOnC,OALA+U,EAAKpG,QAAQrD,OAAOyF,EAAO/Q,MAAO,GAElC+U,EAAKpG,QAAQrD,OAAOwF,EAAY9Q,MAAQiR,EAAQ,EAAGtM,GACnD4Q,EAAU5Q,QACV2Q,EAAQ,6BAAKP,GAAN,IAAYpG,QAAQ,aAAKoG,EAAKpG,YAIvC,IAAMgE,EAASoC,EAAKpG,QAAQxL,MAAK,SAAApD,GAAE,OAAI+Q,EAAYnB,YAAY5G,WAAWhJ,EAAGiF,OACvEgM,EAAW2B,EAAO3B,SAClBrM,EAASqM,EAASD,EAAO/Q,OAQ/B,OANAgR,EAAS1F,OAAOyF,EAAO/Q,MAAO,GAE9BgR,EAAS1F,OAAOwF,EAAY9Q,MAAQiR,EAAQ,EAAGtM,GAC/CA,EAAOgO,OAASA,EAChB4C,EAAU5Q,QACV2Q,EAAQ,6BAAKP,GAAN,IAAYpG,QAAQ,aAAKoG,EAAKpG,YAKvC,GAAI4B,EAAYkD,SAAStM,EAAaoM,SAAWzC,EAAYnB,YAAY8D,SAAStM,EAAaY,SAAU,CAAC,IAAD,EACjG/H,EAAQ+U,EAAKpG,QAAQtD,WAAU,SAAAtL,GAAE,OAAIwQ,EAAYxH,WAAWhJ,EAAGiF,OAErE,IAAe,IAAXhF,GAAgB+U,EAAKpG,QAAQ3O,GAAO4C,aAAemR,WACrD,OAEF,IAAMpB,EAASoC,EAAKpG,QAAQxL,MAAK,SAAApD,GAAE,OAAI+Q,EAAYnB,YAAY5G,WAAWhJ,EAAGiF,OAE7E,IAAK2N,GAAUA,EAAO/P,aAAemR,WACnC,OAGF,IAAM/C,EAAW+D,EAAKpG,QAAQ3O,GAAOgR,UACrC,EAAA2B,EAAO3B,UAAS1F,OAAhB,SAAuBwF,EAAY9Q,MAAO,GAA1C,oBAAgDgR,KAEhD+D,EAAKpG,QAAQrD,OAAOtL,EAAO,GAC3BsV,EAAQ,6BAAKP,GAAN,IAAYpG,QAAQ,aAAKoG,EAAKpG,YAIvC,IAAK4B,EAAYkD,SAAStM,EAAaoM,UAAYhD,EAAYkD,SAAStM,EAAaY,SAAU,CAC7F,IAAM2N,EAAeX,EAAKpG,QAAQxL,MAAK,SAAApD,GAAE,OAAIgR,EAAOpB,YAAY5G,WAAWhJ,EAAGiF,OACxEmB,EAAUuP,EAAa1E,SAAS7N,MAAK,SAAApD,GAAE,OAAIA,EAAGiF,KAAOuL,KACrDoF,EAAoBZ,EAAKpG,QAAQxL,MAAK,SAAApD,GAAE,OAAI+Q,EAAYnB,YAAY5G,WAAWhJ,EAAGiF,OAGxF,GAAI8L,EAAYnB,cAAgBzI,EAAaF,SAAU,CACrD,IAAM2L,EAASmB,GAAaC,YAC5BpB,EAAO3B,SAASzF,KAAKpF,GACrB4O,EAAKpG,QAAQrD,OAAOwF,EAAY9Q,MAAO,EAAG2S,GAC1CxM,EAAQwM,OAASA,MACZ,KAAIgD,GAAqBA,EAAkB/S,aAAemR,WAO/D,OALA4B,EAAkB3E,SAAS1F,OAAOwF,EAAY9Q,MAAO,EAAGmG,GACxDA,EAAQwM,OAASgD,EACjBJ,EAAUpP,GAUZ,GAHAuP,EAAa1E,SAAS1F,OAAOyF,EAAO/Q,MAAO,IAGtC0V,EAAa1E,SAASzL,OAAQ,CACjC,IAAMqQ,EAAMb,EAAKpG,QAAQtD,WAAU,SAAAtL,GAAE,OAAIgR,EAAOpB,YAAY5G,WAAWhJ,EAAGiF,OAC1E+P,EAAKpG,QAAQrD,OAAOsK,EAAK,GAE3BN,EAAQ,6BAAKP,GAAN,IAAYpG,QAAQ,aAAKoG,EAAKpG,eA2EnC,UACE,cAAC,GAAD,CACElR,MAAOsX,EACPpX,SAAU2X,EACVtF,WAAYmF,EACZ/E,OA/BK,SAACyF,GACd,IAAMC,EAAQ9L,KAAKS,MAAM8D,GACzBE,EAASjF,KAAO2L,EAChB,IAAMnV,EAAQ8V,EAAMzK,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOyJ,EAASzJ,MACvD,IAAe,IAAXhF,EAIF,OAHAwE,KAAQkG,MAAM,oDACd/C,EAAS,kBACTyN,EAAa,IAGfU,EAAMxK,OAAOtL,EAAO,EAAGyO,GACvBD,EAAaxE,KAAKC,UAAU6L,IAC5BV,EAAa,IACTS,GACFlO,EAAS,cAkBHqD,SAdO,WACfoK,EAAa,KAcL3G,SAAUA,IAEZ,cAAC,GAAD,CACEhR,MAAOsX,EACPxO,QAAS,SAAA9I,GAAK,OAAI6W,GAAc7W,EAAOsH,EAAUmQ,IACjDjO,eAAgBuO,EAChBnD,OAAQA,OAGZ,cAAC,GAAD,CACEA,OAAQA,EACRD,oBA/EkB,SAAC3U,GACzB8X,EAAU9X,GACV,IAAIsV,EAAcgC,EAAKpG,QAAQtD,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOvH,EAAMuH,MAE/D,IAAqB,IAAjB+N,EAAoB,CACtB,IAAMJ,EAASoC,EAAKpG,QAAQoE,GAS5B,OARAJ,EAAO3B,SAAYvT,EAAiBuT,SACpC2B,EAAOpQ,OAAS9E,EAAM8E,OACS,IAA3BoQ,EAAO3B,SAASzL,OAClBwP,EAAKpG,QAAQrD,OAAOyH,EAAa,GAEjCgC,EAAKpG,QAAQrD,OAAOyH,EAAa,EAAGJ,QAEtC2C,EAAQ,gBAAKP,IAIf,IAAM5O,EAAU1I,EAGhB,IAAqB,KAFrBsV,EAAcgC,EAAKpG,QAAQtD,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOmB,EAAQwM,OAAO3N,OAKlE,OAFAuQ,OAAU/J,QACVhH,KAAQkG,MAAM,mFAGhB,IAAMiI,EAASoC,EAAKpG,QAAQoE,GACtBD,EAAeH,EAAO3B,SAAS3F,WAAU,SAAAtL,GAAE,OAAIA,EAAGiF,KAAOmB,EAAQnB,MACjEL,EAASgO,EAAO3B,SAAS8B,GAC/BnO,EAAOlH,MAASA,EAA4BA,MAC5CkH,EAAOpC,OAAS9E,EAAM8E,OACtBoQ,EAAO3B,SAAS1F,OAAOwH,EAAc,EAAGnO,GACxCoQ,EAAKpG,QAAQrD,OAAOyH,EAAa,EAAGJ,GACpC2C,EAAQ,gBAAKP,KAgDP9N,eAAgBuO,EAChB/X,MAAOsX,EACPpX,SAAU2X,EACVvQ,SAAUA,EACVwB,QAAS,SAAA9I,GAAK,OAAI6W,GAAc7W,EAAOsH,EAAUmQ,aClRrDtY,GAAYC,IAAOC,IAAV,qDAITiF,GAAQlF,IAAOC,IAAV,ibAoDIiZ,GAxBC,WACd,IAAMpO,EAAWC,cADG,EAEAmC,aAAgB,eAAgBC,KAAKC,UAAUR,KAA5D8E,EAFa,qBAGduH,EAAS9L,KAAKS,MAAM8D,GAA0BpJ,QAAO,SAAApF,GAAE,OAAIA,EAAGyJ,MAASQ,KAAKS,MAAM1K,EAAGyJ,MAAwBmF,QAAQpJ,OAAS,KAEpI,OACE,cAAC,GAAD,UACGuQ,EAAMhW,KAAI,SAACC,EAAIC,GAAL,OACT,eAAC,GAAD,WACE,gCACE,8BAAMD,EAAG9B,QACT,wBACA,8BAAM8B,EAAGwJ,YACT,8BAAK,cAAC,KAAD,CAAQlF,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,YAAD,OAAa5H,EAAGiF,MAA9D,2CAEP,8BACGjF,EAAG/B,gBARIgC,S,+BCtCdpD,GAAYC,IAAOC,IAAV,2IACJ,SAAAE,GAAK,OAAIA,EAAMwB,SAMpBkJ,GAAS7K,IAAOC,IAAV,6GAMNkZ,GAAkBnZ,IAAOC,IAAV,+JACV,SAAAE,GAAK,OAAIA,EAAMwB,SACV,SAAAxB,GAAK,OAAIA,EAAMoH,OAAN,UAAkBpH,EAAMoH,OAAxB,MAAqC,UAOxD6R,GAAUpZ,IAAO0K,IAAV,kFACF,SAAAvK,GAAK,OAAIA,EAAMwB,SACd,SAAAxB,GAAK,OAAIA,EAAMoH,OAAN,UAAkBpH,EAAMoH,OAAxB,MAAqC,UAIpD8R,GAAY,YAwKHzP,GArKA,SAACzJ,GAKd,IAAM2K,EAAWC,cACXwM,EAAOD,GAAYnX,EAAMoX,MACzBpQ,EAAMC,iBAA8B,MAHtC,EAIwB3G,mBAA8B,IAJtD,oBAIG6Y,EAJH,KAIWC,EAJX,KAMEC,EAAQ,yCAAG,WAAOC,GAAP,sBAAAC,EAAA,6DACTC,EAAKC,SAASC,eAAeR,MAEjCO,SAASE,KAAKC,YAAYJ,IAEtBK,EAASJ,SAASK,cAAc,WAC/B9R,GAAKkR,GACZW,EAAOtY,MAAMwY,WAAa,SAC1BF,EAAOtY,MAAMyY,SAAW,WACxBH,EAAOtY,MAAMK,IAAM,MACnBiY,EAAOI,OAAP,mEACsCC,IADtC,8TAtBU,EA+B0Bla,EAAM+X,KAAKvW,MAT/C,uBAtBU,EA+BiExB,EAAM+X,KAAK3Q,OATtF,eAS2GkS,EAT3G,gDAaAG,SAASE,KAAKQ,YAAYN,GAvBX,UAyBT,IAAIO,SAAQ,SAACC,GACjB,IAAMC,EAAQC,aAAY,WACpBV,EAAOW,iBAAmBX,EAAOW,gBAAgBd,eAAe,SAClEe,cAAcH,GACdD,OAAQ7L,MAET,QA/BU,yBAiCMkM,KAAYb,EAAOW,gBAAiBd,eAAe,QAjCzD,eAiCTP,EAjCS,QAkCTwB,EAAKlB,SAASC,eAAeR,MAEjCO,SAASE,KAAKC,YAAYe,GApCb,kBAsCRP,QAAQC,QAAQlB,IAtCR,4CAAH,sDAyCRyB,EAAY,yCAAG,+CAAArB,EAAA,yDACbJ,EAA8B,GAE/BnS,EAAIG,QAHU,yCAIViT,QAAQC,QAAQ,KAJN,UAMbQ,EAA6C,GAEzB,IAAtB7a,EAAM+X,KAAK3Q,QAAgBJ,EAAIG,QAAQ2T,eAAiB9T,EAAIG,QAAQ4T,aARrD,gBASjBF,EAAStM,KAAK,CAAExF,MAAO,EAAGE,IAAKjJ,EAAM+X,KAAKpG,QAAQpJ,SATjC,+CAYV4Q,GAZU,UAednS,EAAIG,QAfU,0CAgBVgS,GAhBU,QAkBbrO,EAAW9D,EAAIG,QAAQ2D,SAlBV,MAoBF+P,EApBE,0CAuBjB,IAHS9X,EApBQ,KAsBbuW,EAAO,GACF0B,EAAIjY,EAAGgG,MAAOiS,EAAIjY,EAAGkG,IAAK+R,IACjC1B,GAAQxO,EAASkQ,GAAGC,UAxBL,iBA0BG5B,EAASC,GA1BZ,QA0BX7Y,EA1BW,OA2BjB0Y,EAAO5K,KAAK9N,GA3BK,2CA6Bbya,EAAYzB,SAASC,eAAeR,MAExCO,SAASE,KAAKC,YAAYsB,GA/BT,kBAiCZ/B,GAjCY,4CAAH,qDAwDlBrN,qBAAU,WAER8O,IAAeO,MAAK,SAAA1a,GAClB2Y,EAAU3Y,QAEX,CAACT,EAAMoX,OAEV,IAAM7N,EAAU,SAAC6R,GACf,OAAO9D,GAAc8D,EAAOpb,EAAM+H,SAAUqP,IA4B9C,OACE,eAAC,GAAD,CAAW5V,MAAOxB,EAAM+X,KAAKvW,MAA7B,UACE,eAAC,GAAD,WACE,cAAC,KAAD,CAAQ6F,KAAK,UAAU3G,QAAS,kBA3DrB,WACf,GAAsB,IAAlByY,EAAO5Q,OAAX,CAOA,IAJA,IAAM8S,EAAM,IAAIC,KAAM,CACpB7Y,KAAM,KACNoL,OAAQ,CAAC7N,EAAM+X,KAAKvW,MAAOxB,EAAM+X,KAAK3Q,UAE/B4T,EAAI,EAAGA,EAAI7B,EAAO5Q,OAAQyS,IAAK,CACtC,IACMO,EADKpC,EAAO6B,GACCQ,UAAU,aAAc,GACjC,IAANR,GACFK,EAAII,UAENJ,EAAI/C,QAAQ0C,EAAI,GAChBK,EAAIK,SAASH,EAAS,OAAQ,EAAG,EAAGvb,EAAM+X,KAAKvW,MAAOxB,EAAM+X,KAAK3Q,QAEnEiU,EAAIM,KAAK,eA0CiCC,IAAtC,6BACA,cAAC,KAAD,CAAQvU,KAAK,UAAU3G,QAAS,kBA7BxB,WACZ,IAAMmb,EAAOhU,OAAOC,KAAK,GAAI,SAC7B+T,EAAKpC,SAASqC,MAAd,mEACsC5B,IADtC,iRAQsBla,EAAM+X,KAAKvW,MARjC,yCASqBxB,EAAM+X,KAAKvW,MAThC,uBASoDxB,EAAM+X,KAAK3Q,OAAX,UAAuBpH,EAAM+X,KAAK3Q,OAAlC,MAA+C,OATnG,+EAaQ+R,EAAOrW,KAAI,SAAAC,GAAE,0BAAiBA,EAAGyY,UAAU,cAA9B,kBAbrB,2CAiBAO,YAAW,WACTF,EAAKG,QACLH,EAAKI,UACJ,KAOuCD,IAAtC,0BACA,cAAC,KAAD,CAAQ3U,KAAK,UAAU3G,QAAS,kBAAMiK,EAAS,aAA/C,6BAEDwO,EAAOrW,KAAI,SAACC,EAAIC,GAAL,OAAgB,cAACiW,GAAD,CAAqBxO,IAAK1H,EAAGyY,UAAU,aAAc,EAxJzE,GAwJqFU,IAAI,GAAG1a,MAAOxB,EAAM+X,KAAKvW,MAAO4F,OAAQpH,EAAM+X,KAAK3Q,QAAtGpE,MAC1C,cAACgW,GAAD,CAAiBhS,IAAK,SAAAvG,GAAWuG,EAAIG,QAAU1G,GAASe,MAAOxB,EAAM+X,KAAKvW,MAAO4F,OAAQpH,EAAM+X,KAAK3Q,OAApG,SACGpH,EAAM+X,KAAKpG,QAAQ7O,KAAI,SAACC,EAAIC,GAAL,OACtB,cAACD,EAAG6C,WAAW6D,OAAf,CAEElI,MAAOT,aAAOiC,EAAGwC,QACjByO,SAAUjR,EAAGiR,SACbzK,QAASA,GAHJvG,YC7LXpD,GAAYC,IAAOC,IAAV,8BA6CAqc,GA1CI,SAACnc,GAgBlB,OACE,cAAC,GAAD,UACE,cAAC,KAAD,CACEgI,GAAK,cACLV,YAAatH,EAAMS,MACnBE,SAAU,SAAC+I,GAAD,OAjBK,SAACA,GACpB,IAAKA,EAAOgE,MAAO,CACjB,IAAKhE,EAAO8C,KACV,OAAOxM,EAAMW,WAEf,GAAImJ,MAAM4E,QAAQhF,EAAOiF,UACvB,OAAOnH,KAAQkG,MAAM,4CAEvB1N,EAAMW,SAAS+I,EAAOiF,WASOC,CAAalF,IACxCmF,OAAW,CACTC,QAAS,OACTC,WAAY,UACZC,mBAAoB,OACpBC,OAAQ,UACRC,OAAQ,UACRC,MAAO,UACPC,KAAM,UACNC,gBAAiB,UACjBC,UAAW,UACX5B,MAAO,WAET6B,OAAWA,KACX/N,MAAQ,OACR4F,OAAS,YCjCXxH,GAAYC,IAAOC,IAAV,qKAuCAmY,GA5BA,WACb,IAAMtN,EAAWC,cACT5C,EAAOkJ,cAAPlJ,GAFW,EAGC+E,aAAgB,eAAgBC,KAAKC,UAAUR,KAA5D8E,EAHY,qBAIbE,EAAYzE,KAAKS,MAAM8D,GAA0BpL,MAAK,SAACpD,GAAD,OAAaA,EAAGiF,KAAOA,KACnF,IAAKyJ,EAGH,OAFAjK,KAAQkG,MAAM,8CACd/C,EAAS,YACF,KAGT,IAAMoN,EAAOD,GAAgB9K,KAAKS,MAAMgE,EAASjF,OAX9B,EAaEO,aAAgB,gBAAiBC,KAAKC,UAAUZ,KAA9Da,EAbY,qBAcbnF,EAAYiF,KAAKS,MAAMP,GAA2B/G,MAAK,SAAApD,GAAE,OAAIA,EAAGiF,KAAOyJ,EAAS/E,cAdnE,EAeKpM,mBAAiB0M,KAAKS,MAAM1F,EAASyE,OAf1C,oBAeZA,EAfY,KAeN8E,EAfM,KAiBnB,OACE,eAAC,GAAD,WACE,cAAC,EAAD,CAAQjH,QAAQ,IAChB,gCACE,cAAC,GAAD,CAAQ0N,KAAMA,EAAMX,KAAM5K,EAAMzE,SAAUA,IAC1C,cAAC,GAAD,CAAYtH,MAAO+L,EAAM7L,SAAU,SAAAF,GAAK,OAAI6Q,EAAQ7Q,GAASuM,KAAKS,MAAM1F,EAASyE,iBCjB1E4P,GAjBC,WACd,OACE,cAAC,IAAD,CAAQC,SAAS,gBAAjB,SACE,eAAC,IAAD,WACE,eAAC,IAAD,CAAOjU,KAAK,IAAIkU,QAAS,cAAC,EAAD,IAAzB,UACE,cAAC,IAAD,CAAOlU,KAAK,WAAWkU,QAAS,cAAC,GAAD,MAChC,cAAC,IAAD,CAAOlU,KAAK,WAAWkU,QAAS,cAAC,GAAD,MAChC,cAAC,IAAD,CAAOlU,KAAK,UAAUkU,QAAS,cAAC,GAAD,SAEjC,cAAC,IAAD,CAAOlU,KAAK,gBAAgBkU,QAAS,cAAC,GAAD,MACrC,cAAC,IAAD,CAAOlU,KAAK,gBAAgBkU,QAAS,cAAC,GAAD,MACrC,cAAC,IAAD,CAAOlU,KAAK,eAAekU,QAAS,cAAC,GAAD,MACpC,cAAC,IAAD,CAAOlU,KAAK,IAAIkU,QAAS,cAAC,GAAD,YCZlBC,OANf,WACE,OACE,cAAC,GAAD,KCOWC,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBvB,MAAK,YAAkD,IAA/CwB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASlc,OACP,cAAC,IAAMmc,WAAP,UACE,cAAC,GAAD,MAEFxD,SAASC,eAAe,SAM1B8C,M,gCChBA,uVAuBalK,EAAc,CACzB,CACErR,MAAO,KACPO,MAAO,IACP4F,OAAQ,KAEV,CACEnG,MAAO,KACPO,MAAO,IACP4F,OAAQ,MAIClB,EAA4C,CACvDpC,UACAjB,UACAqB,UACAF,UACAb,UACAE,UACAe,UACAG,UACAnE,UACAmD,UACAlB,UACAoC,UACA/B,UACAiC,UACAhD,UACAsD,WAGW+S,EAA0B,CACrC7U,UACAE,UACAE,UACAnD,WACA0C,KAAI,SAAAC,GAAE,OAAIiD,YAAYjD,MAEXuQ,EAAqD,CAChE9J,WAGWyN,EAAyC,CACpDF,Y,iIC1DInX,EAAYC,IAAOC,IAAV,0HAKX,SAAAE,GAAK,OAAIA,EAAMiS,WAAa,8BAAgC,MAC5D,SAAAjS,GAAK,OAAIA,EAAMqL,SAAW,gCAAkC,MAG1D6R,EAAmBrd,IAAOC,IAAV,+FAElB,SAAAE,GAAK,OAAIA,EAAMiS,WAAa,8BAAgC,MAG5D,SAAAjS,GAAK,OAAIA,EAAMqL,SAAW,gCAAkC,MAG1D4J,EAASpV,IAAOC,IAAV,6MAWNiX,EAAyB,CAC7BtN,OAD6B,SACrBzJ,GACN,OACE,qBAAKuB,MAAOvB,EAAMuB,MAAlB,SACGvB,EAAMgU,SAASlR,KAAI,SAACC,EAAIC,GAAL,OAClB,cAACD,EAAG6C,WAAW6D,OAAf,CAAkClI,MAAOT,YAAOiC,EAAGwC,QAASmE,OAAQ1J,EAAMuJ,QAAQxG,EAAGtC,QAA1DuC,SAKnCgH,SAV6B,SAUnBhK,GACR,OACE,cAAC,IAAD,CAAW2S,YAAa3S,EAAMgI,GAAI2B,UAAY,aAA9C,SACG,SAACkJ,EAAUW,GAAX,OACC,eAAC5T,EAAD,CACE2B,MAAOvB,EAAMuB,MACbyF,IAAK6L,EAASC,SACdb,WAAYuB,EAASW,eACrB9I,WAAYrL,EAAMqV,QAAUrV,EAAMgI,GAAG+D,WAAW/L,EAAMqV,OAAOrN,IAJ/D,UAMGhI,EAAMgU,SAASzL,OACZvI,EAAMgU,SAASlR,KAAI,SAACC,EAAIC,GAAL,OACnB,cAAC,IAAD,CAEEuQ,YAAaxQ,EAAGiF,GAChBhF,MAAOA,EAHT,SAKG,SAAC6P,EAAUW,GAAX,aACC,cAAC0J,EAAD,qCACElW,IAAK6L,EAASC,SACdb,WAAYuB,EAASvB,WACrB5G,UAAU,UAAArL,EAAMqV,cAAN,eAAcrN,MAAOjF,EAAGiF,IAC9B6K,EAASa,gBACTb,EAASc,iBALf,IAMEpS,MAAOmE,OAAOC,OAAOkN,EAASa,eAAenS,MAAOuE,YAAa/C,EAAGwC,SANtE,SAQGxC,EAAGtC,MACC,cAACsC,EAAG6C,WAAWoE,SAAf,CAAoCzI,MAAOT,YAAOiC,EAAGwC,QAAS9E,MAAOsC,EAAGtC,MAAOiJ,OAAQ1J,EAAMuJ,QAAQxG,EAAGtC,QAAUsC,EAAGtC,MAAOwJ,eAAgB,kBAAMjK,EAAMiK,eAAelH,EAAGiF,MAA7IhF,GAC7B,cAACiS,EAAD,CAAoBvU,QAAS,kBAAMV,EAAMiK,eAAelH,EAAGiF,KAA3D,2CAAahF,QAfjBD,EAAGiF,OAqBV,cAACiN,EAAD,iFAEHpC,EAASvL,mBAMpBtG,YAAa,qHACbuE,OAAQ,CAAClD,UAAWK,UAAWf,WAC/BV,MAAO,6CACPC,IAAK,QAEQ6V,a,4GCtFToG,EAAa,SAACnd,GAAD,OACjB,eAAC,IAAD,CAAQS,MAAOT,EAAMS,MAAOE,SAAUX,EAAMW,SAA5C,UACE,cAAC,IAAOsC,OAAR,CAAexC,MAAM,KAArB,gBACA,cAAC,IAAOwC,OAAR,CAAexC,MAAM,IAArB,mBAUS6B,EAA2D,CACtEjC,UADsE,SAC3DL,GACT,OACE,cAAC,IAAD,CACEqB,IAAI,IACJC,IAAI,MACJC,MAAO,CAAEC,MAAO,KAChBf,MAAOgB,OAAOzB,EAAMS,MAAM+B,MAC1B7B,SAAU,SAACC,GAAD,OAAOZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiC+B,KAAMd,OAAOd,OAC/DoE,WAAY,cAACmY,EAAD,CAAY1c,MAAOT,EAAMS,MAAMgC,KAAM9B,SAAU,SAAAC,GAAC,OAAIZ,EAAMW,SAAN,2BAAoBX,EAAMS,OAA1B,IAAiCgC,KAAM7B,WAI7GG,aAAc,CACZyB,KAAM,EACNC,KAAM,S","file":"static/js/main.f89e5928.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { SketchPicker } from 'react-color'\r\nimport styled from 'styled-components'\r\n\r\nconst Container = styled.div`\r\n  display: inline-block;\r\n  position: relative;\r\n  width: 190px;\r\n  height: 30px;\r\n`\r\n\r\nconst Swatch = styled.div<{color: string}>`\r\n  background-color: ${props => props.color};\r\n  border-radius: 4px;\r\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, .1);\r\n  display: inline-block;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n`\r\n\r\nconst Popover = styled.div`\r\n  position: absolute;\r\n  z-index: 2;\r\n  left: -80px;\r\n  top: -271px\r\n`\r\n\r\nconst Cover = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n`\r\n\r\nconst Color: StyleDefinition<string> = {\r\n  Blueprint (props: { value: string; onChange: (value: string) => void }) {\r\n    const [display, setDisplay] = useState(false)\r\n\r\n    return (\r\n      <Container>\r\n        <Swatch color={props.value} onClick={() => setDisplay(true)}/>\r\n        {display && (\r\n          <Popover>\r\n            <Cover onClick={() => setDisplay(false)}/>\r\n            <SketchPicker color={props.value} onChange={(v) => props.onChange(v.hex)} />\r\n          </Popover>\r\n        )}\r\n      </Container>\r\n    )\r\n  },\r\n  render (value: string) {\r\n    return { color: value }\r\n  },\r\n  defaultValue: '#000',\r\n  description: '',\r\n  title: '字体颜色',\r\n  key: 'Color'\r\n}\r\nexport default Color\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { rem } from './utils'\r\nimport { InputNumber } from 'antd'\r\nimport styled from 'styled-components'\r\n\r\nconst Container = styled.div`\r\n  flex: auto;\r\n`\r\n\r\nconst PaddingInput = (props: {title: string, value: number, onChange: (value: number) => void}) => (\r\n  <InputNumber addonBefore={props.title} min=\"0\" max=\"999\" style={{ width: '100%' }} value={String(props.value)} onChange={(v) => props.onChange(Number(v))} />\r\n)\r\n\r\nconst Padding:StyleDefinition<{top: number, bottom: number, left: number, right: number}> = {\r\n  Blueprint (props: { value: { top: number; bottom: number; left: number; right: number }; onChange: (value: { top: number; bottom: number; left: number; right: number }) => void }) {\r\n    return (\r\n      <Container>\r\n        <PaddingInput title=\"上\" value={props.value.top} onChange={(v) => props.onChange({ ...props.value, top: v })} />\r\n        <PaddingInput title=\"下\" value={props.value.bottom} onChange={(v) => props.onChange({ ...props.value, bottom: v })} />\r\n        <PaddingInput title=\"左\" value={props.value.left} onChange={(v) => props.onChange({ ...props.value, left: v })} />\r\n        <PaddingInput title=\"右\" value={props.value.right} onChange={(v) => props.onChange({ ...props.value, right: v })} />\r\n      </Container>\r\n    )\r\n  },\r\n  render (value: { top: number; bottom: number; left: number; right: number }) {\r\n    return {\r\n      paddingTop: rem(value.top),\r\n      paddingBottom: rem(value.bottom),\r\n      paddingLeft: rem(value.left),\r\n      paddingRight: rem(value.right)\r\n    }\r\n  },\r\n  defaultValue: { bottom: 0, left: 0, right: 0, top: 0 },\r\n  title: '边距',\r\n  description: '',\r\n  key: 'Padding'\r\n}\r\n\r\nexport default Padding\r\n","import { StyleDefinition } from './types'\r\nimport { rem } from './utils'\r\nimport { SizeInputStyle, SizeInputValue } from './components/size-input-style'\r\n\r\nconst MinHeight: StyleDefinition<SizeInputValue> = {\r\n  ...SizeInputStyle,\r\n  render (value: SizeInputValue) {\r\n    return { minHeight: value.size ? (value.unit === 'px' ? rem(value.size) : `${value.size}${value.unit}`) : 'auto' }\r\n  },\r\n  title: '最小高',\r\n  description: '',\r\n  key: 'MinHeight'\r\n}\r\nexport default MinHeight\r\n","import { StyleDefinition } from './types'\r\nimport { rem } from './utils'\r\nimport { SizeInputStyle, SizeInputValue } from './components/size-input-style'\r\n\r\nconst MaxHeight: StyleDefinition<SizeInputValue> = {\r\n  ...SizeInputStyle,\r\n  render (value: SizeInputValue) {\r\n    return { maxHeight: value.size ? (value.unit === 'px' ? rem(value.size) : `${value.size}${value.unit}`) : 'none' }\r\n  },\r\n  title: '最大高',\r\n  description: '',\r\n  key: 'MaxHeight'\r\n}\r\nexport default MaxHeight\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { Select } from 'antd'\r\n\r\ntype Category = 'center' | 'flex-start' | 'flex-end' | 'space-between' | 'space-around' | 'space-evenly'\r\n\r\nconst Categories: {title: string, value: Category}[] = [\r\n  {\r\n    title: '开始',\r\n    value: 'flex-start'\r\n  },\r\n  {\r\n    title: '居中',\r\n    value: 'center'\r\n  },\r\n  {\r\n    title: '结束',\r\n    value: 'flex-end'\r\n  },\r\n  {\r\n    title: '间距相等',\r\n    value: 'space-between'\r\n  },\r\n  {\r\n    title: '围绕间隔',\r\n    value: 'space-around'\r\n  },\r\n  {\r\n    title: '边距相等',\r\n    value: 'space-evenly'\r\n  }\r\n]\r\n\r\nconst JustifyContent: StyleDefinition<Category> = {\r\n  Blueprint (props: { value: Category; onChange: (value: Category) => void }) {\r\n    return (\r\n      <Select\r\n        value={props.value}\r\n        onChange={props.onChange}\r\n        style={{ width: 190 }}\r\n      >\r\n        {Categories.map((it, index) => {\r\n          return (<Select.Option key={index} value={it.value}>{it.title}</Select.Option>)\r\n        })}\r\n      </Select>\r\n    )\r\n  },\r\n  render (value: Category) {\r\n    return { justifyContent: value }\r\n  },\r\n  title: '主方向排列',\r\n  defaultValue: 'flex-start',\r\n  description: '',\r\n  key: 'JustifyContent'\r\n}\r\n\r\nexport default JustifyContent\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { rem } from './utils'\r\nimport { InputNumber } from 'antd'\r\n\r\nconst FontSize: StyleDefinition<number> = {\r\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\r\n    return (\r\n      <InputNumber min=\"12\" max=\"99\" style={{ width: 190 }} value={String(props.value)} onChange={(v) => props.onChange(Number(v))} />\r\n    )\r\n  },\r\n  render (value: number) {\r\n    return {\r\n      fontSize: rem(value)\r\n    }\r\n  },\r\n  defaultValue: 14,\r\n  description: '',\r\n  title: '字体大小',\r\n  key: 'FontSize'\r\n}\r\n\r\nexport default FontSize\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { Select } from 'antd'\r\n\r\nconst FontWeight: StyleDefinition<number> = {\r\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\r\n    return (\r\n      <Select\r\n        value={props.value}\r\n        onChange={props.onChange}\r\n        style={{ width: 190 }}\r\n      >\r\n        {[400, 500, 600, 700, 800, 900].map((it, index) => {\r\n          return (<Select.Option key={index} value={it}>{it}</Select.Option>)\r\n        })}\r\n      </Select>\r\n    )\r\n  },\r\n  render (value: number) {\r\n    return { fontWeight: value }\r\n  },\r\n  defaultValue: 400,\r\n  description: '',\r\n  title: '字体粗细',\r\n  key: 'FontWeight'\r\n}\r\n\r\nexport default FontWeight\r\n","import React from 'react'\r\nimport { Switch } from 'antd'\r\nimport { StyleDefinition } from './types'\r\n\r\nconst Ellipsis: StyleDefinition<boolean> = {\r\n  Blueprint (props: { value: boolean; onChange: (value: boolean) => void }) {\r\n    return (\r\n      <Switch checked={props.value} checkedChildren=\"开启\" unCheckedChildren=\"关闭\" onChange={(v) => props.onChange(v)} />\r\n    )\r\n  },\r\n  render (value: boolean) {\r\n    return { overflow: value ? 'hidden' : 'unset', textOverflow: value ? 'ellipsis' : 'unset', whiteSpace: 'nowrap' }\r\n  },\r\n  defaultValue: false,\r\n  description: '配置最大宽/高使用',\r\n  title: '超出省略',\r\n  key: 'Ellipsis'\r\n}\r\n\r\nexport default Ellipsis\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { Switch } from 'antd'\r\n\r\ntype Direction = 'row' | 'column'\r\nconst FlexDirection: StyleDefinition<Direction> = {\r\n  title: '方向',\r\n  defaultValue: 'row',\r\n  description: '',\r\n  Blueprint (props: { value: Direction; onChange: (value: Direction) => void }) {\r\n    return (\r\n      <Switch checked={props.value === 'row'} checkedChildren=\"横\" unCheckedChildren=\"竖\" onChange={(v) => props.onChange(v ? 'row' : 'column')} />\r\n    )\r\n  },\r\n  render (value: Direction) {\r\n    return { flexDirection: value }\r\n  },\r\n  key: 'FlexDirection'\r\n}\r\nexport default FlexDirection\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { InputNumber } from 'antd'\r\n\r\nconst FlexGrow: StyleDefinition<number> = {\r\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\r\n    return (\r\n      <InputNumber min=\"0\" max=\"99\" style={{ width: 190 }} value={String(props.value)} onChange={(v) => props.onChange(Number(v))} />\r\n    )\r\n  },\r\n  render (value: number) {\r\n    return { flexGrow: value }\r\n  },\r\n  defaultValue: 1,\r\n  title: '主方向占比',\r\n  description: '',\r\n  key: 'FlexGrow'\r\n}\r\n\r\nexport default FlexGrow\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { Select } from 'antd'\r\n\r\ntype Category = 'center' | 'flex-start' | 'flex-end'\r\n\r\nconst Categories: { title: string, value: Category }[] = [\r\n  {\r\n    title: '开始',\r\n    value: 'flex-start'\r\n  },\r\n  {\r\n    title: '居中',\r\n    value: 'center'\r\n  },\r\n  {\r\n    title: '结束',\r\n    value: 'flex-end'\r\n  }\r\n]\r\n\r\nconst AlignItems: StyleDefinition<Category> = {\r\n  Blueprint (props: { value: Category; onChange: (value: Category) => void }) {\r\n    return (\r\n      <Select\r\n        value={props.value}\r\n        onChange={props.onChange}\r\n        style={{ width: 190 }}\r\n      >\r\n        {Categories.map((it, index) => {\r\n          return (<Select.Option key={index} value={it.value}>{it.title}</Select.Option>)\r\n        })}\r\n      </Select>\r\n    )\r\n  },\r\n  render (value: Category) {\r\n    return { alignItems: value }\r\n  },\r\n  title: '副方向排列',\r\n  defaultValue: 'center',\r\n  description: '',\r\n  key: 'AlignItems'\r\n}\r\n\r\nexport default AlignItems\r\n","import { InputNumber } from 'antd'\r\nimport React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { rem } from './utils'\r\n\r\nconst TextIndent: StyleDefinition<number> = {\r\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\r\n    return (\r\n      <InputNumber min=\"0\" max=\"999\" style={{ width: 190 }} value={String(props.value)} onChange={(val) => props.onChange(Number(val))} />\r\n    )\r\n  },\r\n  render (value: number) {\r\n    return { textIndent: rem(value) }\r\n  },\r\n  defaultValue: 0,\r\n  description: '',\r\n  title: '首行缩进',\r\n  key: 'TextIndent'\r\n}\r\nexport default TextIndent\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { InputNumber } from 'antd'\r\n\r\nconst LetterSpacing: StyleDefinition<number> = {\r\n  Blueprint (props: { value: number; onChange: (value: number) => void }) {\r\n    return (\r\n      <InputNumber min=\"0\" max=\"999\" style={{ width: 190 }} value={String(props.value)} onChange={(val) => props.onChange(Number(val))} />\r\n    )\r\n  },\r\n  defaultValue: 0,\r\n  description: '',\r\n  key: 'LetterSpacing',\r\n  render (value: number) {\r\n    return { letterSpacing: value }\r\n  },\r\n  title: '文字间隔'\r\n}\r\nexport default LetterSpacing\r\n","import { StyleDefinition } from './types'\r\nimport { rem } from './utils'\r\nimport { SizeInputStyle, SizeInputValue } from './components/size-input-style'\r\n\r\nconst MinWidth: StyleDefinition<SizeInputValue> = {\r\n  ...SizeInputStyle,\r\n  render (value: SizeInputValue) {\r\n    return { minWidth: value.size ? (value.unit === 'px' ? rem(value.size) : `${value.size}${value.unit}`) : 'auto' }\r\n  },\r\n  title: '最小宽',\r\n  description: '',\r\n  key: 'MinWidth'\r\n}\r\nexport default MinWidth\r\n","import { StyleDefinition } from './types'\r\nimport { rem } from './utils'\r\nimport { SizeInputStyle, SizeInputValue } from './components/size-input-style'\r\n\r\nconst MaxWidth: StyleDefinition<SizeInputValue> = {\r\n  ...SizeInputStyle,\r\n  render (value: SizeInputValue) {\r\n    return { maxWidth: value.size ? (value.unit === 'px' ? rem(value.size) : `${value.size}${value.unit}`) : 'none' }\r\n  },\r\n  title: '最大宽',\r\n  description: '',\r\n  key: 'MaxWidth'\r\n}\r\nexport default MaxWidth\r\n","import React from 'react'\r\nimport { StyleDefinition } from './types'\r\nimport { rem } from './utils'\r\nimport { InputNumber, Select } from 'antd'\r\nimport styled from 'styled-components'\r\nimport Color from './color'\r\n\r\nconst Container = styled.div`\r\n  flex: auto;\r\n`\r\n\r\nconst ItemsContainer = styled.div`\r\n  display: flex;\r\n\r\n  > div:last-child {\r\n    width: 58px;\r\n\r\n    > div:nth-child(2) {\r\n      left: -212px;\r\n      top: -279px;\r\n    }\r\n  }\r\n`\r\n\r\ntype LineStyle = 'solid' | 'double' | 'dotted'\r\ninterface BlockStyle {\r\n  size: number,\r\n  style: LineStyle,\r\n  color: string\r\n}\r\n\r\ninterface Value {\r\n  top: BlockStyle\r\n  bottom: BlockStyle\r\n  left: BlockStyle\r\n  right: BlockStyle\r\n}\r\n\r\nconst StyleSelect = (props: { value: LineStyle, onChange: (value: LineStyle) => void }) => (\r\n  <Select value={props.value} onChange={props.onChange}>\r\n    <Select.Option value=\"solid\">实线</Select.Option>\r\n    <Select.Option value=\"double\">双实</Select.Option>\r\n    <Select.Option value=\"dotted\">点线</Select.Option>\r\n  </Select>\r\n)\r\n\r\nconst Items = (props: { title: string, value: BlockStyle, onChange: (value: BlockStyle) => void }) => (\r\n  <ItemsContainer>\r\n    <InputNumber\r\n      addonBefore={props.title}\r\n      min=\"0\"\r\n      max=\"999\"\r\n      style={{ width: 190 }}\r\n      value={String(props.value.size)}\r\n      onChange={(v) => props.onChange({ ...props.value, size: Number(v) })}\r\n      addonAfter={<StyleSelect value={props.value.style} onChange={(v) => props.onChange({ ...props.value, style: v })} />}\r\n    />\r\n    <Color.Blueprint value={props.value.color} onChange={v => props.onChange({ ...props.value, color: v })} />\r\n  </ItemsContainer>\r\n)\r\nconst Border: StyleDefinition<Value> = {\r\n  Blueprint (props: { value: Value; onChange: (value: Value) => void }) {\r\n    return (\r\n      <Container>\r\n        <Items title=\"上\" value={props.value.top} onChange={(v) => props.onChange({ ...props.value, top: v })} />\r\n        <Items title=\"下\" value={props.value.bottom} onChange={(v) => props.onChange({ ...props.value, bottom: v })} />\r\n        <Items title=\"左\" value={props.value.left} onChange={(v) => props.onChange({ ...props.value, left: v })} />\r\n        <Items title=\"右\" value={props.value.right} onChange={(v) => props.onChange({ ...props.value, right: v })} />\r\n      </Container>\r\n    )\r\n  },\r\n  render (value: Value) {\r\n    return {\r\n      borderTop: `${rem(value.top.size)} ${value.top.style} ${value.top.color}`,\r\n      borderBottom: `${rem(value.bottom.size)} ${value.bottom.style} ${value.bottom.color}`,\r\n      borderLeft: `${rem(value.left.size)} ${value.left.style} ${value.left.color}`,\r\n      borderRight: `${rem(value.right.size)} ${value.right.style} ${value.right.color}`\r\n    }\r\n  },\r\n  defaultValue: {\r\n    bottom: { size: 0, color: '#000', style: 'solid' },\r\n    left: { size: 0, color: '#000', style: 'solid' },\r\n    right: { size: 0, color: '#000', style: 'solid' },\r\n    top: { size: 0, color: '#000', style: 'solid' }\r\n  },\r\n  description: '',\r\n  title: '边距线',\r\n  key: 'Border'\r\n}\r\n\r\nexport default Border\r\n","import { CSSProperties } from 'react'\r\n\r\nimport { Style, StyleDefinition, StyleSerialize } from './types'\r\nimport { cloneDeep } from 'lodash'\r\nimport { STYLE_DEFINITIONS } from '../index'\r\n\r\n/**\r\n * 使用 html2pdf 生成 pdf, html -> canvas -> img -> pdf\r\n * 为了获取高清图片,需要放大倍数再缩小成打印尺寸,因此不能直接使用px, 设置 html.fontSize = 100, 打印时扩大倍数\r\n * @param px\r\n */\r\nexport const rem = (px: number): string => {\r\n  return `${px / 100}rem`\r\n}\r\n\r\nexport const render = (styles: Style<any>[]): CSSProperties => {\r\n  return styles.reduce<CSSProperties>((pv, it) => {\r\n    return Object.assign(pv, it.definition.render(it.value)) as CSSProperties\r\n  }, { display: 'flex' })\r\n}\r\n\r\nconst LAYOUT_STYLE = ['FlexDirection', 'JustifyContent', 'AlignItems', 'FlexGrow', 'MinHeight', 'MinWidth', 'MaxHeight', 'MaxWidth']\r\nexport const renderLayout = (styles: Style<any>[]): CSSProperties => {\r\n  return styles.reduce<CSSProperties>((pv, it) => {\r\n    if (!LAYOUT_STYLE.includes(it.definition.key)) {\r\n      return pv\r\n    }\r\n    return Object.assign(pv, it.definition.render(it.value)) as CSSProperties\r\n  }, { display: 'flex' })\r\n}\r\n\r\nexport const createStyle = (style: StyleSerialize | StyleDefinition<any>, value?: any): Style<any> => {\r\n  if ((style as StyleSerialize).definition) {\r\n    const serialize = style as StyleSerialize\r\n    return {\r\n      value: value ?? serialize.value,\r\n      definition: STYLE_DEFINITIONS.find(it => it.key === serialize.definition)!,\r\n      toJSON () {\r\n        return {\r\n          definition: this.definition.key,\r\n          value: this.value\r\n        }\r\n      }\r\n    }\r\n  }\r\n  const definition = style as StyleDefinition<any>\r\n  return {\r\n    value: cloneDeep(definition.defaultValue),\r\n    definition: definition,\r\n    toJSON () {\r\n      return {\r\n        definition: this.definition.key,\r\n        value: value ?? this.value\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const getStyleDefinitions = async () => {\r\n  return [\r\n    await import('./flex-direction'),\r\n    await import('./justify-content'),\r\n    await import('./align-items'),\r\n    await import('./flex-grow'),\r\n    await import('./font-size'),\r\n    await import('./font-weight'),\r\n    await import('./text-indent'),\r\n    await import('./letter-spacing'),\r\n    await import('./color'),\r\n    await import('./ellipsis'),\r\n    await import('./min-height'),\r\n    await import('./min-width'),\r\n    await import('./max-height'),\r\n    await import('./max-width'),\r\n    await import('./padding'),\r\n    await import('./border')\r\n  ]\r\n}\r\n\r\nexport const getDefaultTemplateStyles = async () => {\r\n  return [\r\n    await import('./font-size'),\r\n    await import('./font-weight'),\r\n    await import('./ellipsis'),\r\n    await import('./color'),\r\n    await import('./padding')\r\n  ]\r\n}\r\n","import React, { useState, useRef } from 'react'\r\nimport { Metadata, MetadataItem } from '../../types'\r\nimport styled from 'styled-components'\r\nimport { Input, Popover as AntdPopover, Tag, message } from 'antd'\r\nimport { TextAreaRef } from 'antd/lib/input/TextArea'\r\nimport { EditTwoTone } from '@ant-design/icons'\r\n\r\nconst Container = styled.div`\r\n`\r\n\r\nconst InputArea = styled.div<{ focus: boolean }>`\r\n  position: relative;\r\n  ${props => !props.focus ? '' : 'z-index: 3;'}\r\n`\r\n\r\nconst Popover = styled.div`\r\n  position: absolute;\r\n  z-index: 2;\r\n`\r\n\r\nconst Cover = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n`\r\n\r\nconst MetadataContainer = styled.div`\r\n  width: 400px;\r\n  height: calc(100vh - 60px);\r\n  top: 60px;\r\n  right: 300px;\r\n  background-color: #fff;\r\n  border: 1px solid #ddd;\r\n  position: fixed;\r\n  overflow: auto;\r\n`\r\nconst Title = styled.div`\r\n  font-size: 16px;\r\n  padding: 10px 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n`\r\n\r\nconst Items = styled.div`\r\n  padding: 10px 15px;\r\n  border-bottom: 1px solid #aaa;\r\n  cursor: pointer;\r\n\r\n  p {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    margin: 0;\r\n  }\r\n\r\n  > div:nth-child(1) {\r\n    display: flex;\r\n    margin-bottom: 10px;\r\n\r\n    > p:nth-child(2) {\r\n      flex: auto;\r\n    }\r\n\r\n    > p:nth-child(3) {\r\n      min-width: 70px;\r\n      text-align: right;\r\n    }\r\n  }\r\n`\r\n\r\nexport type Type = 'text' | 'object'\r\n\r\nconst MetadataInput = (props: { metadata: Metadata, value: string, onChange:(value: string) => void, getData: (value: string | string[]) => any, type?: Type }) => {\r\n  const [focus, setFocus] = useState(false)\r\n  const [search, setSearch] = useState<{ value: string, items: MetadataItem[] }>({ value: '', items: [] })\r\n  const ref = useRef<TextAreaRef | null>(null)\r\n\r\n  const changeInput = (value: string) => {\r\n    if (props.type === 'object') {\r\n      return message.warn('请点击数据源进行输入')\r\n    }\r\n    props.onChange(value)\r\n  }\r\n\r\n  const changeSearch = (value: string) => {\r\n    const items = props.metadata.items.filter(it => it.path.includes(value) || it.alias?.includes(value))\r\n\r\n    setSearch({\r\n      value,\r\n      items\r\n    })\r\n  }\r\n\r\n  const onFocus = () => {\r\n    setFocus(true)\r\n  }\r\n\r\n  const entryMetadata = (item: MetadataItem) => {\r\n    if (props.type === 'object') {\r\n      return props.onChange(item.path)\r\n    }\r\n\r\n    const selectionStart = ref.current?.resizableTextArea?.textArea.selectionStart ?? 0\r\n    const val = `\\${${item.alias ? `${item.alias}[${item.id}]` : item.path}}`\r\n    if (selectionStart === 0) {\r\n      props.onChange(`${val}${props.value}`)\r\n      ref.current!.resizableTextArea!.textArea.selectionStart = 0\r\n    } else if (selectionStart === props.value.length) {\r\n      props.onChange(`${props.value}${val}`)\r\n    } else {\r\n      const before = props.value.substring(0, selectionStart)\r\n      const after = props.value.substring(selectionStart)\r\n      const start = /\\${[^}]+$/g.exec(before)\r\n      const end = /((?!\\${).)}/.exec(after)\r\n      // 判断光标是否处于${占面符中}，是则替换当前值\r\n      if (start && end) {\r\n        props.onChange(`${before.substring(0, start.index)}${val}${after.substring(end.index + 2)}`)\r\n      } else {\r\n        props.onChange(`${before}${val}${after}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <InputArea focus={focus}>\r\n        <Input.TextArea\r\n          ref={value => { ref.current = value }}\r\n          style={{ height: props.type === 'object' ? 60 : 150 }}\r\n          placeholder=\"请输入内容\" value={props.value}\r\n          onChange={(ev) => changeInput(ev.target.value)}\r\n          onFocus={onFocus}\r\n        />\r\n      </InputArea>\r\n      {focus && (\r\n        <Popover>\r\n          <Cover onClick={() => setFocus(false)}/>\r\n          <MetadataContainer>\r\n            <Title onClick={() => window.open(`/metadata/${props.metadata.id}`)}>\r\n              数据源\r\n              <EditTwoTone />\r\n            </Title>\r\n            <Input allowClear value={search.value} onChange={ev => changeSearch(ev.target.value)} placeholder=\"请输入搜索内容\" />\r\n            {(props.metadata.items.length === 0 || (search.value && search.items.length === 0)) && (<div>无内容</div>)}\r\n            {props.metadata.items.map((it, index) => (\r\n              <Items key={index} onClick={() => entryMetadata(it)}>\r\n                <div>\r\n                  <AntdPopover content={it.path} trigger=\"hover\" placement=\"left\">\r\n                    <p><Tag color=\"blue\">{it?.alias ?? it.path}</Tag></p>\r\n                  </AntdPopover>\r\n                  <p/>\r\n                  <p>\r\n                    {it.required && (<Tag color=\"cyan\">必填</Tag>)}\r\n                    {!it.required && (<Tag color=\"red\">选填</Tag>)}\r\n                  </p>\r\n                </div>\r\n                <div>\r\n                  <p>{props.getData(`\\${${it.path}}`)}</p>\r\n                </div>\r\n              </Items>\r\n            ))}\r\n          </MetadataContainer>\r\n        </Popover>\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default MetadataInput\r\n","import React, { CSSProperties } from 'react'\r\nimport { ContentDefinition } from './types'\r\nimport { Metadata } from '../types'\r\nimport MetadataInput from './components/metadata-input'\r\n\r\nconst Text: ContentDefinition<string, string> = {\r\n  key: 'Text',\r\n  defaultValue: '',\r\n  styles: [],\r\n  description: '单独的文本.用于医院标题,提示信息等内容',\r\n  title: '文本',\r\n  Blueprint (props: { value: string; onChange: (value: string) => void, metadata: Metadata, getData: (value: string | string[]) => any }) {\r\n    return (\r\n      <MetadataInput {...props} />\r\n    )\r\n  },\r\n  Render (props: { result?: string; style: CSSProperties}) {\r\n    if (!props.result) {\r\n      // 不显示，用于通过编译\r\n      return (<span style={{ display: 'none' }} />)\r\n    }\r\n\r\n    const direction = props.style.flexDirection\r\n    // 判断换行符进行方法切换， 如无换行符且方向为 column 进行单字符换行\r\n    const lines = props.result.split('\\n').filter(it => it)\r\n    if (direction === 'column') {\r\n      return (\r\n        <div style={props.style}>{\r\n          (lines.length > 1 ? lines : Array.from(props.result)).map((it, index) => { return (<div key={index}>{it}</div>) })\r\n        }</div>\r\n      )\r\n    }\r\n    return (\r\n      <div style={props.style}>\r\n        <div>\r\n          {lines.map((it, index) => (<span key={index}>{it}<br/></span>))}\r\n        </div>\r\n      </div>\r\n    )\r\n  },\r\n  Building (props: { value: string, result?: string; style:CSSProperties; onChangeActive: () => void }) {\r\n    if (!props.result) {\r\n      return (<div>{props.value}</div>)\r\n    }\r\n    const direction = props.style.flexDirection\r\n    // 判断换行符进行方法切换， 如无换行符且方向为 column 进行单字符换行\r\n    const lines = props.result.split('\\n').filter(it => it)\r\n    if (direction === 'column') {\r\n      return (\r\n        <div style={props.style} onClick={() => props.onChangeActive()}>{\r\n          (lines.length > 1 ? lines : Array.from(props.result)).map((it, index) => { return (<div key={index}>{it}</div>) })\r\n        }</div>\r\n      )\r\n    }\r\n    return (\r\n      <div style={props.style} onClick={() => props.onChangeActive()}>\r\n        <div>\r\n          {lines.map((it, index) => (<span key={index}>{it}<br/></span>))}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Text\r\n","export enum DroppableIds {\r\n  Building = 'Building',\r\n  Material = 'Material',\r\n}\r\n\r\nexport enum MaterialType {\r\n  Layout = 'layout',\r\n  Content = 'content',\r\n}\r\n","import React, { ReactNode } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport logo from '../asserts/images/logo.png'\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  height: 62px;\r\n  border-bottom: 1px solid #ebe0e0;\r\n  display: flex;\r\n  justify-content: center;\r\n`\r\nconst Nav = styled.div<{isFull: boolean}>`\r\n  width: ${props => props.isFull ? '100%' : '1230px'};\r\n  padding: ${props => props.isFull ? '0 30px' : '0'};\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  > div:nth-child(1) {\r\n    display: flex;\r\n    cursor: pointer;\r\n\r\n    > p {\r\n      font-size: 28px;\r\n      color: chocolate;\r\n      margin-bottom: 0;\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n`\r\nconst Logo = styled.img.attrs(() => ({ src: logo }))`\r\n  width: 60px;\r\n`\r\n\r\nconst Header = (props: { className?: string, isFull?: boolean, children?: ReactNode }) => {\r\n  const navigate = useNavigate()\r\n\r\n  return (\r\n    <Container className={props.className} >\r\n      <Nav isFull={props?.isFull ?? true }>\r\n        <div onClick={() => navigate('/')}>\r\n          <Logo/>\r\n          <p>\r\n            报告编辑器\r\n          </p>\r\n        </div>\r\n        {props.children}\r\n      </Nav>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","export default \"data:image/png;base64,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\"","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport { Outlet, useLocation, useNavigate } from 'react-router-dom'\nimport Header from '../components/Header'\n\nconst Container = styled.div`\n  width: 100vw;\n  height: 100vh;\n`\n\nconst Content = styled.div`\n  width: 1230px;\n  margin: 0 auto;\n  display: flex;\n  min-height: 90%;\n  padding-top: 30px;\n`\n\nconst Aside = styled.aside`\n  width: 300px;\n  margin-right: 30px;\n  border-radius: 6px;\n`\n\nconst Article = styled.article`\n  width: 900px;\n  border: 1px solid #ebe0e0;\n  border-radius: 6px;\n`\n\nconst Menu = styled.div<{index: number, isActive: boolean}>`\n  font-size: 23px;\n  color: chocolate;\n  border-bottom: 1px solid #ebe0e0;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: ${props => (props.index + 2) * 18}px;\n  background-color: ${props => props.isActive ? 'peachpuff' : '#f3f3f3'};\n  cursor: pointer;\n`\nconst Description = styled.div`\n  display: flex;\n  height: 54px;\n  background-color: peachpuff;\n  color: chocolate;\n  font-size: 20px;\n  align-items: center;\n  padding-left: 30px;\n`\n\nconst MENUS = [\n  {\n    title: '1. 数据编辑',\n    url: '/metadata',\n    description: '配置你的数据格式,为打印时的动态数据作准备'\n  },\n  {\n    title: '2. 模板编辑',\n    url: '/template',\n    description: '结合已保存的数据开始编辑模板'\n  },\n  {\n    title: '3. 打印预览',\n    url: '/preview',\n    description: '已完成数据和模板编辑，开始进行预览和打印'\n  },\n  {\n    title: ' 说明文档',\n    url: 'https://github.com/ansoxlu/report-editor'\n  }\n]\n\nconst Home = () => {\n  const navigate = useNavigate()\n  const location = useLocation()\n  const menu = MENUS.find(it => it.url === location.pathname)\n\n  useEffect(() => {\n    if (!menu) {\n      navigate(MENUS[0].url)\n    }\n  })\n\n  if (!menu) {\n    return null\n  }\n\n  const jump = (url: string) => {\n    if (url.startsWith('http')) {\n      window.open(url)\n    } else {\n      navigate(url)\n    }\n  }\n\n  return (\n    <Container>\n      <Header/>\n      <Content>\n        <Aside>\n          {MENUS.map((it, index) => (\n            <Menu key={index} index={index} isActive={it.url === menu.url} onClick={() => jump(it.url)}>{it.title}</Menu>\n          ))}\n        </Aside>\n        <Article>\n          <Description>\n            {menu.description}\n          </Description>\n          <Outlet/>\n        </Article>\n      </Content>\n    </Container>\n  )\n}\n\nexport default Home\n","import React from 'react'\r\nimport { Result, Button } from 'antd'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Header from '../components/Header'\r\n\r\nconst Error404 = () => {\r\n  const navigate = useNavigate()\r\n  return (\r\n    <div>\r\n      <Header/>\r\n      <Result\r\n        status=\"404\"\r\n        title=\"404\"\r\n        subTitle=\"没有找到内容\"\r\n        extra={<Button type=\"primary\" onClick={() => navigate('/')}>返回首页</Button>}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Error404\r\n","export const DATE = 'YYYY-MM-DD'\r\nexport const TIME = 'hh:mm:ss'\r\nexport const DATE_TIME = `${DATE} ${TIME}`\r\n","import { Metadata, Template } from '../definition/types'\r\n\r\nexport const METATABLES: Metadata[] = [\r\n  {\r\n    id: 'example',\r\n    title: '项目简介',\r\n    description: '暂无说明',\r\n    createdAt: '2022-01-01 01:02:03',\r\n    updatedAt: '2022-02-12 10:10:30',\r\n    items: [{ id: 1, path: 'author', required: true }, { id: 2, path: 'components[]', required: true }, { id: 3, path: 'description[]', required: true }, { id: 4, path: 'github', required: true }, { id: 5, path: 'status', required: true }, { id: 6, path: 'title', required: true }],\r\n    json: '{\"title\":\"报告编辑器\",\"author\":\"ansoxlu\",\"github\":\"https://github.com/ansoxlu/report-editor\",\"status\":\"开发中\",\"description\":[\"该项目以动态数据生成PDF报告文件为目标\",\"允许A4/A5等标准或自定义纸张格式\",\"允许自动分页/固定分页/页头页尾\"],\"components\":[\"1.文本\",\"2. 图片(待完成)\",\"3. 一维码(待完成)\",\"4. 二维码(待完成)\",\"5. 表格(待完成)\",\"6. 自定义表格(隐藏属性)(待完成)\"]}'\r\n  }\r\n]\r\n\r\nexport const TEMPLATES: Template[] = [\r\n  {\r\n    id: 'example',\r\n    title: '项目简介',\r\n    description: '暂无说明',\r\n    createdAt: '2022-01-01 01:02:03',\r\n    updatedAt: '2022-01-01 01:02:03',\r\n    metadataId: 'example',\r\n    // eslint-disable-next-line no-template-curly-in-string\r\n    json: '{\"footer\":-1,\"header\":-1,\"width\":210,\"height\":297,\"listIndexes\":[],\"pageIndexes\":[],\"styles\":[{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"Color\",\"value\":\"#000\"}],\"layouts\":[{\"contents\":[{\"value\":\"${title}\",\"id\":\"7d5355d7-3557-4f93-a7c5-1c43c23c0811\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"center\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":28},{\"definition\":\"FontWeight\",\"value\":800},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":10},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":20,\"left\":0,\"right\":0,\"top\":30}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":3,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"d22c618e-731b-4491-93c7-3c39e24e4e8e\",\"definition\":\"Text\"}],\"id\":\"d22c618e-731b-4491-93c7-3c39e24e4e8e\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"作者： ${author}\",\"id\":\"a20f698f-7505-4ba9-b2b3-220f7e2dc3d3\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":50,\"right\":0,\"top\":20}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"44b12a83-452a-4b72-a1b7-e00ce6dac700\",\"definition\":\"Text\"}],\"id\":\"44b12a83-452a-4b72-a1b7-e00ce6dac700\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"状态：${status}\",\"id\":\"1294eaa1-254b-4e79-a6ce-fca2a3ad0502\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":50,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"dd1772ec-8e51-4b3b-954c-2a30beef3945\",\"definition\":\"Text\"}],\"id\":\"dd1772ec-8e51-4b3b-954c-2a30beef3945\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"地址：${github}\",\"id\":\"0c451498-d2a7-4e21-b10b-654c7dadd494\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":30,\"left\":50,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"28cd69a5-c2e7-4190-9def-0ed2bc2871ab\",\"definition\":\"Text\"}],\"id\":\"28cd69a5-c2e7-4190-9def-0ed2bc2871ab\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"说明：\",\"id\":\"3ef45054-252a-43b2-9a91-b5fa61e39655\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-end\"},{\"definition\":\"AlignItems\",\"value\":\"flex-start\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":100,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"617c209b-58ee-4e29-b274-81659a63a620\",\"definition\":\"Text\"},{\"value\":\"${description[]}\",\"id\":\"9ac80ad3-a2e2-4467-b6db-3648980d319b\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"617c209b-58ee-4e29-b274-81659a63a620\",\"definition\":\"Text\"}],\"id\":\"617c209b-58ee-4e29-b274-81659a63a620\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}}],\"definition\":\"Many\"},{\"contents\":[{\"value\":\"组件：\",\"id\":\"3e2953a8-480d-4e71-80e3-d3a025bf6eee\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-end\"},{\"definition\":\"AlignItems\",\"value\":\"flex-start\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":100,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"d7eaccbd-0c72-411a-afa4-286a0a5d951f\",\"definition\":\"Text\"},{\"value\":\"${components[]}\",\"id\":\"419e6600-09b8-42b5-92f3-cd9d8aa21e11\",\"styles\":[{\"definition\":\"FlexDirection\",\"value\":\"row\"},{\"definition\":\"JustifyContent\",\"value\":\"flex-start\"},{\"definition\":\"AlignItems\",\"value\":\"center\"},{\"definition\":\"FlexGrow\",\"value\":1},{\"definition\":\"FontSize\",\"value\":18},{\"definition\":\"FontWeight\",\"value\":400},{\"definition\":\"TextIndent\",\"value\":0},{\"definition\":\"LetterSpacing\",\"value\":0},{\"definition\":\"Color\",\"value\":\"#000\"},{\"definition\":\"Ellipsis\",\"value\":false},{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MinWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxWidth\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":0}},{\"definition\":\"Border\",\"value\":{\"bottom\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"left\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"right\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"},\"top\":{\"size\":0,\"color\":\"#000\",\"style\":\"solid\"}}}],\"layout\":\"d7eaccbd-0c72-411a-afa4-286a0a5d951f\",\"definition\":\"Text\"}],\"id\":\"d7eaccbd-0c72-411a-afa4-286a0a5d951f\",\"styles\":[{\"definition\":\"MinHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"MaxHeight\",\"value\":{\"size\":0,\"unit\":\"px\"}},{\"definition\":\"Padding\",\"value\":{\"bottom\":0,\"left\":0,\"right\":0,\"top\":30}}],\"definition\":\"Many\"}]}'\r\n  }]\r\n","import React, { useState } from 'react'\r\nimport { Button, Input, message, Select } from 'antd'\r\nimport styled from 'styled-components'\r\nimport { Metadata } from '../definition/types'\r\nimport moment from 'moment'\r\nimport { v4 as uuid4 } from 'uuid'\r\nimport { DATE_TIME } from '../plugins/moment'\r\nimport { METATABLES } from '../plugins/database'\r\nimport useLocalStorage from 'react-use-localstorage'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Container = styled.div`\r\n  padding: 15px 30px;\r\n`\r\n\r\nconst Items = styled.div`\r\n  padding: 15px 8px;\r\n  border-bottom: 1px solid #ebe0e0;\r\n\r\n  > div:first-child {\r\n    display: flex;\r\n    flex: auto;\r\n    margin-bottom: 8px;\r\n    align-items: center;\r\n\r\n    > div:nth-child(1) {\r\n      font-size: 16px;\r\n    }\r\n\r\n    > div:nth-child(2) {\r\n      flex: auto;\r\n    }\r\n\r\n    > div:nth-child(3) {\r\n      padding-right: 25px;\r\n    }\r\n  }\r\n\r\n  > div:last-child {\r\n    display: flex;\r\n    color: #bfbfbf;\r\n\r\n    > div:nth-child(2) {\r\n      flex: auto;\r\n    }\r\n  }\r\n`\r\n\r\nconst EditContainer = styled.div`\r\n  padding: 15px 10px;\r\n  border-bottom: 1px solid #ebe0e0;\r\n`\r\n\r\nconst EditHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 12px;\r\n\r\n  > input {\r\n    width: auto;\r\n    flex: auto;\r\n  }\r\n  > button {\r\n    margin-left: 15px;\r\n  }\r\n`\r\n\r\nconst EditDescription = styled.div`\r\n  display: flex;\r\n\r\n  > p {\r\n    padding-left: 10px;\r\n    width: 94px;\r\n  }\r\n  > textarea {\r\n    width: auto;\r\n    flex: 1;\r\n  }\r\n`\r\n\r\nconst Index = () => {\r\n  const navigate = useNavigate()\r\n  const [metatables, setMetatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\r\n\r\n  const [editId, setEditId] = useState<string | undefined>()\r\n\r\n  const EditItem = (props: { value?: undefined | Metadata, onOk: (value: Metadata) => void, onCancel?: () => void }) => {\r\n    const [value, setValue] = useState<Metadata>(props.value || {\r\n      id: uuid4(),\r\n      title: '',\r\n      description: '',\r\n      createdAt: '',\r\n      json: '{}',\r\n      items: [],\r\n      updatedAt: ''\r\n    })\r\n\r\n    const handleSave = () => {\r\n      if (!value.title) {\r\n        return message.error('请输入标题')\r\n      }\r\n      const now = moment().format(DATE_TIME)\r\n      props.onOk({\r\n        ...value,\r\n        createdAt: value.createdAt || now,\r\n        updatedAt: now\r\n      })\r\n    }\r\n\r\n    const handleSelectMetadata = (id: string) => {\r\n      const metadata = JSON.parse(metatables).find((it: Metadata) => it.id === id)\r\n      if (metadata) {\r\n        setValue({\r\n          ...value,\r\n          items: metadata.items,\r\n          json: metadata.json\r\n        })\r\n      } else {\r\n        setValue({\r\n          ...value,\r\n          items: [],\r\n          json: '{}'\r\n        })\r\n      }\r\n    }\r\n\r\n    return (\r\n      <EditContainer>\r\n        <EditHeader>\r\n          <div>* 请输入标题：</div>\r\n          <Input value={value.title} placeholder=\"请输入标题\" onChange={ev => setValue({ ...value, title: ev.target.value })}/>\r\n          {!props.value && metatables.length && (\r\n            <Select placeholder=\"复制已有数据格式\" allowClear style={{ width: 170 }} onChange={handleSelectMetadata}>\r\n              {JSON.parse(metatables).map((it: Metadata) => (<Select.Option key={it.id} value={it.id}>{it.title}</Select.Option>))}\r\n            </Select>\r\n          )}\r\n          <Button type=\"primary\" onClick={() => handleSave()}>{ value.createdAt ? '确定保存' : '确定新增' }</Button>\r\n          {props.value && (<Button type=\"primary\" onClick={() => props.onCancel && props.onCancel()}>取消修改</Button>)}\r\n        </EditHeader>\r\n        <EditDescription>\r\n          <p>请输入说明:</p>\r\n          <Input.TextArea value={value.description} onChange={ev => setValue({ ...value, description: ev.target.value })} autoSize={{ minRows: 2, maxRows: 6 }} placeholder=\"请输入说明\"/>\r\n        </EditDescription>\r\n      </EditContainer>\r\n    )\r\n  }\r\n\r\n  const handleSave = (value: Metadata) => {\r\n    const list = JSON.parse(metatables) as Metadata[]\r\n    const index = list.findIndex(it => it.id === value.id)\r\n    if (index !== -1) {\r\n      list.splice(index, 1, value)\r\n    } else {\r\n      list.push(value)\r\n    }\r\n    setMetatables(JSON.stringify(list))\r\n    setEditId(undefined)\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <EditItem onOk={value => handleSave(value)}/>\r\n\r\n      { (JSON.parse(metatables) as Metadata[]).map(it => it.id === editId\r\n        ? (<EditItem key={it.id} value={it} onOk={value => handleSave(value)} onCancel={() => { setEditId(undefined) }}/>)\r\n        : (\r\n          <Items key={it.id}>\r\n            <div>\r\n              <div>{it.title}</div>\r\n              <div/>\r\n              <div>{it.updatedAt}</div>\r\n              <div><Button type=\"primary\" onClick={() => setEditId(it.id)}>信息编辑</Button></div>\r\n            </div>\r\n            <div>\r\n              <div>{it.description}</div>\r\n              <div/>\r\n              <div><Button type=\"primary\" onClick={() => navigate(`/metadata/${it.id}`)}>数据定义</Button></div>\r\n            </div>\r\n          </Items>\r\n          )\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Index\r\n","import React from 'react'\r\nimport JSONInput from 'react-json-editor-ajrm'\r\nimport locale from 'react-json-editor-ajrm/locale/zh-cn'\r\nimport styled from 'styled-components'\r\nimport { message } from 'antd'\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  color: #000\r\n`\r\n\r\nconst JsonInput = (props: { value: object, onChange: (value: object, json: string) => void }) => {\r\n  const handleChange = (result: any) => {\r\n    if (!result.error) {\r\n      if (!result.json) {\r\n        return props.onChange({}, '{}')\r\n      }\r\n      if (Array.isArray(result.jsObject)) {\r\n        return message.error('数据不是JSON对象')\r\n      }\r\n      props.onChange(result.jsObject, result.json)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <JSONInput\r\n        id = 'json-editor'\r\n        placeholder={props.value}\r\n        onChange={(result: any) => handleChange(result)}\r\n        colors = { {\r\n          default: '#000',\r\n          background: '#FCFDFD',\r\n          background_warning: '#000',\r\n          string: '#FA7921',\r\n          number: '#70CE35',\r\n          colon: '#49B8F7',\r\n          keys: '#59A5D8',\r\n          keys_whiteSpace: '#835FB6',\r\n          primitive: '#386FA4',\r\n          error: '#e30b0b'\r\n        } as any}\r\n        locale = { locale }\r\n        width = '100%'\r\n        height = '100%'\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default JsonInput\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Metadata, MetadataItem } from '../../definition/types'\r\nimport styled from 'styled-components'\r\nimport { Button, Switch, Input, Tag, Table, message } from 'antd'\r\nimport { sortBy, maxBy } from 'lodash'\r\nimport moment from 'moment'\r\nimport { DATE_TIME } from '../../plugins/moment'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Container = styled.div`\r\n`\r\n\r\nconst Header = styled.div`\r\n  padding: 15px 30px;\r\n  border-bottom: 2px solid #eee;\r\n  background-color: #f7f7f7;\r\n\r\n  > div:nth-child(1) {\r\n    display: flex;\r\n    height: 32px;\r\n\r\n    > div:nth-child(1) {\r\n      font-size: 18px;\r\n    }\r\n    > div:nth-child(2) {\r\n      flex: auto;\r\n    }\r\n    > div:last-child {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n\r\n  > div:nth-child(2) {\r\n    color: #bfbfbf;\r\n  }\r\n`\r\n\r\nconst Content = styled.div`\r\n  padding: 15px 30px;\r\n`\r\n\r\ntype Status = 'add' | 'delete' | 'update' | 'normal'\r\n\r\nconst STATUS = {\r\n  add: {\r\n    color: '#87d068',\r\n    title: '添加'\r\n  },\r\n  delete: {\r\n    color: '#f50',\r\n    title: '删除'\r\n  },\r\n  update: {\r\n    color: '#2db7f5',\r\n    title: '修改'\r\n  },\r\n  normal: {\r\n    color: undefined,\r\n    title: '无'\r\n  }\r\n}\r\n\r\ninterface ItemEdit {\r\n  id?: number\r\n  path: string\r\n  alias?: string\r\n  status: Status\r\n  required: boolean\r\n}\r\n\r\nconst Overview = (props: { value: Metadata, onChange: (value: Metadata) => void, json: object }) => {\r\n  const navigate = useNavigate()\r\n  const [items, setItems] = useState<ItemEdit[]>([])\r\n\r\n  useEffect(() => {\r\n    const result: Record<string, boolean> = {}\r\n    // 属性检查\r\n    const precess = (key: string, value: any) => {\r\n      if (value === undefined || value === null) {\r\n        result[key] = false\r\n      } else if (['string', 'number', 'boolean'].includes(typeof value)) {\r\n        if (result[key] === undefined) {\r\n          result[key] = true\r\n        }\r\n      } else if (Array.isArray(value)) {\r\n        if (value.length === 0) {\r\n          result[`${key}[]`] = false\r\n        } else if (!value[0] || typeof value[0] !== 'object') {\r\n          result[`${key}[]`] = true\r\n        } else {\r\n          for (const it of value) {\r\n            for (const itKey in it) {\r\n              const val = it[itKey]\r\n              if (val === undefined || val === null) {\r\n                result[`${key}[].${itKey}`] = false\r\n              } else if (['string', 'number', 'boolean'].includes(typeof value)) {\r\n                if (result[key] === undefined) {\r\n                  result[key] = true\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        for (const nextKey in value) {\r\n          if (Object.prototype.hasOwnProperty.call(value, nextKey)) {\r\n            precess(`${key}${key ? '.' : ''}${nextKey}`, value[nextKey])\r\n          }\r\n        }\r\n      }\r\n    }\r\n    precess('', props.json)\r\n    const list: ItemEdit[] = props.value.items.map(it => ({\r\n      id: it.id,\r\n      path: it.path,\r\n      alias: it.alias,\r\n      status: result[it.path] === undefined ? 'delete' : 'normal',\r\n      required: it.required\r\n    }))\r\n\r\n    for (const key in result) {\r\n      const it = list.find(it => it.path === key)\r\n      if (!it) {\r\n        list.push({\r\n          path: key,\r\n          status: 'add',\r\n          required: result[key]\r\n        })\r\n      }\r\n    }\r\n    setItems(sortBy(list, 'path'))\r\n  }, [props.json, props.value.items])\r\n\r\n  const handleSave = () => {\r\n    if (items.length === 0) {\r\n      message.error('请输出JSON进行编辑')\r\n      return\r\n    }\r\n\r\n    let lastId: number = maxBy(items, it => it?.id ?? 0)?.id || 0\r\n    const result: MetadataItem[] = items\r\n      .filter(it => it.status !== 'delete')\r\n      .map(it => {\r\n        if (!it.id) {\r\n          lastId++\r\n        }\r\n        return {\r\n          id: lastId,\r\n          path: it.path,\r\n          alias: it.alias,\r\n          required: it.required\r\n        }\r\n      })\r\n    props.onChange({\r\n      ...props.value,\r\n      items: result,\r\n      updatedAt: moment().format(DATE_TIME),\r\n      json: JSON.stringify(props.json)\r\n    })\r\n    message.success('保存成功')\r\n  }\r\n\r\n  const handleChange = (item: ItemEdit) => {\r\n    const index = items.findIndex(it => it.path === item.path)\r\n    const it = props.value.items[index]!\r\n    if ((item.status !== 'add')) {\r\n      if (item.required !== it.required || item.alias !== it.alias) {\r\n        item.status = 'update'\r\n      } else {\r\n        item.status = 'normal'\r\n      }\r\n    }\r\n    items.splice(index, 1, item)\r\n    setItems([...items])\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <div>\r\n          <div>{props.value.title}</div>\r\n          <div />\r\n          <div>\r\n            <Button type=\"primary\" onClick={() => navigate('/metadata')}>返回</Button>\r\n          </div>\r\n          <div>\r\n            {items.find(it => it.status !== 'normal') && (<Button type=\"primary\" onClick={handleSave}>保存</Button>)}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          {props.value.description}\r\n        </div>\r\n      </Header>\r\n      <Content>\r\n        <Table dataSource={items} pagination={false} rowKey=\"path\">\r\n          <Table.Column title=\"路径\" dataIndex=\"path\"/>\r\n          <Table.Column title=\"别名\" dataIndex=\"alias\" align=\"center\" render={(alias, it:ItemEdit) => (\r\n            <Input value={alias} onChange={ev => handleChange({ ...it, alias: ev.target.value || undefined })} />\r\n          )} />\r\n          <Table.Column title=\"是否必需\" dataIndex=\"required\" align=\"center\" render={(required, it: ItemEdit) => (\r\n            <Switch checked={required} checkedChildren=\"是\" unCheckedChildren=\"否\" onChange={required => handleChange({ ...it, required })} />\r\n          )} />\r\n          <Table.Column title=\"状态变更\" dataIndex=\"status\" align=\"center\" render={(status: Status) => (\r\n            <Tag color={STATUS[status].color}>{STATUS[status].title}</Tag>\r\n          )} />\r\n        </Table>\r\n      </Content>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Overview\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport JsonInput from './json-input'\r\nimport { METATABLES } from '../../plugins/database'\r\nimport useLocalStorage from 'react-use-localstorage'\r\nimport { Metadata } from '../../definition/types'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport Overview from './overview'\r\nimport { message } from 'antd'\r\nimport Header from '../../components/Header'\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  > div:nth-child(2) {\r\n    display: flex;\r\n    flex: auto;\r\n\r\n    @media (max-width: 1000px) {\r\n      flex-direction: column;\r\n    }\r\n  }\r\n`\r\n\r\nconst HeaderContainer = styled(Header)`\r\n  > div {\r\n    width: 100%;\r\n    padding: 0 30px;\r\n  }\r\n`\r\n\r\nconst Left = styled.div`\r\n  width: 45%;\r\n  border-right: 1px solid #eee;\r\n  @media (max-width: 900px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nconst Right = styled.div`\r\n  width: 55%;\r\n  border-left: 1px solid #eee;\r\n  @media (max-width: 900px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nconst index = () => {\r\n  const navigate = useNavigate()\r\n  const { id } = useParams()\r\n  const [metatables, setMetatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\r\n\r\n  const list = JSON.parse(metatables) as Metadata[]\r\n  const target = list.find(it => it.id === id)\r\n  if (!target) {\r\n    message.error('编辑内容已被删除')\r\n    navigate('/metadata')\r\n    return null\r\n  }\r\n  const [metadata, setMetadata] = useState(target)\r\n\r\n  const [editCache, setEditCache] = useLocalStorage(`RE-editMetadata-${metadata.id}`)\r\n\r\n  const [json, setJson] = useState<object>(JSON.parse(editCache || metadata.json))\r\n\r\n  const handleSave = (metadata: Metadata) => {\r\n    setMetadata(metadata)\r\n    const list = JSON.parse(metatables) as Metadata[]\r\n    const index = list.findIndex(it => it.id === metadata.id)\r\n    list.splice(index, 1, metadata)\r\n    setMetatables(JSON.stringify(list))\r\n    setEditCache('')\r\n  }\r\n\r\n  const handleJsonChange = (value: object, json: string) => {\r\n    setJson(value)\r\n    setEditCache(json)\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <HeaderContainer/>\r\n      <div>\r\n        <Left>\r\n          <Overview value={metadata} json={json} onChange={handleSave} />\r\n        </Left>\r\n        <Right>\r\n          <JsonInput value={ json } onChange={handleJsonChange} />\r\n        </Right>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default index\r\n","import React, { useState } from 'react'\r\nimport { Button, Input, message, Select, Result } from 'antd'\r\nimport styled from 'styled-components'\r\nimport { Metadata, PageSerialize, Template } from '../definition/types'\r\nimport moment from 'moment'\r\nimport { v4 as uuid4 } from 'uuid'\r\nimport { DATE_TIME } from '../plugins/moment'\r\nimport { METATABLES, TEMPLATES } from '../plugins/database'\r\nimport useLocalStorage from 'react-use-localstorage'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Container = styled.div`\r\n  padding: 15px 30px;\r\n`\r\n\r\nconst Items = styled.div`\r\n  padding: 15px 8px;\r\n  border-bottom: 1px solid #ebe0e0;\r\n\r\n  > div:first-child {\r\n    display: flex;\r\n    flex: auto;\r\n    margin-bottom: 8px;\r\n    align-items: center;\r\n\r\n    > div:nth-child(1) {\r\n      font-size: 16px;\r\n    }\r\n\r\n    > div:nth-child(2) {\r\n      flex: auto;\r\n    }\r\n\r\n    > div:nth-child(3) {\r\n      padding-right: 25px;\r\n    }\r\n  }\r\n\r\n  > div:last-child {\r\n    display: flex;\r\n    color: #bfbfbf;\r\n\r\n    > div:nth-child(2) {\r\n      flex: auto;\r\n    }\r\n\r\n    > div:last-child {\r\n      margin-left: 25px;\r\n    }\r\n  }\r\n`\r\n\r\nconst EditContainer = styled.div`\r\n  padding: 15px 10px;\r\n  border-bottom: 1px solid #ebe0e0;\r\n`\r\n\r\nconst EditHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 12px;\r\n\r\n  > input {\r\n    width: auto;\r\n    flex: auto;\r\n  }\r\n  > button {\r\n    margin-left: 15px;\r\n  }\r\n`\r\n\r\nconst EditDescription = styled.div`\r\n  display: flex;\r\n\r\n  > p {\r\n    padding-left: 10px;\r\n    width: 94px;\r\n  }\r\n  > textarea {\r\n    width: auto;\r\n    flex: 1;\r\n  }\r\n`\r\n\r\nconst Index = () => {\r\n  const navigate = useNavigate()\r\n  const [metatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\r\n  const [templates, setTemplates] = useLocalStorage('RE-templates', JSON.stringify(TEMPLATES))\r\n\r\n  const [editId, setEditId] = useState<string | undefined>()\r\n\r\n  const EditItem = (props: { value?: undefined | Template, onOk: (value: Template) => void, onCancel?: () => void }) => {\r\n    const [value, setValue] = useState<Template>(props.value || {\r\n      id: uuid4(),\r\n      title: '',\r\n      description: '',\r\n      createdAt: '',\r\n      metadataId: '',\r\n      updatedAt: '',\r\n      json: ''\r\n    })\r\n\r\n    const handleSave = () => {\r\n      if (!value.title) {\r\n        return message.error('请输入标题')\r\n      }\r\n      if (!value.metadataId) {\r\n        return message.error('请选择数据来源')\r\n      }\r\n      const now = moment().format(DATE_TIME)\r\n      props.onOk({\r\n        ...value,\r\n        createdAt: value.createdAt || now,\r\n        updatedAt: now\r\n      })\r\n    }\r\n\r\n    const handleSelectMetadata = (id: string) => {\r\n      setValue({\r\n        ...value,\r\n        metadataId: id\r\n      })\r\n    }\r\n\r\n    const handleSelectTemplate = (id: string) => {\r\n      const template = JSON.parse(templates).find((it: Template) => it.id === id)\r\n      setValue({\r\n        ...value,\r\n        metadataId: template?.metadataId ?? (value.metadataId || '')\r\n      })\r\n    }\r\n\r\n    return (\r\n      <EditContainer>\r\n        <EditHeader>\r\n          <div>* 请输入标题：</div>\r\n          <Input value={value.title} placeholder=\"请输入标题\" onChange={ev => setValue({ ...value, title: ev.target.value })}/>\r\n          {!props.value && metatables.length && (\r\n            <Select placeholder=\"请选择数据源\" style={{ width: 170 }} value={value.metadataId || undefined} onChange={handleSelectMetadata}>\r\n              {JSON.parse(metatables).map((it: Metadata) => (<Select.Option key={it.id} value={it.id}>{it.title}</Select.Option>))}\r\n            </Select>\r\n          )}\r\n          {!props.value && metatables.length && (\r\n            <Select placeholder=\"复制已有模板\" style={{ width: 170 }} allowClear onChange={handleSelectTemplate}>\r\n              {JSON.parse(templates).map((it: Template) => (<Select.Option key={it.id} value={it.id}>{it.title}</Select.Option>))}\r\n            </Select>\r\n          )}\r\n          <Button type=\"primary\" onClick={() => handleSave()}>{ value.createdAt ? '确定保存' : '确定新增' }</Button>\r\n          {props.value && (<Button type=\"primary\" onClick={() => props.onCancel && props.onCancel()}>取消修改</Button>)}\r\n        </EditHeader>\r\n        <EditDescription>\r\n          <p>请输入说明:</p>\r\n          <Input.TextArea value={value.description} onChange={ev => setValue({ ...value, description: ev.target.value })} autoSize={{ minRows: 2, maxRows: 6 }} placeholder=\"请输入说明\"/>\r\n        </EditDescription>\r\n      </EditContainer>\r\n    )\r\n  }\r\n\r\n  const handleSave = (value: Template) => {\r\n    const list = JSON.parse(metatables) as Template[]\r\n    const index = list.findIndex(it => it.id === value.id)\r\n    if (index !== -1) {\r\n      list.splice(index, 1, value)\r\n    } else {\r\n      list.push(value)\r\n    }\r\n    setTemplates(JSON.stringify(list))\r\n    setEditId(undefined)\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      {!metatables.length && (\r\n        <Result\r\n          status=\"warning\"\r\n          title=\"请先创建一份数据源,再进行模板编辑!\"\r\n          extra={\r\n            <Button type=\"primary\" onClick={() => navigate('/metadata')}>\r\n              数据编辑\r\n            </Button>\r\n          }\r\n        />\r\n      )}\r\n      {metatables.length && (<EditItem onOk={value => handleSave(value)}/>)}\r\n\r\n      { metatables.length && JSON.parse(templates).map((it: Template) => it.id === editId\r\n        ? (<EditItem key={it.id} value={it} onOk={value => handleSave(value)} onCancel={() => { setEditId(undefined) }}/>)\r\n        : (\r\n          <Items key={it.id}>\r\n            <div>\r\n            <div>{it.title}</div>\r\n            <div/>\r\n            <div>{it.updatedAt}</div>\r\n            <div><Button type=\"primary\" onClick={() => setEditId(it.id)}>信息编辑</Button></div>\r\n            </div>\r\n            <div>\r\n            <div>{it.description}</div>\r\n            <div/>\r\n            <div><Button disabled={!it.json || (JSON.parse(it.json) as PageSerialize).layouts.length === 0} type=\"primary\" onClick={() => navigate(`/preview/${it.id}`)}>打印预览</Button></div>\r\n            <div><Button type=\"primary\" onClick={() => navigate(`/template/${it.id}`)}>模板定义</Button></div>\r\n            </div>\r\n          </Items>\r\n          )\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Index\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Draggable, Droppable } from 'react-beautiful-dnd'\r\nimport styled from 'styled-components'\r\nimport { DroppableIds } from '../types'\r\nimport { CONTENT_DEFINITIONS, PAPER_SIZES } from '../../../definition'\r\nimport { Select, Button, message, InputNumber, Popconfirm } from 'antd'\r\nimport { SyncOutlined } from '@ant-design/icons'\r\nimport JustifyContent from '../../../definition/styles/justify-content'\r\nimport { Page, Template } from '../../../definition/types'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Container = styled.aside`\r\n  width: 250px;\r\n  color: #333;\r\n  padding-top: 12px;\r\n`\r\n\r\nconst Groups = styled.div`\r\n  border-bottom: 1px solid #aaa;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  align-items: center;\r\n`\r\n\r\nconst Title = styled.div`\r\n`\r\n\r\nconst Subject = styled.div`\r\n  padding-right: 20px;\r\n  display: flex;\r\n  height: 40px;\r\n  align-items: center;\r\n  width: 60px;\r\n`\r\n\r\nconst Items = styled.ul`\r\n  padding: 10px 12px;\r\n  font-size: 12px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0;\r\n`\r\n\r\nconst Item = styled.li<{isDragging?: boolean}>`\r\n  display: flex;\r\n  height: 30px;\r\n  width: 170px;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f3f3f3;\r\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\r\n  user-select: none;\r\n  margin-bottom: 8px;\r\n\r\n`\r\n\r\nconst Clone = styled(Item)`\r\n  + div {\r\n      display: none !important;\r\n  }\r\n`\r\n\r\nfunction Material (props: {\r\n  value: Page\r\n  onChange: (value: Page) => void\r\n  updating: boolean,\r\n  template: Template\r\n  onSave: (back: boolean) => void\r\n  onCancel: () => void\r\n}) {\r\n  const navigate = useNavigate()\r\n\r\n  const PageStyle = (props: { value: Page, onChange: (value: Page) => void }) => {\r\n    const [value, setValue] = useState<{width: number, height: number, title: string}>({ width: props.value.width, height: props.value.height, title: '' })\r\n\r\n    // upset value.title\r\n    useEffect(() => {\r\n      const sizes = PAPER_SIZES.find(it => (it.width === value.width && it.height === value.height) || (it.width === value.height && it.height === value.width))\r\n      setValue({\r\n        ...value,\r\n        title: sizes?.title ?? '自定义'\r\n      })\r\n    }, [props.value.width, props.value.height, value.width, value.height])\r\n\r\n    const handleChangeDirection = () => {\r\n      if (!value.height) {\r\n        message.error('方向切换失败,宽需要不能为0(无限)')\r\n        return\r\n      }\r\n      props.onChange({\r\n        ...props.value,\r\n        width: value.height,\r\n        height: value.width\r\n      })\r\n    }\r\n\r\n    const changeStyle = (key: string, value: any) => {\r\n      const index = props.value.styles.findIndex(it => it.definition.key === key)\r\n      const style = props.value.styles[index]\r\n      style.value = value\r\n      props.value.styles.splice(index, 1, style)\r\n      props.onChange({ ...props.value })\r\n    }\r\n\r\n    const changeHeight = (height: number) => {\r\n      setValue({ ...value, height })\r\n      props.onChange({ ...props.value, height: height })\r\n    }\r\n\r\n    const changeWidth = (width: number) => {\r\n      setValue({ ...value, width })\r\n      if (!width) {\r\n        message.error('宽需要不能为0(无限)')\r\n        return\r\n      }\r\n      props.onChange({ ...props.value, width: width })\r\n    }\r\n\r\n    const handleSizeChange = (key: string) => {\r\n      const sizes = PAPER_SIZES.find(it => it.title === key)\r\n      if (sizes) {\r\n        props.onChange({\r\n          ...props.value,\r\n          width: sizes.width,\r\n          height: sizes.height\r\n        })\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Groups>\r\n          <Subject>尺寸</Subject>\r\n          <Select value={value.title} style={{ width: 112 }} onChange={handleSizeChange}>\r\n            <Select.Option value={''}>自定义</Select.Option>\r\n            {PAPER_SIZES.map((it, index) => (<Select.Option key={index} value={it.title}>{it.title}</Select.Option>))}\r\n          </Select>\r\n          <Button type=\"primary\" onClick={handleChangeDirection}><SyncOutlined/></Button>\r\n        </Groups>\r\n        <Groups>\r\n          <Subject>宽度</Subject>\r\n          <InputNumber value={value.width} min={0} max={999} style={{ width: 165 }} addonAfter=\"毫米\" onChange={changeWidth} onBlur={() => changeWidth(value.width || props.value.width)}/>\r\n        </Groups>\r\n        <Groups>\r\n          <Subject>高度</Subject>\r\n          <InputNumber value={value.height} min={0} max={999} style={{ width: 165 }} addonAfter=\"毫米\" onChange={changeHeight} />\r\n        </Groups>\r\n        {props.value.styles.map((it, index) => (\r\n          <Groups key={index}>\r\n            <Subject>{it.definition.key === JustifyContent.key ? '竖向排列' : it.definition.title}</Subject>\r\n            <it.definition.Blueprint value={it.value} onChange={value => changeStyle(it.definition.key, value)}/>\r\n          </Groups>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Droppable droppableId={DroppableIds.Material} isDropDisabled={true} >\r\n      {(provided) => (\r\n        <Container ref={provided.innerRef}>\r\n          <Groups>\r\n            <Title>{props.template.title}</Title>\r\n            <div style={{ flex: 'auto' }}/>\r\n            {props.updating && (\r\n              <Popconfirm\r\n                placement=\"topRight\"\r\n                title=\"是否保存后返回？\"\r\n                okText=\"是\"\r\n                cancelText=\"否\"\r\n                onConfirm={() => props.onSave(true)}\r\n                onCancel={() => navigate('/template')}\r\n              >\r\n                <Button type=\"primary\">返回</Button>\r\n              </Popconfirm>\r\n            )}\r\n            {!props.updating && (<Button type=\"primary\" onClick={() => navigate('/template')}>返回</Button>)}\r\n          </Groups>\r\n          { props.updating && (\r\n            <Groups>\r\n              <Popconfirm\r\n                placement=\"topRight\"\r\n                title=\"是否确定放弃修改？\"\r\n                okText=\"是\"\r\n                cancelText=\"否\"\r\n                onConfirm={props.onCancel}\r\n              >\r\n                <Button type=\"primary\" danger>放弃修改</Button>\r\n              </Popconfirm>\r\n              <div style={{ flex: 'auto' }}/>\r\n              <Popconfirm\r\n                placement=\"topRight\"\r\n                title=\"是否确定保存？\"\r\n                okText=\"是\"\r\n                cancelText=\"否\"\r\n                onConfirm={() => props.onSave(false)}\r\n              >\r\n                <Button type=\"primary\" >确定保存</Button>\r\n              </Popconfirm>\r\n            </Groups>\r\n          )}\r\n          <Groups>\r\n            <Subject>内容</Subject>\r\n            <Items>\r\n              {CONTENT_DEFINITIONS.map((it, index) => (\r\n                <Draggable\r\n                  key={it.key}\r\n                  draggableId={it.key}\r\n                  index={index}>\r\n                  {(provided, snapshot) => (\r\n                    <React.Fragment>\r\n                      <Item\r\n                        ref={provided.innerRef}\r\n                        {...provided.draggableProps}\r\n                        {...provided.dragHandleProps}\r\n                        isDragging={snapshot.isDragging}\r\n                        style={snapshot.isDragging ? provided.draggableProps.style : {}}\r\n                      >\r\n                        {it.title}\r\n                      </Item>\r\n                      {snapshot.isDragging && (\r\n                        <Clone>\r\n                          {it.title}\r\n                        </Clone>\r\n                      )}\r\n                    </React.Fragment>\r\n                  )}\r\n                </Draggable>\r\n              ))}\r\n            </Items>\r\n          </Groups>\r\n          <PageStyle\r\n            value={props.value}\r\n            onChange={props.onChange}\r\n          />\r\n          {provided.placeholder}\r\n        </Container>\r\n      )}\r\n    </Droppable>\r\n  )\r\n}\r\n\r\nexport default Material\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Droppable, DragDropContext, DropResult, Draggable } from 'react-beautiful-dnd'\r\nimport { Content } from '../../../definition/content/types'\r\nimport { Button, Popconfirm } from 'antd'\r\n\r\nconst Container = styled.div<{isDragging: boolean}>`\r\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\r\n  height: 100%;\r\n`\r\n\r\nconst Items = styled.div<{isDragging: boolean}>`\r\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\r\n  margin: 15px;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  text-align: center;\r\n  background: #f3f3f3;\r\n  display: flex;\r\n\r\n  > div:first-child {\r\n    flex: auto;\r\n    cursor: pointer;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n`\r\n\r\nconst LayoutContents = (props: { value: Content<any, any>[], onChange: (value: Content<any, any>[]) => void, onChangeActive: (contentId: string) => void }) => {\r\n  const onDragEnd = (result: DropResult) => {\r\n    const { destination, source } = result\r\n    if (!destination) {\r\n      return\r\n    }\r\n    const contents = props.value\r\n    // 删除后的位置调整\r\n    const offset = destination.index > 0 && source.index > destination.index ? destination.index - 1 : 0\r\n    const target = contents[source.index]\r\n    // 删除原有\r\n    contents.splice(source.index, 1)\r\n    // 重新插入\r\n    contents.splice(destination.index - offset, 0, target)\r\n    props.onChange(contents)\r\n  }\r\n\r\n  const handleDelete = (id: string) => {\r\n    const index = props.value.findIndex(it => it.id === id)\r\n    props.value.splice(index, 1)\r\n    props.onChange([...props.value])\r\n  }\r\n\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Droppable droppableId=\"layout-contents\">\r\n        {(provided, snapshot) => (\r\n          <Container\r\n            {...provided.droppableProps}\r\n            ref={provided.innerRef}\r\n            isDragging={snapshot.isDraggingOver}\r\n          >\r\n            {props.value.map((it, index) => (\r\n              <Draggable key={it.id} draggableId={it.id} index={index}>\r\n                {(provided, snapshot) => (\r\n                  <Items\r\n                    ref={provided.innerRef}\r\n                    {...provided.draggableProps}\r\n                    style={provided.draggableProps.style}\r\n                    isDragging={snapshot.isDragging}\r\n                  >\r\n                    <div {...provided.dragHandleProps}>\r\n                      {index + 1}\r\n                    </div>\r\n                    <div>\r\n                      <Popconfirm\r\n                        placement=\"topRight\"\r\n                        title=\"是否确定删除？\"\r\n                        okText=\"是\"\r\n                        cancelText=\"否\"\r\n                        onConfirm={() => handleDelete(it.id)}\r\n                      >\r\n                        <Button type=\"primary\" danger>删除</Button>\r\n                      </Popconfirm>\r\n                      <Button type=\"primary\" onClick={() => props.onChangeActive(it.id)}>编辑</Button>\r\n                    </div>\r\n                  </Items>\r\n                )}\r\n              </Draggable>\r\n            ))}\r\n            {provided.placeholder}\r\n          </Container>\r\n        )}\r\n      </Droppable>\r\n    </DragDropContext>\r\n  )\r\n}\r\n\r\nexport default LayoutContents\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Droppable, DragDropContext, DropResult, Draggable } from 'react-beautiful-dnd'\r\nimport { Button, Popconfirm, Menu, Dropdown } from 'antd'\r\nimport { sortBy } from 'lodash'\r\nimport { Page } from '../../../definition/types'\r\n\r\nconst Header = styled.div`\r\n  padding: 10px 15px;\r\n\r\n`\r\n\r\nconst Elements = styled.div<{isDragging: boolean}>`\r\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\r\n  height: 100%;\r\n`\r\n\r\nconst Items = styled.div<{isDragging: boolean}>`\r\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\r\n  margin: 15px;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  text-align: center;\r\n  background: #f3f3f3;\r\n  display: flex;\r\n\r\n  > div:first-child {\r\n    flex: auto;\r\n    cursor: pointer;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n`\r\n\r\nconst PageLayouts = (props: { value: Page, onChange: (value: Page) => void, onChangeActive:(layoutId: string) => void }) => {\r\n  const PageSetting = (props: {index: number, value: Page, onChange: (value: Page) => void }) => {\r\n    const handlePageable = () => {\r\n      const indexes = props.value.pageIndexes\r\n      if (!indexes.includes(props.index)) {\r\n        indexes.push(props.index)\r\n        props.onChange({ ...props.value, pageIndexes: sortBy(indexes) })\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Menu>\r\n        <Menu.Item disabled onClick={() => props.onChange({ ...props.value, header: props.index })}>页头</Menu.Item>\r\n        <Menu.Item disabled onClick={() => props.onChange({ ...props.value, footer: props.index })}>页尾</Menu.Item>\r\n        <Menu.Item disabled onClick={handlePageable}>分页</Menu.Item>\r\n      </Menu>\r\n    )\r\n  }\r\n\r\n  const onDragEnd = (result: DropResult) => {\r\n    const { destination, source } = result\r\n    if (!destination) {\r\n      return\r\n    }\r\n    const layouts = props.value.layouts\r\n    // 删除后的位置调整\r\n    const offset = destination.index > 0 && source.index > destination.index ? destination.index - 1 : 0\r\n    const target = layouts[source.index]\r\n    // 删除原有\r\n    layouts.splice(source.index, 1)\r\n    // 重新插入\r\n    layouts.splice(destination.index - offset, 0, target)\r\n    props.onChange({ ...props.value, layouts: [...layouts] })\r\n  }\r\n\r\n  const handleDelete = (id: string) => {\r\n    const layouts = props.value.layouts\r\n    const index = layouts.findIndex(it => it.id === id)\r\n    layouts.splice(index, 1)\r\n\r\n    const pageIndex = props.value.pageIndexes.findIndex(it => it === index)\r\n    if (pageIndex !== -1) {\r\n      props.value.pageIndexes.splice(pageIndex, 1)\r\n    }\r\n\r\n    const listIndex = props.value.listIndexes.findIndex(it => it === index)\r\n    if (listIndex !== -1) {\r\n      props.value.pageIndexes.splice(listIndex, 1)\r\n    }\r\n\r\n    props.onChange({\r\n      ...props.value,\r\n      layouts: [...layouts],\r\n      pageIndexes: [...props.value.pageIndexes],\r\n      listIndexes: [...props.value.listIndexes]\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header>\r\n        <h3>分页说明</h3>\r\n        <p>1.内容超出页面尺寸会自动分页;</p>\r\n        <p>2.可以在指定元素后面分页，元素删除分页删除;</p>\r\n        <h3>页头页尾说明</h3>\r\n        <p>1.列表内容无法作为页头页尾;</p>\r\n        <p>2.页头页尾设置后无法编辑，如需编辑请取消后再重新设置;</p>\r\n      </Header>\r\n      <DragDropContext onDragEnd={onDragEnd}>\r\n        <Droppable droppableId=\"page-layouts\">\r\n          {(provided, snapshot) => (\r\n            <Elements\r\n              {...provided.droppableProps}\r\n              ref={provided.innerRef}\r\n              isDragging={snapshot.isDraggingOver}\r\n            >\r\n              {props.value.layouts.map((it, index) => (\r\n                <Draggable key={it.id} draggableId={it.id} index={index}>\r\n                  {(provided, snapshot) => (\r\n                    <React.Fragment>\r\n                      {index === props.value.footer && (<div>取消页尾</div>)}\r\n                      <Items\r\n                        ref={provided.innerRef}\r\n                        {...provided.draggableProps}\r\n                        style={provided.draggableProps.style}\r\n                        isDragging={snapshot.isDragging}\r\n                      >\r\n                        <div {...provided.dragHandleProps}>\r\n                          {index + 1}\r\n                        </div>\r\n                        <div>\r\n                          <Popconfirm\r\n                            placement=\"topRight\"\r\n                            title=\"是否确定删除？\"\r\n                            okText=\"是\"\r\n                            cancelText=\"否\"\r\n                            onConfirm={() => handleDelete(it.id)}\r\n                          >\r\n                            <Button type=\"primary\" danger>删除</Button>\r\n                          </Popconfirm>\r\n                          <Dropdown\r\n                            overlay={<PageSetting index={index} {...props}/>}\r\n                            disabled={\r\n                              // 已设置页头页尾\r\n                              index <= props.value.header || (index >= props.value.footer && props.value.footer > 0) ||\r\n                              // 已设置分页\r\n                              props.value.pageIndexes.includes(index) ||\r\n                              // 列表禁用分页或页头页尾\r\n                              (props.value.listIndexes.length === 1 && props.value.listIndexes[0] === index) ||\r\n                              (props.value.listIndexes.length > 1 && index > props.value.listIndexes[0]) ||\r\n                              (props.value.listIndexes.length > 1 && index < props.value.listIndexes[props.value.listIndexes.length - 1])\r\n                            }\r\n                          >\r\n                            <Button type=\"primary\">设置</Button>\r\n                          </Dropdown>\r\n                          <Button type=\"primary\" onClick={() => props.onChangeActive(it.id)}>编辑</Button>\r\n                        </div>\r\n                      </Items>\r\n                      {index === props.value.header && (<div>取消页头</div>)}\r\n                      {props.value.pageIndexes.includes(index) && (<div>取消分页</div>)}\r\n                    </React.Fragment>\r\n                  )}\r\n                </Draggable>\r\n              ))}\r\n              {provided.placeholder}\r\n            </Elements>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PageLayouts\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Layout } from '../../../definition/layout/types'\r\nimport { Content } from '../../../definition/content/types'\r\nimport { Tabs, Button } from 'antd'\r\nimport LayoutContents from './layout-contents'\r\nimport PageLayouts from './page-layouts'\r\nimport { Metadata, Page } from '../../../definition/types'\r\n\r\nconst Container = styled.aside`\r\n  width: 300px;\r\n  display: flex;\r\n  flex-direction: column;\r\n`\r\nconst Items = styled.div`\r\n  border-bottom: 1px solid #aaa;\r\n  padding: 10px 15px;\r\n  display: flex;\r\n  align-items: center;\r\n`\r\nconst Title = styled.span`\r\n  display: inline-block;\r\n  width: 80px;\r\n`\r\n\r\nconst Notice = styled.div`\r\n  display: flex;\r\n  flex: auto;\r\n  align-items: center;\r\n  align-content: center;\r\n  justify-content: center;\r\n  color: #fff;\r\n  background-color: #ff7875;\r\n  font-size: 32px;\r\n  height: 88px;\r\n`\r\n\r\nfunction Blueprint (props: {\r\n  active: Layout | Content<any, any> | undefined,\r\n  onChangeActiveValue: (value: Layout | Content<any, any>) => void,\r\n  onChangeActive: (layoutId: string, contentId?: string) => void\r\n  value: Page,\r\n  onChange: (value: Page) => void,\r\n  metadata: Metadata,\r\n  getData: (value: string | string[]) => any\r\n}) {\r\n  const [current, setCurrent] = useState<number>(0)\r\n\r\n  const changeValue = (value: any) => {\r\n    props.onChangeActiveValue({\r\n      ...props.active!,\r\n      value: value\r\n    })\r\n  }\r\n\r\n  const changeContents = (contents: Content<any, any>[]) => {\r\n    props.onChangeActiveValue({\r\n      ...props.active!,\r\n      contents\r\n    })\r\n  }\r\n\r\n  const changeStyle = (key: string, value: any) => {\r\n    const styles = props.active!.styles\r\n    const index = styles.findIndex(it => it.definition.key === key)\r\n    const style = styles[index]\r\n    style.value = value\r\n    styles.splice(index, 1, style)\r\n\r\n    props.onChangeActiveValue({\r\n      ...props.active!,\r\n      styles\r\n    })\r\n  }\r\n\r\n  const renderContentOrLayout = () => {\r\n    if ((props.active as Layout)?.contents) {\r\n      const layout = props.active as Layout\r\n      if (!layout.contents.length) {\r\n        return (\r\n          <Notice>请添加内容</Notice>\r\n        )\r\n      }\r\n      return (\r\n        <LayoutContents value={layout.contents} onChange={changeContents} onChangeActive={contentId => props.onChangeActive(layout.id, contentId) } />\r\n      )\r\n    }\r\n    const content = props.active as Content<any, any>\r\n    return (\r\n      <content.definition.Blueprint value={content.value} onChange={changeValue} metadata={props.metadata} getData={props.getData} />\r\n    )\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    if ((props.active as Layout)?.contents) {\r\n      // 删除 layout\r\n      const index = props.value.layouts.findIndex(it => it.id === props.active!.id)\r\n      props.value.layouts.splice(index, 1)\r\n    } else {\r\n      // 删除 content\r\n      const content = props.active as Content<any, any>\r\n      const contentIndex = content.layout.contents.findIndex(it => it.id === content.id)\r\n      content.layout.contents.splice(contentIndex, 1)\r\n\r\n      // 修改 layout\r\n      const layoutIndex = props.value.layouts.findIndex(it => it.id === content.layout.id)\r\n      if (content.layout.contents.length === 0) {\r\n        // 无内容删除 layout\r\n        props.value.layouts.splice(layoutIndex, 1)\r\n      } else {\r\n        props.value.layouts.splice(layoutIndex, 1, content.layout)\r\n      }\r\n    }\r\n    props.onChange({ ...props.value })\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Tabs\r\n        activeKey={String(current)}\r\n        onChange={v => setCurrent(Number(v))}\r\n        centered\r\n        size=\"large\"\r\n        style={{ height: '100%' }}\r\n      >\r\n        <Tabs.TabPane tab={!props.active || (props.active as Layout).contents ? '元素' : '属性'} key=\"0\">\r\n          {current === 0 && !!props.active && (renderContentOrLayout())}\r\n        </Tabs.TabPane>\r\n        <Tabs.TabPane tab=\"样式\" key=\"1\">\r\n          {current === 1 && !!props.active && [\r\n            <Items key=\"button\" style={{ justifyContent: 'center' }}><Button type=\"primary\" danger onClick={handleDelete} >删除</Button></Items>,\r\n            props.active.styles.map((it, index) => (\r\n              <Items key={index} >\r\n                <Title>{it.definition.title}</Title>\r\n                <it.definition.Blueprint value={it.value} onChange={value => changeStyle(it.definition.key, value)}/>\r\n              </Items>\r\n            ))\r\n          ]}\r\n        </Tabs.TabPane>\r\n        <Tabs.TabPane tab=\"页面元素\" key=\"3\">\r\n          {current === 3 && (<PageLayouts value={props.value} onChange={props.onChange} onChangeActive={layoutId => {\r\n            props.onChangeActive(layoutId)\r\n            setCurrent(0)\r\n          }} />)}\r\n        </Tabs.TabPane>\r\n      </Tabs>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Blueprint\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { render } from '../../../definition/styles/utils'\r\nimport { Draggable, Droppable } from 'react-beautiful-dnd'\r\nimport { DroppableIds, MaterialType } from '../types'\r\nimport { Layout } from '../../../definition/layout/types'\r\nimport { Content } from '../../../definition/content/types'\r\nimport { Page } from '../../../definition/types'\r\n\r\nconst Container = styled.section`\r\n  border-left: 1px solid #e0e0e0;\r\n  border-right: 1px solid #e0e0e0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: auto;\r\n`\r\nconst View = styled.div`\r\n  background: #f3f3f3;\r\n  flex: auto;\r\n  display: flex;\r\n  justify-content: center;\r\n`\r\n\r\nconst PageContainer = styled.article<{isDragging: boolean}>`\r\n  background: #fff;\r\n  box-shadow: 0 4px 12px #ebedf0;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px ${props => (props.isDragging ? 'dashed #4099ff' : 'solid #ddd')};\r\n`\r\n\r\nconst LayoutContainer = styled.div<{ isDragging: boolean }>`\r\n  display: flex;\r\n  ${props => props.isDragging ? 'border: 1px dashed #4099ff;' : ''}\r\n  position: relative;\r\n`\r\n\r\nconst LayoutHandle = styled.div<{index: number}>`\r\n  user-select: none;\r\n  position: absolute;\r\n  width: 40px;\r\n  height: 1px;\r\n  left: -${props => props.index % 2 === 0 ? 40 : 27}px;\r\n  background-color: aquamarine;\r\n\r\n  > div {\r\n    width: 40px;\r\n    height: 30px;\r\n    clip-path: polygon(100% 0, 0 0, 0 100%);\r\n    position: absolute;\r\n    left: -${props => props.index % 2 === 0 ? 40 : 27}px;\r\n    background-color: #1890ff;\r\n  }\r\n`\r\n\r\nconst Notice = styled.div`\r\n  display: flex;\r\n  flex: auto;\r\n  align-items: center;\r\n  align-content: center;\r\n  justify-content: center;\r\n  color: #fff;\r\n  font-size: 32px;\r\n  background-color: #ff7875;\r\n`\r\n\r\nconst Building = (props: { value: Page, getData: (value: string | string[]) => any, onChangeActive: (layoutId: string, contentId?: string) => void, active: Layout | Content<any, any> | undefined }) => {\r\n  return (\r\n    <Container>\r\n      <View>\r\n        {!props.value.width && !props.value.height\r\n          ? null\r\n          : (\r\n            <Droppable droppableId={DroppableIds.Building}>\r\n              {(provided, dropSnapshot) => (\r\n                <PageContainer\r\n                  ref={provided.innerRef}\r\n                  isDragging={dropSnapshot.isDraggingOver}\r\n                  {...provided.droppableProps}\r\n                  style={{\r\n                    width: `${props.value.width}mm`,\r\n                    height: `${props.value.height}mm`,\r\n                    ...render(props.value.styles)\r\n                  }}\r\n                >\r\n                  {props.value.layouts.length\r\n                    ? props.value.layouts.map((it, index) => (\r\n                      <Draggable\r\n                        key={it.id}\r\n                        draggableId={`${it.id}_${MaterialType.Layout}`}\r\n                        index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <LayoutContainer\r\n                            ref={provided.innerRef}\r\n                            {...provided.draggableProps}\r\n                            isDragging={snapshot.isDragging}\r\n                            style={dropSnapshot.draggingOverWith && !dropSnapshot.draggingOverWith.endsWith(MaterialType.Layout) ? {} : provided.draggableProps.style}\r\n                          >\r\n                            <LayoutHandle\r\n                              {...provided.dragHandleProps}\r\n                              onClick={() => props.onChangeActive(it.id)}\r\n                              index={index}\r\n                            >\r\n                              <div>{index + 1}</div>\r\n                            </LayoutHandle>\r\n                            {<it.definition.Building\r\n                              {...props}\r\n                              contents={it.contents}\r\n                              key={it.id}\r\n                              id={`${it.id}_${MaterialType.Content}`}\r\n                              style={render(it.styles)}\r\n                              onChangeActive={(id) => props.onChangeActive(it.id, id)}\r\n                            />}\r\n                          </LayoutContainer>\r\n                        )}\r\n                      </Draggable>\r\n                    ))\r\n                    : (<Notice>请拖动布局或内容进行编辑</Notice>)\r\n                  }\r\n                  {provided.placeholder}\r\n                </PageContainer>\r\n              )}\r\n            </Droppable>\r\n            )\r\n        }\r\n      </View>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Building\r\n","import { Layout } from '../layout/types'\r\nimport { createStyle } from '../styles/utils'\r\nimport { Content, ContentDefinition, ContentSerialize } from './types'\r\nimport { v4 as uuid4 } from 'uuid'\r\nimport { cloneDeep } from 'lodash'\r\nimport { STYLE_DEFINITIONS } from '../index'\r\nimport { Style } from '../styles/types'\r\n\r\nexport const createContent = (layout: Layout, definition: ContentDefinition<any, any>, defaultStyles: Style<any>[]): Content<any, any> => {\r\n  return {\r\n    id: uuid4(),\r\n    layout: layout,\r\n    definition: definition,\r\n    // STYLE_DEFINITIONS 由于循环依赖问题，只能创建时选择\r\n    styles: (definition.styles.length !== 0 ? definition.styles : STYLE_DEFINITIONS)\r\n      .map(it => createStyle(it, defaultStyles.find(dit => it.key === dit.definition.key)?.value)),\r\n    toJSON () {\r\n      const value: ContentSerialize = {\r\n        id: this.id,\r\n        styles: this.styles.map(it => it.toJSON()),\r\n        value: this.value,\r\n        definition: this.definition.key,\r\n        layout: this.layout.id\r\n      }\r\n      return value\r\n    },\r\n    value: cloneDeep(definition.defaultValue)\r\n  }\r\n}\r\n\r\nexport const getContentDefinitions = async () => {\r\n  return [\r\n    await import('./text')\r\n  ]\r\n}\r\n","import { createStyle } from '../styles/utils'\r\nimport { ContentDefinition, ContentSerialize } from '../content/types'\r\nimport { Layout, LayoutDefinition, LayoutSerialize } from './types'\r\nimport { v4 as uuid4 } from 'uuid'\r\nimport { Style } from '../styles/types'\r\nimport Many from './many'\r\nimport { createContent } from '../content/utils'\r\nimport { CONTENT_DEFINITIONS, LAYOUT_DEFINITIONS } from '../index'\r\n\r\nconst createByLayoutSerialize = (serialize: LayoutSerialize): Layout => {\r\n  const layout: Layout = {\r\n    id: serialize.id,\r\n    styles: serialize.styles.map(it => createStyle(it)),\r\n    definition: LAYOUT_DEFINITIONS.find(it => it.key === serialize.definition)!,\r\n    contents: [],\r\n    toJSON () {\r\n      const value: LayoutSerialize = {\r\n        contents: this.contents.map(it => it.toJSON()),\r\n        id: this.id,\r\n        styles: this.styles.map(it => it.toJSON()),\r\n        definition: this.definition.key\r\n      }\r\n      return value\r\n    }\r\n  }\r\n  layout.contents = serialize.contents.map(it => {\r\n    return {\r\n      id: it.id,\r\n      styles: it.styles.map(it => createStyle(it)),\r\n      value: it.value,\r\n      definition: CONTENT_DEFINITIONS.find(item => item.key === it.definition)!,\r\n      layout: layout,\r\n      toJSON () {\r\n        const value: ContentSerialize = {\r\n          value: this.value,\r\n          id: this.id,\r\n          styles: this.styles.map(it => it.toJSON()),\r\n          layout: this.layout.id,\r\n          definition: this.definition.key\r\n        }\r\n        return value\r\n      }\r\n    }\r\n  })\r\n  return layout\r\n}\r\n\r\nconst createByLayoutDefinition = (definition: LayoutDefinition, defaultStyles: Style<any>[]): Layout => {\r\n  return {\r\n    id: uuid4(),\r\n    styles: definition.styles.map(it => createStyle(it, defaultStyles.find(dit => it.key === dit.definition.key)?.value)),\r\n    contents: [],\r\n    definition: definition,\r\n    toJSON () {\r\n      return {\r\n        ...this,\r\n        definition: this.definition.key\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst createByContentDefinition = (definition: ContentDefinition<any, any>, defaultStyles: Style<any>[]): Layout => {\r\n  const layout = createByLayoutDefinition(definition?.layout ?? Many, defaultStyles)\r\n  const content = createContent(layout, definition, defaultStyles)\r\n  layout.contents.push(content)\r\n  return layout\r\n}\r\n\r\nexport const createLayout = (target: LayoutDefinition | LayoutSerialize | ContentDefinition<any, any>, defaultStyles?: Style<any>[]): Layout => {\r\n  if ((target as ContentDefinition<any, any>).Blueprint) {\r\n    return createByContentDefinition(target as ContentDefinition<any, any>, defaultStyles!)\r\n  }\r\n\r\n  if ((target as LayoutSerialize).definition) {\r\n    return createByLayoutSerialize(target as LayoutSerialize)\r\n  }\r\n  return createByLayoutDefinition(target as LayoutDefinition, defaultStyles!)\r\n}\r\n\r\nexport const getLayoutDefinitions = async () => {\r\n  return [\r\n    await import('./many')\r\n  ]\r\n}\r\n","import { Metadata, Page, PageSerialize } from './types'\r\nimport { StyleSerialize } from './styles/types'\r\nimport { createStyle } from './styles/utils'\r\nimport { DEFAULT_TEMPLATE_STYLES } from './index'\r\nimport { LayoutSerialize } from './layout/types'\r\nimport { createLayout } from './layout/utils'\r\n\r\nexport type FlattenData = Record<string, any>\r\n/**\r\n * object 数据扁平化处理, 处理基本类型和非数组对象\r\n * @param data {\r\n *   a: 1,\r\n *   b: [1, 2],\r\n *   c: { e: 2, f: 3 },\r\n *   g: null,\r\n * }\r\n * return {\r\n *   a: 1,\r\n *   b[]: [1, 2],\r\n *   'c.e': 2,\r\n *   'c.f': 3,\r\n *   g: null,\r\n * }\r\n */\r\nexport const flattenData = (data: any | undefined): FlattenData => {\r\n  const result: Record<string, any> = {}\r\n  const precess = (key: string, value: any) => {\r\n    if (value && typeof value === 'object') {\r\n      if (Array.isArray(value)) {\r\n        result[`${key}[]`] = value\r\n      } else {\r\n        for (const valueKey in value) {\r\n          precess(key ? `${key}.${valueKey}` : valueKey, value[valueKey])\r\n        }\r\n      }\r\n    } else if (key) {\r\n      result[key] = value\r\n    }\r\n  }\r\n  precess('', data)\r\n  return result\r\n}\r\n\r\n/**\r\n * 获取渲染数据\r\n * @param texts       1.xx${xxx}xx 判断文本获取， 2. xx 获取object数据\r\n * @param metadata    数据定义\r\n * @param data        渲染数据\r\n */\r\nexport const getRenderData = (texts: string | string[], metadata: Metadata, data: FlattenData) => {\r\n  const isArray = Array.isArray(texts)\r\n  const result = (isArray ? texts as string[] : [texts as string]).map(text => {\r\n    if (text.includes('${')) {\r\n      return text.replace(/\\${([^}]+)}/g, (match, p1: string) => {\r\n        // ${12} 快速空格\r\n        // if (!p1.includes('.') && !Number.isNaN(p1)) {\r\n        //   const len = Number(p1)\r\n        //   if (len < 1) {\r\n        //     return ''\r\n        //   }\r\n        //   let sb = ''\r\n        //   for (let i = 0; i < len; i++) {\r\n        //     sb += '&nbsp;'\r\n        //   }\r\n        //   return sb\r\n        // }\r\n        const key = p1.trim()\r\n        const exec = /\\[([0-9]+)]$/.exec(key)\r\n        const val = data[exec ? exec[1] : key]\r\n        if (Array.isArray(val) && ['string', 'number', 'boolean', 'undefined'].includes(typeof val[0])) {\r\n          return `\\n${val.filter(it => it).join('\\n')}\\n`\r\n        }\r\n        return val || ''\r\n      })\r\n    }\r\n    const key = text.trim()\r\n    // alias[2]\r\n    const exec = /\\[([0-9]+)]$/.exec(key)\r\n    const item = metadata.items.find(it => {\r\n      if (exec) {\r\n        return it.id === Number(exec[1])\r\n      }\r\n      return it.path === key\r\n    })\r\n    if (!item) {\r\n      if (exec) {\r\n        return undefined\r\n      }\r\n      return text\r\n    }\r\n    return data[exec ? exec[1] : key]\r\n  })\r\n  return isArray ? result : result[0]\r\n}\r\n\r\nexport const deserializePage = (page: PageSerialize): Page => {\r\n  return {\r\n    footer: page.footer,\r\n    header: page.header,\r\n    width: page.width,\r\n    height: page.height,\r\n    listIndexes: page.listIndexes,\r\n    pageIndexes: page.pageIndexes,\r\n    styles: page.styles.length ? page.styles.map((it: StyleSerialize) => createStyle(it)) : DEFAULT_TEMPLATE_STYLES,\r\n    layouts: page.layouts.map((it: LayoutSerialize) => createLayout(it))\r\n  }\r\n}\r\n","import React, { useState } from 'react'\r\nimport Material from './material'\r\nimport Blueprint from './blueprint'\r\nimport { DragDropContext, DropResult } from 'react-beautiful-dnd'\r\nimport styled from 'styled-components'\r\nimport { DroppableIds, MaterialType } from './types'\r\nimport Building from './building'\r\nimport { Layout } from '../../definition/layout/types'\r\nimport { createLayout } from '../../definition/layout/utils'\r\nimport { Content } from '../../definition/content/types'\r\nimport { createContent } from '../../definition/content/utils'\r\nimport { message } from 'antd'\r\nimport { deserializePage, flattenData, getRenderData } from '../../definition/utils'\r\nimport { Metadata, Page, PageSerialize, Template } from '../../definition/types'\r\nimport Header from '../../components/Header'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport { METATABLES, TEMPLATES } from '../../plugins/database'\r\nimport useLocalStorage from 'react-use-localstorage'\r\nimport { CONTENT_DEFINITIONS } from '../../definition'\r\nimport Many from '../../definition/layout/many'\r\n\r\nconst Container = styled.div`\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  > div:nth-child(2) {\r\n    display: flex;\r\n    flex: auto;\r\n  }\r\n`\r\n\r\nfunction Editor () {\r\n  const navigate = useNavigate()\r\n  const { id } = useParams()\r\n  const [templates, setTemplates] = useLocalStorage('RE-templates', JSON.stringify(TEMPLATES))\r\n\r\n  const template = (JSON.parse(templates) as Template[]).find((it: any) => it.id === id)\r\n  if (!template) {\r\n    message.error('编辑内容已被删除')\r\n    navigate('/template')\r\n    return null\r\n  }\r\n\r\n  const [metatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\r\n  const metadata = (JSON.parse(metatables) as Metadata[]).find(it => it.id === template.metadataId)!\r\n  const renderData = flattenData(JSON.parse(metadata.json))\r\n\r\n  const [pageCache, setPageCache] = useLocalStorage(`RE-editTemplate-${id}`)\r\n  const pageSerialize: PageSerialize = JSON.parse(pageCache || template.json || JSON.stringify({\r\n    footer: -1,\r\n    header: -1,\r\n    width: 210,\r\n    height: 297,\r\n    layouts: [],\r\n    listIndexes: [],\r\n    pageIndexes: [],\r\n    styles: []\r\n  }))\r\n  const page: Page = deserializePage(pageSerialize)\r\n  const setPage = (value: Page) => {\r\n    setPageCache(JSON.stringify(value))\r\n  }\r\n\r\n  const [active, setActive] = useState<Layout | Content<any, any> | undefined>()\r\n\r\n  const onDragEnd = (result: DropResult) => {\r\n    // dropped outside the list\r\n\r\n    const {\r\n      destination,\r\n      source,\r\n      draggableId\r\n    } = result\r\n\r\n    if (!destination || destination.droppableId === DroppableIds.Material) {\r\n      return\r\n    }\r\n\r\n    // 拖动内容素材\r\n    if (source.droppableId === DroppableIds.Material) {\r\n      const contentDefinition = CONTENT_DEFINITIONS.find(it => it.key === draggableId)!\r\n      // 移动到空白区域\r\n      if (destination.droppableId === DroppableIds.Building) {\r\n        // 移动内容到基础布局\r\n        const layout = createLayout(contentDefinition, page.styles)\r\n        page.layouts.splice(destination.index, 0, layout)\r\n        setPage({ ...page })\r\n        setActive(layout.contents[0])\r\n        return\r\n      }\r\n\r\n      // 移动到现有布局\r\n      const layout = page.layouts.find(it => destination.droppableId.startsWith(it.id))!\r\n      const content = createContent(layout, contentDefinition, page.styles)\r\n      if (layout.definition !== Many) {\r\n        return\r\n      }\r\n      layout.contents.splice(destination.index, 0, content)\r\n      setActive(content)\r\n      setPage({ ...page, layouts: [...page.layouts] })\r\n      return\r\n    }\r\n\r\n    // 移动布局/内容, 修改顺序\r\n    if (source.droppableId === destination.droppableId) {\r\n      // 删除后的位置调整\r\n      const offset = destination.index > 0 && source.index > destination.index ? destination.index - 1 : 0\r\n\r\n      // 布局修改顺序\r\n      if (source.droppableId === DroppableIds.Building) {\r\n        const target = page.layouts[source.index]\r\n        // 删除原有\r\n        page.layouts.splice(source.index, 1)\r\n        // 重新插入\r\n        page.layouts.splice(destination.index - offset, 0, target)\r\n        setActive(target)\r\n        setPage({ ...page, layouts: [...page.layouts] })\r\n        return\r\n      }\r\n      // 内容修改顺序\r\n      const layout = page.layouts.find(it => destination.droppableId.startsWith(it.id))!\r\n      const contents = layout.contents\r\n      const target = contents[source.index]\r\n      // 删除原有\r\n      contents.splice(source.index, 1)\r\n      // 重新插入\r\n      contents.splice(destination.index - offset, 0, target)\r\n      target.layout = layout\r\n      setActive(target)\r\n      setPage({ ...page, layouts: [...page.layouts] })\r\n      return\r\n    }\r\n\r\n    // 布局合并\r\n    if (draggableId.endsWith(MaterialType.Layout) && destination.droppableId.endsWith(MaterialType.Content)) {\r\n      const index = page.layouts.findIndex(it => draggableId.startsWith(it.id))\r\n      // 布局不是行多排列禁止合并\r\n      if (index === -1 || page.layouts[index].definition !== Many) {\r\n        return\r\n      }\r\n      const layout = page.layouts.find(it => destination.droppableId.startsWith(it.id))!\r\n      // 布局不是行排列禁止合并\r\n      if (!layout || layout.definition !== Many) {\r\n        return\r\n      }\r\n      // 将拖动布局内容合并到目标布局\r\n      const contents = page.layouts[index].contents\r\n      layout.contents.splice(destination.index, 0, ...contents)\r\n      // 删除拖动布局\r\n      page.layouts.splice(index, 1)\r\n      setPage({ ...page, layouts: [...page.layouts] })\r\n    }\r\n\r\n    // 移动内容\r\n    if (!draggableId.endsWith(MaterialType.Layout) && !draggableId.endsWith(MaterialType.Content)) {\r\n      const sourceLayout = page.layouts.find(it => source.droppableId.startsWith(it.id))!\r\n      const content = sourceLayout.contents.find(it => it.id === draggableId)!\r\n      const destinationLayout = page.layouts.find(it => destination.droppableId.startsWith(it.id))!\r\n\r\n      // 拖动结果为建造区\r\n      if (destination.droppableId === DroppableIds.Building) {\r\n        const layout = createLayout(Many)\r\n        layout.contents.push(content)\r\n        page.layouts.splice(destination.index, 0, layout)\r\n        content.layout = layout\r\n      } else if (destinationLayout && destinationLayout.definition === Many) {\r\n        // 向结果布局插入内容\r\n        destinationLayout.contents.splice(destination.index, 0, content)\r\n        content.layout = destinationLayout\r\n        setActive(content)\r\n      } else {\r\n        // 无效拖动\r\n        return\r\n      }\r\n\r\n      // 从原拖动布局删除内容\r\n      sourceLayout.contents.splice(source.index, 1)\r\n\r\n      // 判断删除拖动布局是否空， 空删除\r\n      if (!sourceLayout.contents.length) {\r\n        const idx = page.layouts.findIndex(it => source.droppableId.startsWith(it.id))!\r\n        page.layouts.splice(idx, 1)\r\n      }\r\n      setPage({ ...page, layouts: [...page.layouts] })\r\n    }\r\n  }\r\n\r\n  const changeActive = (layoutId: string, contentId?: string) => {\r\n    const layout = page.layouts.find(it => it.id === layoutId)!\r\n    if (contentId) {\r\n      const content = layout.contents.find(it => it.id === contentId)!\r\n      setActive(content)\r\n    } else {\r\n      setActive(layout)\r\n    }\r\n  }\r\n\r\n  const changeActiveValue = (value: Layout | Content<any, any>) => {\r\n    setActive(value)\r\n    let layoutIndex = page.layouts.findIndex(it => it.id === value.id)\r\n    // layout 修改\r\n    if (layoutIndex !== -1) {\r\n      const layout = page.layouts[layoutIndex]\r\n      layout.contents = (value as Layout).contents\r\n      layout.styles = value.styles\r\n      if (layout.contents.length === 0) {\r\n        page.layouts.splice(layoutIndex, 1)\r\n      } else {\r\n        page.layouts.splice(layoutIndex, 1, layout)\r\n      }\r\n      setPage({ ...page })\r\n      return\r\n    }\r\n    // content 修改\r\n    const content = value as Content<any, any>\r\n    layoutIndex = page.layouts.findIndex(it => it.id === content.layout.id)\r\n    // 移动后未修改 content.layout 发生错误\r\n    if (layoutIndex === -1) {\r\n      setActive(undefined)\r\n      message.error('无效的修改,编辑的内容已过期')\r\n      return\r\n    }\r\n    const layout = page.layouts[layoutIndex]\r\n    const contentIndex = layout.contents.findIndex(it => it.id === content.id)\r\n    const target = layout.contents[contentIndex]\r\n    target.value = (value as Content<any, any>).value\r\n    target.styles = value.styles\r\n    layout.contents.splice(contentIndex, 1, target)\r\n    page.layouts.splice(layoutIndex, 1, layout)\r\n    setPage({ ...page })\r\n  }\r\n\r\n  const onSave = (back: boolean) => {\r\n    const temps = JSON.parse(templates) as Template[]\r\n    template.json = pageCache\r\n    const index = temps.findIndex(it => it.id === template.id)\r\n    if (index === -1) {\r\n      message.error('编辑内容已被删除')\r\n      navigate('/template')\r\n      setPageCache('')\r\n      return\r\n    }\r\n    temps.splice(index, 1, template)\r\n    setTemplates(JSON.stringify(temps))\r\n    setPageCache('')\r\n    if (back) {\r\n      navigate('/template')\r\n    }\r\n  }\r\n\r\n  const onCancel = () => {\r\n    setPageCache('')\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Header isFull={true} />\r\n      <div>\r\n        <DragDropContext onDragEnd={onDragEnd}>\r\n          <Material\r\n            value={page}\r\n            onChange={setPage}\r\n            updating={!!pageCache}\r\n            onSave={onSave}\r\n            onCancel={onCancel}\r\n            template={template}\r\n          />\r\n          <Building\r\n            value={page}\r\n            getData={value => getRenderData(value, metadata, renderData)}\r\n            onChangeActive={changeActive}\r\n            active={active}\r\n          />\r\n        </DragDropContext>\r\n        <Blueprint\r\n          active={active}\r\n          onChangeActiveValue={changeActiveValue}\r\n          onChangeActive={changeActive}\r\n          value={page}\r\n          onChange={setPage}\r\n          metadata={metadata}\r\n          getData={value => getRenderData(value, metadata, renderData)}\r\n        />\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Editor\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { TEMPLATES } from '../plugins/database'\r\nimport useLocalStorage from 'react-use-localstorage'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { PageSerialize, Template } from '../definition/types'\r\nimport { Button } from 'antd'\r\n\r\nconst Container = styled.div`\r\n  padding: 15px 30px;\r\n`\r\n\r\nconst Items = styled.div`\r\n  padding: 15px 8px;\r\n  border-bottom: 1px solid #ebe0e0;\r\n\r\n  > div:first-child {\r\n    display: flex;\r\n    flex: auto;\r\n    margin-bottom: 8px;\r\n    align-items: center;\r\n\r\n    > div:nth-child(1) {\r\n      font-size: 16px;\r\n    }\r\n\r\n    > div:nth-child(2) {\r\n      flex: auto;\r\n    }\r\n\r\n    > div:nth-child(3) {\r\n      padding-right: 25px;\r\n    }\r\n  }\r\n\r\n  > div:last-child {\r\n    color: #bfbfbf;\r\n  }\r\n`\r\n\r\nconst Preview = () => {\r\n  const navigate = useNavigate()\r\n  const [templates] = useLocalStorage('RE-templates', JSON.stringify(TEMPLATES))\r\n  const temps = (JSON.parse(templates) as Template[]).filter(it => it.json && (JSON.parse(it.json) as PageSerialize).layouts.length > 0)\r\n\r\n  return (\r\n    <Container>\r\n      {temps.map((it, index) => (\r\n        <Items key={index}>\r\n          <div>\r\n            <div>{it.title}</div>\r\n            <div/>\r\n            <div>{it.updatedAt}</div>\r\n            <div><Button type=\"primary\" onClick={() => navigate(`/preview/${it.id}`)}>打印预览</Button></div>\r\n          </div>\r\n          <div>\r\n            {it.description}\r\n          </div>\r\n        </Items>\r\n      ))}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Preview\r\n","import React, { useRef, useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Metadata, Page } from '../../definition/types'\r\nimport { render } from '../../definition/styles/utils'\r\nimport { flattenData, getRenderData } from '../../definition/utils'\r\nimport html2Canvas from 'html2canvas'\r\nimport { jsPDF as JsPDF } from 'jspdf'\r\nimport { Button } from 'antd'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Container = styled.div<{width: number}>`\r\n  width: ${props => props.width}mm;\r\n  border-right: 1px solid #ebe0e0;\r\n  background-color: beige;\r\n  box-sizing: content-box;\r\n`\r\n\r\nconst Header = styled.div`\r\n  background-color: #fff;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n`\r\n\r\nconst RenderContainer = styled.div<{width: number, height: number}>`\r\n  width: ${props => props.width}mm;\r\n  min-height: ${props => props.height ? `${props.height}mm` : 'auto'};\r\n  background-color: antiquewhite;\r\n  visibility: hidden;\r\n  position: absolute;\r\n  top: 0;\r\n`\r\n\r\nconst PageImg = styled.img<{width: number, height: number}>`\r\n  width: ${props => props.width}mm;\r\n  height: ${props => props.height ? `${props.height}mm` : 'auto'};\r\n  margin: 15px 0;\r\n`\r\n\r\nconst IFRAME_ID = 're-iframe'\r\nconst SCALE = 3\r\n\r\nconst Render = (props: {\r\n  page: Page\r\n  metadata: Metadata\r\n  data: object\r\n}) => {\r\n  const navigate = useNavigate()\r\n  const data = flattenData(props.data)\r\n  const ref = useRef<HTMLDivElement | null>(null)\r\n  const [canvas, setCanvas] = useState<HTMLCanvasElement[]>([])\r\n\r\n  const toCanvas = async (html: string): Promise<HTMLCanvasElement> => {\r\n    const o1 = document.getElementById(IFRAME_ID)\r\n    if (o1) {\r\n      document.body.removeChild(o1)\r\n    }\r\n    const iframe = document.createElement('iframe')\r\n    iframe.id = IFRAME_ID\r\n    iframe.style.visibility = 'hidden'\r\n    iframe.style.position = 'absolute'\r\n    iframe.style.top = '0px'\r\n    iframe.srcdoc = `<!DOCTYPE html>\r\n      <html lang=\"en\" style=\"font-size: ${SCALE * 100}px\">\r\n        <head>\r\n          <meta charset=\"utf-8\" />\r\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n          <title>report print</title>\r\n          <style> * { padding: 0; margin: 0; } </style>\r\n        </head>\r\n        <body>\r\n          <div id=\"app\" style=\"width: ${props.page.width * SCALE}mm; height: ${props.page.height * SCALE}mm\">${html}</div>\r\n        </body>\r\n      </html>\r\n    `\r\n    document.body.appendChild(iframe)\r\n    // 等待渲染完成后获取 element\r\n    await new Promise((resolve) => {\r\n      const timer = setInterval(() => {\r\n        if (iframe.contentDocument && iframe.contentDocument.getElementById('app')) {\r\n          clearInterval(timer)\r\n          resolve(undefined)\r\n        }\r\n      }, 100)\r\n    })\r\n    const canvas = await html2Canvas(iframe.contentDocument!.getElementById('app')!)\r\n    const o2 = document.getElementById(IFRAME_ID)\r\n    if (o2) {\r\n      document.body.removeChild(o2)\r\n    }\r\n    return Promise.resolve(canvas)\r\n  }\r\n\r\n  const renderCanvas = async (): Promise<HTMLCanvasElement[]> => {\r\n    const canvas: HTMLCanvasElement[] = []\r\n\r\n    if (!ref.current) {\r\n      return Promise.resolve([])\r\n    }\r\n    const pageable: { start: number; end: number }[] = []\r\n    // 不分页或单页\r\n    if (props.page.height === 0 || ref.current.offsetHeight === ref.current.scrollHeight) {\r\n      pageable.push({ start: 0, end: props.page.layouts.length })\r\n    } else {\r\n      // TODO 待完善多页处理\r\n      return canvas\r\n    }\r\n\r\n    if (!ref.current) {\r\n      return canvas\r\n    }\r\n    const children = ref.current.children as unknown as HTMLDivElement[]\r\n\r\n    for (const it of pageable) {\r\n      // 根据分页计算结果获取 html\r\n      let html = ''\r\n      for (let i = it.start; i < it.end; i++) {\r\n        html += children[i].outerHTML\r\n      }\r\n      const value = await toCanvas(html)\r\n      canvas.push(value)\r\n    }\r\n    const oldIframe = document.getElementById(IFRAME_ID)\r\n    if (oldIframe) {\r\n      document.body.removeChild(oldIframe)\r\n    }\r\n    return canvas\r\n  }\r\n\r\n  const download = () => {\r\n    if (canvas.length === 0) {\r\n      return\r\n    }\r\n    const doc = new JsPDF({\r\n      unit: 'mm', // 毫米\r\n      format: [props.page.width, props.page.height]\r\n    })\r\n    for (let i = 0; i < canvas.length; i++) {\r\n      const it = canvas[i]\r\n      const dataURL = it.toDataURL('image/jpeg', 1)\r\n      if (i !== 0) {\r\n        doc.addPage()\r\n      }\r\n      doc.setPage(i + 1)\r\n      doc.addImage(dataURL, 'JPEG', 0, 0, props.page.width, props.page.height)\r\n    }\r\n    doc.save('report.pdf')\r\n  }\r\n\r\n  useEffect(() => {\r\n    // 计算分页并渲染成 canvas\r\n    renderCanvas().then(value => {\r\n      setCanvas(value)\r\n    })\r\n  }, [props.data])\r\n\r\n  const getData = (tests: string | string[]) => {\r\n    return getRenderData(tests, props.metadata, data)\r\n  }\r\n\r\n  const print = () => {\r\n    const wind = window.open('', 'print')!\r\n    wind.document.write(`<!DOCTYPE html>\r\n      <html lang=\"en\" style=\"font-size: ${SCALE * 100}px\">\r\n        <head>\r\n          <meta charset=\"utf-8\" />\r\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n          <title>report print</title>\r\n          <style>\r\n          * { padding: 0; margin: 0; }\r\n          body { width: ${props.page.width}mm; }\r\n          img { width: ${props.page.width}mm; height: ${props.page.height ? `${props.page.height}mm` : 'auto'}; }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          ${canvas.map(it => `<img src=\"${it.toDataURL('image/jpeg')}\" alt=\"\" />`)}\r\n        </body>\r\n      </html>\r\n    `)\r\n    setTimeout(() => {\r\n      wind.print()\r\n      wind.close()\r\n    }, 200)\r\n  }\r\n\r\n  return (\r\n    <Container width={props.page.width}>\r\n      <Header>\r\n        <Button type=\"primary\" onClick={() => download()}>PDF下载</Button>\r\n        <Button type=\"primary\" onClick={() => print()}>打印</Button>\r\n        <Button type=\"primary\" onClick={() => navigate('/preview')}>返回</Button>\r\n      </Header>\r\n      {canvas.map((it, index) => (<PageImg key={index} src={it.toDataURL('image/jpeg', 1 / SCALE)} alt=\"\" width={props.page.width} height={props.page.height}/>))}\r\n      <RenderContainer ref={value => { ref.current = value }} width={props.page.width} height={props.page.height}>\r\n        {props.page.layouts.map((it, index) => (\r\n          <it.definition.Render\r\n            key={index}\r\n            style={render(it.styles)}\r\n            contents={it.contents}\r\n            getData={getData}\r\n          />\r\n        ))}\r\n      </RenderContainer>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Render\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport JSONInput from 'react-json-editor-ajrm'\r\nimport locale from 'react-json-editor-ajrm/locale/zh-cn'\r\nimport { message } from 'antd'\r\n\r\nconst Container = styled.div`\r\n`\r\n\r\nconst JsonEditor = (props: {\r\n  value: object\r\n  onChange: (value?: object) => void\r\n}) => {\r\n  const handleChange = (result: any) => {\r\n    if (!result.error) {\r\n      if (!result.json) {\r\n        return props.onChange()\r\n      }\r\n      if (Array.isArray(result.jsObject)) {\r\n        return message.error('数据不是JSON对象')\r\n      }\r\n      props.onChange(result.jsObject)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <JSONInput\r\n        id = 'json-editor'\r\n        placeholder={props.value}\r\n        onChange={(result: any) => handleChange(result)}\r\n        colors = { {\r\n          default: '#000',\r\n          background: '#FCFDFD',\r\n          background_warning: '#000',\r\n          string: '#FA7921',\r\n          number: '#70CE35',\r\n          colon: '#49B8F7',\r\n          keys: '#59A5D8',\r\n          keys_whiteSpace: '#835FB6',\r\n          primitive: '#386FA4',\r\n          error: '#e30b0b'\r\n        } as any}\r\n        locale = { locale }\r\n        width = '100%'\r\n        height = '100%'\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default JsonEditor\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport Header from '../../components/Header'\r\nimport Render from './render'\r\nimport JsonEditor from './json-editor'\r\nimport { METATABLES, TEMPLATES } from '../../plugins/database'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport useLocalStorage from 'react-use-localstorage'\r\nimport { Metadata, Template } from '../../definition/types'\r\nimport { message } from 'antd'\r\nimport { deserializePage } from '../../definition/utils'\r\n\r\nconst Container = styled.div`\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  > div:nth-child(2) {\r\n    display: flex;\r\n    flex: auto;\r\n  }\r\n`\r\n\r\nconst Editor = () => {\r\n  const navigate = useNavigate()\r\n  const { id } = useParams()\r\n  const [templates] = useLocalStorage('RE-templates', JSON.stringify(TEMPLATES))\r\n  const template = (JSON.parse(templates) as Template[]).find((it: any) => it.id === id)\r\n  if (!template) {\r\n    message.error('打印模板已过期')\r\n    navigate('/preview')\r\n    return null\r\n  }\r\n\r\n  const page = deserializePage(JSON.parse(template.json))\r\n\r\n  const [metatables] = useLocalStorage('RE-metatables', JSON.stringify(METATABLES))\r\n  const metadata = (JSON.parse(metatables) as Metadata[]).find(it => it.id === template.metadataId)!\r\n  const [json, setJson] = useState<object>(JSON.parse(metadata.json))\r\n\r\n  return (\r\n    <Container>\r\n      <Header isFull={true}/>\r\n      <div>\r\n        <Render page={page} data={json} metadata={metadata}/>\r\n        <JsonEditor value={json} onChange={value => setJson(value || JSON.parse(metadata.json))}/>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Editor\r\n","import React from 'react'\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom'\nimport Home from '../home'\nimport Error404 from '../errors/error-404'\nimport Metadata from '../metadata'\nimport MetadataEditor from '../metadata/editor'\nimport Template from '../template'\nimport TemplateEditor from '../template/editor'\nimport Preview from '../preview'\nimport PreviewEditor from '../preview/editor'\n\nconst Routing = () => {\n  return (\n    <Router basename=\"report-editor\">\n      <Routes>\n        <Route path=\"/\" element={<Home/>} >\n          <Route path=\"template\" element={<Template/>} />\n          <Route path=\"metadata\" element={<Metadata/>} />\n          <Route path=\"preview\" element={<Preview/>} />\n        </Route>\n        <Route path=\"/metadata/:id\" element={<MetadataEditor/>}/>\n        <Route path=\"/template/:id\" element={<TemplateEditor/>}/>\n        <Route path=\"/preview/:id\" element={<PreviewEditor/>}/>\n        <Route path=\"*\" element={<Error404/>} />\n      </Routes>\n    </Router>\n  )\n}\nexport default Routing\n","import React from 'react'\nimport './App.css'\nimport 'antd/dist/antd.css'\nimport Routing from './plugins/routing'\n\nfunction App () {\n  return (\n    <Routing/>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry)\r\n      getFID(onPerfEntry)\r\n      getFCP(onPerfEntry)\r\n      getLCP(onPerfEntry)\r\n      getTTFB(onPerfEntry)\r\n    })\r\n  }\r\n}\r\n\r\nexport default reportWebVitals\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n","import { createStyle } from './styles/utils'\r\nimport { ContentDefinition } from './content/types'\r\nimport { LayoutDefinition } from './layout/types'\r\nimport { StyleDefinition } from './styles/types'\r\nimport Text from './content/text'\r\nimport Many from './layout/many'\r\nimport FlexDirection from './styles/flex-direction'\r\nimport FlexGrow from './styles/flex-grow'\r\nimport JustifyContent from './styles/justify-content'\r\nimport AlignItems from './styles/align-items'\r\nimport FontSize from './styles/font-size'\r\nimport FontWeight from './styles/font-weight'\r\nimport TextIndent from './styles/text-indent'\r\nimport LetterSpacing from './styles/letter-spacing'\r\nimport MinWidth from './styles/min-width'\r\nimport Color from './styles/color'\r\nimport Ellipsis from './styles/ellipsis'\r\nimport MinHeight from './styles/min-height'\r\nimport MaxHeight from './styles/max-height'\r\nimport MaxWidth from './styles/max-width'\r\nimport Padding from './styles/padding'\r\nimport Border from './styles/border'\r\n\r\nexport const PAPER_SIZES = [\r\n  {\r\n    title: 'A5',\r\n    width: 148,\r\n    height: 210\r\n  },\r\n  {\r\n    title: 'A4',\r\n    width: 210,\r\n    height: 297\r\n  }\r\n]\r\n\r\nexport const STYLE_DEFINITIONS: StyleDefinition<any>[] = [\r\n  FlexDirection,\r\n  JustifyContent,\r\n  AlignItems,\r\n  FlexGrow,\r\n  FontSize,\r\n  FontWeight,\r\n  TextIndent,\r\n  LetterSpacing,\r\n  Color,\r\n  Ellipsis,\r\n  MinHeight,\r\n  MinWidth,\r\n  MaxHeight,\r\n  MaxWidth,\r\n  Padding,\r\n  Border\r\n]\r\n\r\nexport const DEFAULT_TEMPLATE_STYLES = [\r\n  FontSize,\r\n  FontWeight,\r\n  Ellipsis,\r\n  Color\r\n].map(it => createStyle(it))\r\n\r\nexport const CONTENT_DEFINITIONS: ContentDefinition<any, any>[] = [\r\n  Text\r\n]\r\n\r\nexport const LAYOUT_DEFINITIONS: LayoutDefinition[] = [\r\n  Many\r\n]\r\n","import React from 'react'\r\nimport { LayoutDefinition, LayoutBuildingProps, LayoutRenderProps } from './types'\r\nimport styled from 'styled-components'\r\nimport { Draggable, Droppable } from 'react-beautiful-dnd'\r\nimport { render, renderLayout } from '../styles/utils'\r\nimport MinHeight from '../styles/min-height'\r\nimport MaxHeight from '../styles/max-height'\r\nimport Padding from '../styles/padding'\r\n\r\nconst Container = styled.div<{ isDragging: boolean, isActive: boolean }>`\r\n  display: flex;\r\n  flex: auto;\r\n  flex-direction: row;\r\n  position: relative;\r\n  ${props => props.isDragging ? 'border: 1px dashed #4099ff;' : ''}\r\n  ${props => props.isActive ? 'background-color: springgreen' : ''}\r\n`\r\n\r\nconst ContentContainer = styled.div<{ isDragging: boolean, isActive: boolean }>`\r\n  display: flex;\r\n  ${props => props.isDragging ? 'border: 1px dashed #4099ff;' : ''}\r\n  position: relative;\r\n  flex: 1;\r\n  ${props => props.isActive ? 'background-color: springgreen' : ''}\r\n`\r\n\r\nconst Notice = styled.div`\r\n  display: flex;\r\n  flex: auto;\r\n  align-items: center;\r\n  align-content: center;\r\n  justify-content: center;\r\n  font-size: 12px;\r\n  color: #fff;\r\n  background-color: #ff7875;\r\n`\r\n\r\nconst Many: LayoutDefinition = {\r\n  Render (props: LayoutRenderProps) {\r\n    return (\r\n      <div style={props.style}>\r\n        {props.contents.map((it, index) => (\r\n          <it.definition.Render key={index} style={render(it.styles)} result={props.getData(it.value)} />\r\n        ))}\r\n      </div>\r\n    )\r\n  },\r\n  Building (props: LayoutBuildingProps) {\r\n    return (\r\n      <Droppable droppableId={props.id} direction={ 'horizontal'}>\r\n        {(provided, snapshot) => (\r\n          <Container\r\n            style={props.style}\r\n            ref={provided.innerRef}\r\n            isDragging={snapshot.isDraggingOver}\r\n            isActive={!!props.active && props.id.startsWith(props.active.id)}\r\n          >\r\n            {props.contents.length\r\n              ? props.contents.map((it, index) => (\r\n                <Draggable\r\n                  key={it.id}\r\n                  draggableId={it.id}\r\n                  index={index}\r\n                >\r\n                  {(provided, snapshot) => (\r\n                    <ContentContainer\r\n                      ref={provided.innerRef}\r\n                      isDragging={snapshot.isDragging}\r\n                      isActive={props.active?.id === it.id}\r\n                      {...provided.draggableProps}\r\n                      {...provided.dragHandleProps}\r\n                      style={Object.assign(provided.draggableProps.style, renderLayout(it.styles))}\r\n                    >\r\n                      {it.value\r\n                        ? (<it.definition.Building key={index} style={render(it.styles)} value={it.value} result={props.getData(it.value) || it.value} onChangeActive={() => props.onChangeActive(it.id)} />)\r\n                        : (<Notice key={index} onClick={() => props.onChangeActive(it.id)}>未配置属性</Notice>)\r\n                      }\r\n                    </ContentContainer>\r\n                  )}\r\n                </Draggable>\r\n              ))\r\n              : <Notice>请拖动内容进行元素添加</Notice>\r\n            }\r\n            {provided.placeholder}\r\n          </Container>\r\n        )}\r\n      </Droppable>\r\n    )\r\n  },\r\n  description: '页面是竖向排列，使用该布局添加横向内容',\r\n  styles: [MinHeight, MaxHeight, Padding],\r\n  title: '纵向多内容排列',\r\n  key: 'Many'\r\n}\r\nexport default Many\r\n","import React, { ReactElement } from 'react'\r\nimport { InputNumber, Select } from 'antd'\r\n\r\nexport type Unit = 'px' | '%'\r\nexport interface SizeInputValue {\r\n  size: number\r\n  unit: Unit\r\n}\r\nconst SizeSelect = (props: { value: Unit, onChange: (value: Unit) => void }) => (\r\n  <Select value={props.value} onChange={props.onChange}>\r\n    <Select.Option value=\"px\">px</Select.Option>\r\n    <Select.Option value=\"%\">%</Select.Option>\r\n  </Select>\r\n)\r\n\r\nexport interface SizeInputStyleDefinition<T> {\r\n  defaultValue: T\r\n  // 在 blueprint 区域显示的内容\r\n  Blueprint: (props: {value: T, onChange: (value: T) => void}) => ReactElement\r\n}\r\n\r\nexport const SizeInputStyle: SizeInputStyleDefinition<SizeInputValue> = {\r\n  Blueprint (props: { value: SizeInputValue; onChange: (value: SizeInputValue) => void }) {\r\n    return (\r\n      <InputNumber\r\n        min=\"0\"\r\n        max=\"999\"\r\n        style={{ width: 190 }}\r\n        value={String(props.value.size)}\r\n        onChange={(v) => props.onChange({ ...props.value, size: Number(v) })}\r\n        addonAfter={<SizeSelect value={props.value.unit} onChange={v => props.onChange({ ...props.value, unit: v })}/>}\r\n      />\r\n    )\r\n  },\r\n  defaultValue: {\r\n    size: 0,\r\n    unit: 'px'\r\n  }\r\n}\r\n"],"sourceRoot":""}